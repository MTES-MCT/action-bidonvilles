(function(e){function t(t){for(var a,o,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},s={index:0},n=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("7ba5")},"0045":function(e,t,i){"use strict";var a=i("7028"),s=i.n(a);s.a},"01b4":function(e,t,i){},"0514":function(e,t,i){},"08c7":function(e,t,i){e.exports=i.p+"img/extra-communautaires.8492302e.png"},"0a93":function(e,t,i){},"0c81":function(e,t,i){},"0eac":function(e,t,i){e.exports=i.p+"img/water-null.48ff87a6.png"},"0ead":function(e,t,i){},"0f88":function(e,t,i){e.exports=i.p+"img/logo-fabrique-numerique.ad82b7e5.png"},"0fea":function(e,t,i){},"0ff0":function(e,t,i){"use strict";var a=i("0a93"),s=i.n(a);s.a},1210:function(e,t,i){"use strict";var a=i("7fa8"),s=i.n(a);s.a},1223:function(e,t,i){"use strict";var a=i("9cc9"),s=i.n(a);t["default"]=s.a},1239:function(e,t,i){e.exports=i.p+"img/map-en.454a1e25.jpg"},"12a5":function(e,t,i){"use strict";var a=i("7c9e"),s=i.n(a);s.a},1676:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-4.0d429297.jpg"},"17d9":function(e,t,i){"use strict";var a=i("9cfe"),s=i.n(a);s.a},"18f7":function(e,t,i){"use strict";var a=i("e17b"),s=i.n(a);s.a},"1a28":function(e,t,i){},"1a64":function(e,t,i){"use strict";var a=i("bafd"),s=i.n(a);s.a},"1c7c":function(e,t,i){"use strict";var a=i("0ead"),s=i.n(a);s.a},2207:function(e,t,i){"use strict";var a=i("85f4"),s=i.n(a);s.a},"227c":function(e){e.exports=JSON.parse('"0.7.1"')},2283:function(e,t,i){"use strict";var a=i("9f1c"),s=i.n(a);s.a},"22df":function(e,t,i){"use strict";var a=i("42f8"),s=i("1223"),n=i("2877"),o=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);t["default"]=o.exports},2361:function(e,t,i){e.exports=i.p+"img/UK.951da937.svg"},2416:function(e,t,i){e.exports=i.p+"img/eu.9857ed8a.png"},2504:function(e){e.exports=JSON.parse('{"contact":"Contactați echipa de proiect","statistics":"Statistici","legal":"Informații legale","userAccessGuide":"Ghid de acces utilizator","userAgreement":"Acordul Utilizatorului"}')},"273c":function(e,t,i){},"27a3":function(e,t,i){},2839:function(e,t,i){"use strict";var a=i("8251"),s=i.n(a);s.a},2935:function(e,t,i){},"2b2e":function(e,t,i){},"2b50":function(e,t,i){e.exports=i.p+"img/fr.a7b266bf.png"},"2cb4":function(e,t,i){},"2d21":function(e,t,i){"use strict";var a=i("2cb4"),s=i.n(a);s.a},"30a5":function(e,t,i){"use strict";var a=i("9355"),s=i.n(a);s.a},"30c2":function(e,t,i){"use strict";var a=i("3ffc"),s=i.n(a);s.a},"30ce":function(e,t,i){"use strict";var a=i("75df"),s=i.n(a);s.a},"31b7":function(e,t,i){},3229:function(e,t,i){e.exports=i.p+"img/FR.3c609eda.svg"},"33a8":function(e,t,i){},3415:function(e,t,i){"use strict";var a=i("9cc2"),s=i.n(a);s.a},"373f":function(e,t,i){"use strict";var a=i("33a8"),s=i.n(a);s.a},"379b":function(e,t,i){"use strict";var a=i("aac4"),s=i.n(a);s.a},"37bc":function(e,t,i){e.exports=i.p+"img/Marianne.d37c6b1e.svg"},"3a02":function(e,t,i){"use strict";var a=i("8072"),s=i.n(a);s.a},"3b19":function(e){e.exports=JSON.parse('{"header":{"connect":"Se connecter","contact":"Nous contacter"},"hero":{"title":"Agir pour résorber les bidonvilles","subtitle":"Posez-nous une question ou demandez un accès"},"firstSection":{"features":{"position":"L\'information utile sur les sites en un clin d\'oeil","actions":"L’essentiel des actions accessible à tout moment","exchange":"Des échanges facilités entre les acteurs"},"before":"Avant","after":"Après","context":{"title":"Résorption-bidonvilles,","subtitle":"Une plateforme pour accélérer la résorption des bidonvilles","text":"Outil d’information, de partage et de pilotage, la plateforme offre une solution performante et efficace pour la résorption des bidonvilles. Elle permet de créer une véritable dynamique collaborative, au sein d’un territoire, entre les acteurs engagés vers l’objectif de résorption."},"feedback":{"1":{"text":"C’est super parce que vous avez l’info en ligne, vous n’êtes pas face à un tableau excel avec des codes que vous ne comprenez pas.","author":"Chargée de mission en Préfecture de Seine-Saint-Denis"},"2":{"text":"La plateforme a fiabilisé l’information, parce que le tableau Excel n’était pas partagé. Plus on aura des outils collaboratifs, mieux ça sera.","author":"Responsable hygiène publique à la ville de Poitiers"},"3":{"text":"J’ai pu orienter la famille d’une personne que j’accompagne vers une maison des solidarités à partir de la localisation de leur bidonville.","author":"Travailleur social au sein d\'une association à Toulouse"}}},"firstBanner":{"text":"Acteurs de la résorption des bidonvilles, partagez et faites connaître vos actions","cta":"Demander un accès"},"secondSection":{"title":"La résorption complète des bidonvilles,","subtitle":"un objectif national","data":{"1":{"line1":"Plus de","line2":"300 bidonvilles","line3":"en France métropolitaine"},"2":{"line1":"Plus de","line2":"16 000 personnes","line3":"dont 5 000 mineurs"},"3":{"line1":"Majoritairement","line2":"européens","line3":"Roumains et Bulgares"}},"firstParagraph":"Un bidonville est un terrain, une friche ou un immeuble bâti généralement dépourvu des services de base (eau, électricité, gestion des déchets) et occupé illégalement par plusieurs familles.","secondParagraph":{"bold":"Le gouvernement fixe un objectif clair de résorption des bidonvilles en dépassant l’approche centrée sur les évacuations au profit d’une approche globale","normal":"alliant insertion sociale, respect de l’ordre public et prévention des réinstallations. Dans tous les territoires concernés, des actions multi-partenariales efficaces, humaines et pragmatiques doivent être mises en place.","link":"En savoir plus sur la politique de résorption des bidonvilles"},"video":{"text":"Comprendre la résorption des bidonvilles en 2 minutes"}},"secondBanner":{"text":"Voisin, citoyen, habitant d’un bidonville… Une info ? Une question ? Une alerte ?","cta":"Nous contacter"},"thirdSection":{"title":"Les actions en chiffres","firstParagraph":{"bold":"Plus de 30 actions de résorption des bidonvilles menées en 2019 par 35 opérateurs.","normal":"Ces actions sont financées à 75 % par l’État, à 15 % par les collectivités territoriales et à 10 % par des fonds privés ou européens. \\nLes équipes de professionnels accompagnent les familles sur bidonville, en squat ou dans le logement sur tous les aspects : santé, logement, emploi, éducation, stabilisation et sécurisation du site."},"bilan":{"1":{"text":"8600 bénéficiaires"},"2":{"text":"17 sites résorbés","info":"+10 en 1 an"},"3":{"text":"1 000 personnes relogées"},"4":{"text":"1 350 enfants scolarisés"},"5":{"text":"2 040 bénéficiaires","info":"d\'un accompagnement santé"},"6":{"text":"615 contrats de travail signés"}},"cta":"Télécharger le dernier bilan","secondParagraph":{"title":"Un projet porté par la Délégation interministérielle à l’hébergement et l’accès au logement","body":{"text1":"La plateforme numérique Résorption-bidonvilles, portée et lancée en 2018 par la","link1":"Dihal","text2":"s’inscrit dans un objectif de transformation de l’action publique","text3":"Les développements de la plateforme se poursuivent en lien étroit avec ses usagers.","text4":"Vous souhaitez en savoir plus sur la génèse du projet ? Accédez à sa fiche sur","link2":"le site officiel des start-ups d’Etat"},"items":{"1":{"link":"Entrepreneur d’intérêt général","text":"du Programme d’investissement d’avenir en 2019"},"2":{"link":"Programme “rights, citizenship and equality”","text":"de la commission européenne au premier trimestre 2020"},"3":{"link":"Fonds d’accélération des Start-up d’État 3","text":"de la DINUM en avril 2020"},"4":{"link":"Fonds de transformation de l\'action publique","text":"de la DITP en octobre 2020"},"title":"Le projet a été lauréat de plusieurs appels à projet :"}}},"contactForm":{"email":"Votre email","cta":"Nous contacter"}}')},"3b5a":function(e,t,i){"use strict";var a=i("51a8"),s=i.n(a);s.a},"3b8a":function(e,t,i){e.exports=i.p+"img/logo_beta-gouv-fr.ced9be94.jpg"},"3c8d":function(e,t,i){},"3cf0":function(e,t,i){},"3e3e":function(e){e.exports=JSON.parse('{"contact":"Свържете се с екипа на проекта","statistics":"Статистика","legal":"Правна информация","userAccessGuide":"Ръководство за достъп на потребителя","userAgreement":"Споразумение с потребителя"}')},"3ffc":function(e,t,i){},4115:function(e,t,i){},"42da":function(e,t,i){},"42f8":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",{staticClass:"font-bold text-xl"},[e._v(" "+e._s(e.title)+" "),e.showMandatoryStar?i("MandatoryStar"):e._e()],1),i("p",{staticClass:"mt-1 mb-4"},[e._t("default")],2)])},s=[]},4316:function(e,t,i){"use strict";var a=i("3cf0"),s=i.n(a);s.a},4512:function(e,t,i){"use strict";var a=i("4c91"),s=i.n(a);s.a},4583:function(e,t,i){},"47b0":function(e,t,i){},"4a62":function(e,t,i){},"4c91":function(e,t,i){},"4ca6":function(e,t,i){"use strict";var a=i("81a2"),s=i.n(a);s.a},"4f16":function(e,t,i){"use strict";var a=i("be9a"),s=i.n(a);s.a},"51a8":function(e,t,i){},5362:function(e){e.exports=JSON.parse('{"title":"Дейци в политиката за закриването на бидонвилите,споделете и разпространете информация за вашата дейност","contactUs":"Свържете се с нас","email":"Вашият имейл","firstname":"Име","lastname":"Фамилия","requestType":"Желаете да...","help":"Помогнете","report":"Подадете сигнал","requestHelp":"Поискате помощ","requestInfo":"Поискате информация","requestAccess":"Поискате достъп до платформата","isActor":"Активен участник ли сте в закриването на бидонвили?","actorExample":"Например: държавна служба, неправителствен оператор, местна власт...","yes":"Да","no":"Не","whichEstablishment":"Коя е вашата организация?","public":"Държавна служба, публична институция или орган","territorialCollectivity":"Местна власт","association":"Сдружение","administration":"Централна администрация","message":"Вашето съобщение","legal":"Декларирам, че личните ми данни са въведени с мое съгласие.","send":"Изпрати","cancel":"Отмени","error":"Вашата заявка съдържа грешки","share":"Споделете тази страница"}')},5449:function(e,t,i){"use strict";var a=i("ff59"),s=i.n(a);s.a},"54a1":function(e,t,i){},5549:function(e,t,i){e.exports=i.p+"img/map-bg.d95207bf.png"},"597c":function(e,t,i){e.exports=i.p+"img/status.d076deee.svg"},"5c5a":function(e,t,i){},"5e31":function(e,t,i){"use strict";var a=i("c368"),s=i.n(a);s.a},"5ff8":function(e){e.exports=JSON.parse('{"contact":"Contact the team","statistics":"Statistics","legal":"Legal information","userAccessGuide":"User access guide","userAgreement":"User agreement"}')},"602b":function(e,t,i){},"60ec":function(e,t,i){},6382:function(e,t,i){},"63fe":function(e,t,i){},"64d6":function(e,t,i){e.exports=i.p+"img/after.11d92026.png"},"64e1":function(e,t,i){e.exports=i.p+"img/water-no.1646343a.png"},6501:function(e,t,i){"use strict";var a=i("273c"),s=i.n(a);s.a},"65a2":function(e,t,i){"use strict";var a=i("0c81"),s=i.n(a);s.a},6613:function(e,t,i){"use strict";var a=i("a605"),s=i.n(a);s.a},"669e":function(e,t,i){"use strict";var a=i("54a1"),s=i.n(a);s.a},"67e3":function(e,t,i){e.exports=i.p+"img/water-yes.87235d21.png"},"687a":function(e){e.exports=JSON.parse('{"title":"Voisin, citoyen, habitant d’un bidonville… Une info ? Une question ? Une alerte ?","contactUs":"Contactez-nous","email":"Votre email","firstname":"Prénom","lastname":"Nom de famille","requestType":"Vous souhaitez...","help":"Aider","report":"Signaler","requestHelp":"Demander de l\'aide","requestInfo":"Demander des infos","requestAccess":"Demander un accès à la plateforme","isActor":"Êtes-vous acteur de la résorption des bidonvilles?","actorExample":"Par exemple : un service de l’État, un opérateur associatif, une collectivité locale","yes":"Oui","no":"Non","whichEstablishment":"Quelle structure?","public":"Service de l’Etat, établissement ou organisme public","territorialCollectivity":"Collectivité territoriale","association":"Association","administration":"Administration centrale","message":"Votre message","legal":"Je certifie que ces données personnelles ont été saisies avec mon accord","send":"Envoyer","cancel":"Annuler","error":"Votre demande comprend des erreurs:","share":"Partager cette page"}')},"69c8":function(e,t,i){"use strict";var a=i("5c5a"),s=i.n(a);s.a},"6ead":function(e,t,i){e.exports=i.p+"img/logo-gouvernement.c2eee174.jpg"},"6ecd":function(e,t,i){e.exports=i.p+"img/type.049e9884.svg"},"6fc5":function(e,t,i){"use strict";var a=i("31b7"),s=i.n(a);s.a},7028:function(e,t,i){},"71ee":function(e,t,i){e.exports=i.p+"img/utensils.fe20af2e.png"},"75df":function(e,t,i){},"771a":function(e,t,i){"use strict";var a=i("4115"),s=i.n(a);s.a},"77c2":function(e,t,i){"use strict";var a=i("602b"),s=i.n(a);s.a},"77c5":function(e,t,i){e.exports=i.p+"img/logo-entrepreneur-interet-general.559c3e82.png"},"7b35":function(e,t,i){},"7b7b":function(e,t,i){e.exports=i.p+"img/before.0c8a018e.png"},"7ba5":function(e,t,i){"use strict";i.r(t);i("ea19"),i("f138"),i("e9cc"),i("2d26"),i("96cf");var a=i("2b0e"),s=i("a925"),n=i("8c4f"),o=i("4ddc"),r=i("ad3d"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view"),i("NotificationsGroup")],1)},c=[],u=i("2877"),d={},p=Object(u["a"])(d,l,c,!1,null,null,null),m=p.exports,h=i("ecee"),v=i("f2d1"),f=i("c074");h["c"].add(f["G"]),h["c"].add(f["e"]),h["c"].add(f["p"]),h["c"].add(f["R"]),h["c"].add(f["kb"]),h["c"].add(f["lb"]),h["c"].add(f["mb"]),h["c"].add(f["pb"]),h["c"].add(f["c"]),h["c"].add(f["z"]),h["c"].add(f["A"]),h["c"].add(f["T"]),h["c"].add(f["gb"]),h["c"].add(f["O"]),h["c"].add(f["n"]),h["c"].add(f["u"]),h["c"].add(f["w"]),h["c"].add(f["U"]),h["c"].add(f["D"]),h["c"].add(f["cb"]),h["c"].add(f["k"]),h["c"].add(f["l"]),h["c"].add(f["m"]),h["c"].add(f["j"]),h["c"].add(f["t"]),h["c"].add(f["jb"]),h["c"].add(f["I"]),h["c"].add(f["Q"]),h["c"].add(f["E"]),h["c"].add(f["qb"]),h["c"].add(f["ob"]),h["c"].add(f["C"]),h["c"].add(f["a"]),h["c"].add(f["eb"]),h["c"].add(f["L"]),h["c"].add(f["M"]),h["c"].add(f["fb"]),h["c"].add(f["g"]),h["c"].add(f["x"]),h["c"].add(f["W"]),h["c"].add(f["K"]),h["c"].add(f["nb"]),h["c"].add(f["h"]),h["c"].add(f["J"]),h["c"].add(f["bb"]),h["c"].add(f["Y"]),h["c"].add(f["hb"]),h["c"].add(f["ib"]),h["c"].add(f["H"]),h["c"].add(f["P"]),h["c"].add(f["f"]),h["c"].add(f["F"]),h["c"].add(f["s"]),h["c"].add(f["q"]),h["c"].add(f["r"]),h["c"].add(f["b"]),h["c"].add(f["c"]),h["c"].add(f["db"]),h["c"].add(v["b"]),h["c"].add(v["a"]),h["c"].add(f["ab"]),h["c"].add(f["V"]),h["c"].add(f["o"]),h["c"].add(f["S"]),h["c"].add(f["y"]),h["c"].add(f["N"]),h["c"].add(f["d"]),h["c"].add(f["Z"]),h["c"].add(f["i"]),h["c"].add(f["X"]),h["c"].add(f["B"]),h["c"].add(f["v"]);var g=i("3b19"),b=i("687a"),_=i("af21"),y={landingPage:g,contactPage:b,footer:_},w=i("af3d"),C=i("983b"),k=i("5ff8"),x={landingPage:w,contactPage:C,footer:k},S=i("fd3d"),P=i("9ddb"),$=i("2504"),T={landingPage:S,contactPage:P,footer:$},I=i("cda2"),O=i("5362"),A=i("3e3e"),E={landingPage:I,contactPage:O,footer:A},N={fr:y,en:x,ro:T,bg:E},q=i("95bf"),D=i("7bb1"),j=i("4c93"),M=i("6fde"),L=i("2593"),F=i("eaf5"),z=i("3108"),R=i("0158"),B=i.n(R),V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.isLink?"a":"button",{tag:"component",class:["btn inline-block relative",e.sizeClasses,e.variantClasses,this.disabled&&"opacity-50 cursor-not-allowed"],attrs:{disabled:e.disabled||e.loading,href:e.isLink?e.disabled?null:e.href:null,type:e.isLink?null:e.type},on:{click:e.onClick}},[i("div",{class:["flex","items-center","right"===e.iconPosition?"flex-row-reverse":"flex-row",e.loading&&"invisible"]},[e.icon||e.$slots.icon?i("div",[e._t("icon",[i("Icon",{attrs:{icon:e.icon}})])],2):e._e(),e.$slots.default?i("div",{class:e.iconPositionClasses},[e._t("default")],2):e._e()]),e.loading?i("div",{staticClass:"absolute inset-0 flex justify-center items-center"},[i("Icon",{attrs:{icon:"spinner",spin:""}})],1):e._e()])},U=[],H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("font-awesome-icon",{attrs:{icon:e.icon,spin:e.spin}})},G=[],W={name:"Icon",props:{icon:{type:String,required:!0},spin:{type:Boolean}}},Q=W,J=Object(u["a"])(Q,H,G,!1,null,null,null),Y=J.exports,Z={name:"Button",props:{variant:{type:String,default:"primary"},type:String,href:String,size:{type:String,default:"md"},icon:String,iconPosition:{type:String,default:"right"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{iconPositionClasses(){return this.icon?{left:"ml-2",right:"mr-2"}[this.iconPosition]:""},sizeClasses(){return{sm:"text-sm "+(this.isLink?"":"py-1 px-2"),md:"text-md "+(this.isLink?"":"py-2 px-4"),lg:"text-lg "+(this.isLink?"":"py-2 px-4")}[this.size]},variantClasses(){return{primary:"rounded-sm border-2 border-primary bg-primary text-white hover:bg-primaryDark focus:outline-none",secondary:"rounded-sm border-2 border-secondary bg-secondary text-white hover:bg-secondaryDark focus:outline-none",tertiary:"rounded-sm border-2 border-tertiary bg-tertiary text-white hover:bg-tertiaryDark hover:border-tertiaryDark focus:outline-none",primaryOutline:"rounded-sm border-2 border-primary text-primary hover:bg-primary hover:text-white focus:outline-none",secondaryOutline:"rounded-sm border-2  border-secondary text-secondary hover:bg-secondary hover:text-white focus:outline-none",primaryText:"text-primary hover:text-primaryDark focus:outline-none",secondaryText:"text-secondary hover:text-secondaryDark focus:outline-none",text:"focus:outline-none",filter:"rounded border border-primary text-primary hover:bg-primary hover:text-white focus:outline-none"}[this.variant]},isLink(){return void 0!==this.href}},methods:{onClick(e){this.$emit("click",e)}},components:{Icon:Y}},K=Z,X=Object(u["a"])(K,V,U,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("InputWrapper",{attrs:{hasErrors:!!a.length}},[i("InputLabel",{attrs:{label:e.label,info:e.info,showMandatoryStar:e.showMandatoryStar}}),i("div",{staticClass:"relative",class:e.width},[e.prefixIcon?i("InputIcon",{attrs:{position:"before",icon:e.prefixIcon}}):e._e(),i("input",e._b({class:e.classes,attrs:{id:e.id,"data-cy-field":e.cypressName},on:{input:function(t){return e.$emit("input",t.target.value)}}},"input",e.filteredProps,!1)),e.suffixIcon?i("InputIcon",{attrs:{position:"after",icon:e.suffixIcon}}):e._e()],1),i("InputError",[e._v(e._s(a[0]))])],1)]}}])})},ie=[],ae={computed:{filteredProps(){const e={...this.$props};return Object.keys(e).forEach(t=>{void 0===e[t]&&delete e[t]}),e}}},se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.label?i("div",{staticClass:"font-bold"},[e._v(" "+e._s(e.label)+" "),e.showMandatoryStar?i("MandatoryStar"):e._e()],1):e._e(),e.info?i("div",{staticClass:"mb-3 text-G600"},[e._v(e._s(e.info))]):e._e()])},ne=[],oe={props:{label:{type:String},info:{type:String},showMandatoryStar:{required:!1,type:Boolean,default:!1}}},re=oe,le=Object(u["a"])(re,se,ne,!1,null,null,null),ce=le.exports,ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["relative",e.withoutMargin?"":"mb-6"]},[e.hasErrors?i("div",{staticClass:"absolute inputWrapper-error w-1 h-full bg-red600"}):e._e(),e._t("default")],2)},de=[],pe={props:{hasErrors:{type:Boolean},withoutMargin:{required:!1,type:Boolean,default:!1}}},me=pe,he=(i("bc14"),Object(u["a"])(me,ue,de,!1,null,null,null)),ve=he.exports,fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-error mt-2"},[e._t("default")],2)},ge=[],be={},_e=Object(u["a"])(be,fe,ge,!1,null,null,null),ye=_e.exports,we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["absolute inset-y-0 flex items-center",e.positionClasses]},[e._t("default",[e.icon?i("Icon",{attrs:{icon:e.icon}}):e._e()])],2)},Ce=[],ke={props:{icon:{type:String},position:{type:String}},computed:{positionClasses(){return"after"===this.position?"right-0 pr-3 ":"left-0 pl-3 "}}},xe=ke,Se=Object(u["a"])(xe,we,Ce,!1,null,null,null),Pe=Se.exports;function $e(e,t){const{error:i,prefixIcon:a,suffixIcon:s,size:n}=t;return{state:["bg-G200 border-b-2 border-black rounded rounded-b-none w-full py-2 ",i&&"border-error",a&&"pl-10",s&&"pr-10"],classic:["border border-G200 rounded-md w-full py-2 px-4 outline-none focus:border-primary",i&&"border-error",a&&"pl-10",s&&"pr-10"],default:["border-2 border-blue200 py-1 px-4 w-full outline-none focus:border-primary hover:border-inputHover","sm"===n?"text-xs":"",a&&"pl-10",s&&"pr-10"]}[e]}var Te={name:"TextInput",mixins:[ae],props:{label:{type:String},info:{type:String},placeholder:{type:String},type:{type:String,default:"text"},validationName:{type:String},rules:{type:String},value:{type:String},id:{type:String},variant:{type:String,default:"default"},prefixIcon:{type:String},suffixIcon:{type:String},cypressName:{type:String},showMandatoryStar:{required:!1,type:Boolean,default:!1},size:{type:String},width:{required:!1,type:String,default:void 0}},computed:{classes(){const e={size:this.size,error:this.error,prefixIcon:this.prefixIcon,suffixIcon:this.suffixIcon};return{state:[...$e("state",e)],default:$e("default",e)}[this.variant]}},components:{InputLabel:ce,InputWrapper:ve,InputError:ye,InputIcon:Pe}},Ie=Te,Oe=Object(u["a"])(Ie,te,ie,!1,null,null,null),Ae=Oe.exports,Ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex items-center"},[e.label?i("div",{staticClass:"mr-2"},[e.label?i("div",{staticClass:"mb-2 text-sm italic"},[e._v(e._s(e.label))]):e._e()]):e._e(),i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("div",{staticClass:"relative"},[e.prefixIcon?i("InputIcon",{attrs:{position:"before",icon:e.prefixIcon}}):e._e(),i("input",e._b({class:e.classes,attrs:{id:e.id,"data-cy-field":e.cypressName},on:{input:function(t){return e.$emit("input",t.target.value)}}},"input",e.filteredProps,!1)),e.suffixIcon?i("InputIcon",{attrs:{position:"after",icon:e.suffixIcon}}):e._e()],1),a[0]?i("InputError",[e._v(e._s(a[0]))]):e._e()]}}])})],1)},Ne=[],qe={name:"InlineTextInput",mixins:[ae],props:{label:{type:String},placeholder:{type:String},type:{type:String,default:"text"},validationName:{type:String},rules:{type:String},value:{type:String},id:{type:String},variant:{type:String,default:"default"},prefixIcon:{type:String},suffixIcon:{type:String},size:{type:String},cypressName:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.prefixIcon,suffixIcon:this.suffixIcon,size:this.size};return{state:[...$e("state",e)],default:$e("default",e),town:$e("town",e)}[this.variant]}},components:{InputError:ye,InputIcon:Pe}},De=qe,je=Object(u["a"])(De,Ee,Ne,!1,null,null,null),Me=je.exports,Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("InputWrapper",{attrs:{hasErrors:!!a.length}},[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("div",{staticClass:"relative"},[e.prefixIcon?i("InputIcon",{attrs:{position:"before",icon:e.prefixIcon}}):e._e(),i("textarea",e._b({class:e.classes,attrs:{id:e.id,"data-cy-field":e.cypressName},on:{input:function(t){return e.$emit("input",t.target.value)}}},"textarea",e.filteredProps,!1)),e._v(" "),e.suffixIcon?i("InputIcon",{attrs:{position:"after",icon:e.suffixIcon}}):e._e()],1),i("InputError",[e._v(e._s(a[0]))])],1)]}}])})},Fe=[],ze={name:"TextArea",mixins:[ae],props:{label:{type:String},info:{type:String},placeholder:{type:String},type:{type:String,default:"text"},value:{type:String},rules:{type:String},validationName:{type:String},id:{type:String},variant:{type:String,default:"default"},prefixIcon:{type:String},suffixIcon:{type:String},rows:{type:String},cols:{type:String},cypressName:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.prefixIcon,suffixIcon:this.suffixIcon};return{state:[...$e("state",e)],default:$e("default",e)}[this.variant]}},components:{InputLabel:ce,InputWrapper:ve,InputError:ye,InputIcon:Pe}},Re=ze,Be=Object(u["a"])(Re,Le,Fe,!1,null,null,null),Ve=Be.exports,Ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["checkbox-"+e.variant].concat(e.containerClasses)},["card"===e.variant||"townCard"===e.variant?i("CheckableCard",{attrs:{variant:e.variant,isChecked:e.isChecked,"data-cy-field":e.cypressName,"data-cy-label":e.label,"data-cy-checked":e.isChecked}},[i("input",e._b({staticClass:"appearance-none absolute invisible",attrs:{type:"checkbox"},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),i("div",[e._v(e._s(e.label))])]):i("label",{class:["inline-flex cursor-pointer",e.info?"items-start":"items-center"].concat(e.labelClasses)},[i("input",e._b({class:e.checkboxClasses,attrs:{type:"checkbox"},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),e._t("default",[i("div",{staticClass:"ml-2"},[i("div",{staticClass:"text-sm"},[e._v(e._s(e.label))]),e.info?i("div",{staticClass:"text-xs"},[e._v(e._s(e.info))]):e._e()])],{isChecked:e.isChecked})],2)],1)},He=[],Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{class:e.checkboxClasses},[e._t("default")],2)},We=[],Qe={props:{isChecked:{type:Boolean},variant:{type:String}},computed:{checkboxClasses(){return{card:["inline-flex cursor-pointer px-8 py-1 border border-transparent hover:border-blue600",this.isChecked?"bg-primary text-white":" bg-blue200 text-primary"]}[this.variant]}}},Je=Qe,Ye=Object(u["a"])(Je,Ge,We,!1,null,null,null),Ze=Ye.exports,Ke={name:"Checkbox",mixins:[ae],components:{CheckableCard:Ze},props:{checkValue:{type:[String,Boolean,Number]},label:{type:String},containerClasses:{type:[Array,String]},labelClasses:{type:[Array,String]},value:{type:Array},info:{type:String},variant:{type:String,default:"default"},cypressName:{type:String}},methods:{onChange(e){let t=[...this.value];e.target.checked?t.push(this.checkValue):t=t.filter(e=>e!==this.checkValue),this.$emit("input",t)}},computed:{isChecked(){return this.value&&this.value.includes(this.checkValue)},checkboxClasses(){return{classic:"form-checkbox h-5 w-5",invisible:"appearance-none absolute invisible",default:"checkbox-town-input"}[this.variant]}}},Xe=Ke,et=(i("edfe"),Object(u["a"])(Xe,Ue,He,!1,null,null,null)),tt=et.exports,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["radio-"+e.variant].concat(e.containerClasses)},["card"===e.variant||"townCard"===e.variant?i("CheckableCard",{attrs:{variant:e.variant,isChecked:e.isChecked,"data-cy-field":e.cypressName,"data-cy-label":e.label,"data-cy-checked":""+e.isChecked}},[i("input",e._b({staticClass:"appearance-none absolute invisible",attrs:{type:e.type},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),i("div",[e._v(e._s(e.label))])]):i("label",{class:["inline-flex cursor-pointer",e.info?"items-start":"items-center"].concat(e.labelClasses)},[i("input",e._b({class:e.radioClasses,attrs:{type:e.type,"data-cy-field":e.cypressName,"data-cy-label":e.label,"data-cy-checked":""+e.isChecked},domProps:{checked:e.isChecked},on:{change:e.onChange}},"input",e.filteredProps,!1)),e._t("default",[i("div",{staticClass:"ml-2"},[i("div",{staticClass:"text-sm"},[e._v(e._s(e.label))]),e.info?i("div",{staticClass:"text-xs"},[e._v(e._s(e.info))]):e._e()])],{isChecked:e.isChecked})],2)],1)},at=[],st={name:"Radio",mixins:[ae],components:{CheckableCard:Ze},props:{checkValue:{type:[String,Boolean,Number]},label:{type:String},containerClasses:{type:[Array,String]},labelClasses:{type:[Array,String]},value:{type:[String,Boolean,Number]},info:{type:String},variant:{type:String,default:"default"},cypressName:{type:String},type:{type:String,default:"radio"}},methods:{onChange(e){"checkbox"===this.type?this.$emit("input",e.target.checked?this.checkValue:null):this.$emit("input",this.checkValue)}},computed:{isChecked(){return this.value===this.checkValue},radioClasses(){return{classic:"form-checkbox h-5 w-5",invisible:"appearance-none absolute invisible",default:"radio-town-input"}[this.variant]}}},nt=st,ot=(i("93aa"),Object(u["a"])(nt,it,at,!1,null,null,null)),rt=ot.exports,lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("InputWrapper",{attrs:{hasErrors:!!a.length}},[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("div",{staticClass:"relative"},[i("InputIcon",{attrs:{position:"before",icon:e.icon}}),i("select",e._b({class:e.classes,attrs:{id:e.id},on:{change:function(t){return e.$emit("input",t.target.value)}}},"select",e.filteredProps,!1),[e._t("default")],2),i("InputIcon",{attrs:{position:"after",icon:"chevron-down"}})],1),i("InputError",[e._v(e._s(a[0]))])],1)]}}],null,!0)})},ct=[],ut={name:"Select",mixins:[ae],props:{label:{type:String},info:{type:String},error:{type:String},value:{type:String},validationName:{type:String},rules:{type:String},id:{type:String},variant:{type:String,default:"default"},icon:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.icon,suffixIcon:!0};return{state:["appearance-none",...$e("state",e)],default:["appearance-none",...$e("default",e)]}[this.variant]}},components:{InputWrapper:ve,InputLabel:ce,InputError:ye,InputIcon:Pe}},dt=ut,pt=Object(u["a"])(dt,lt,ct,!1,null,null,null),mt=pt.exports,ht=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("option",e._b({},"option",e.$props,!1),[e._t("default")],2)},vt=[],ft={name:"SelectOption",props:{}},gt=ft,bt=Object(u["a"])(gt,ht,vt,!1,null,null,null),_t=bt.exports,yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"shadow py-5 px-6"},[i("div",{staticClass:"text-primary text-display-lg pb-4 border-b-2"},[e._v(" "+e._s(e.title)+" ")]),i("div",{staticClass:"pt-4"},[e._t("default")],2)])},wt=[],Ct={props:{title:{type:String}}},kt=Ct,xt=Object(u["a"])(kt,yt,wt,!1,null,null,null),St=xt.exports,Pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-12"},[i("div",{staticClass:"font-bold mb-4"},[e._v(e._s(e.title))]),i("div",{staticClass:"text-sm mb-4"},[e._v(e._s(e.info))]),e._t("default")],2)},$t=[],Tt={props:{title:{type:String},info:{type:String}}},It=Tt,Ot=Object(u["a"])(It,Pt,$t,!1,null,null,null),At=Ot.exports,Et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"text-red text-md"},[e._v("*")])},Nt=[],qt={},Dt=Object(u["a"])(qt,Et,Nt,!1,null,null,null),jt=Dt.exports,Mt=i("22df"),Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g(e._b({class:["rounded-md bg-white shadow-xs min-w-48"].concat(e.classes),attrs:{role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu"}},"div",e.$attrs,!1),e.$listeners),[e._t("default")],2)},Ft=[],zt={props:{variant:String,default:()=>"default"},computed:{classes(){return{withoutPadding:"py-0",default:"py-1"}[this.variant]}}},Rt=zt,Bt=Object(u["a"])(Rt,Lt,Ft,!1,null,null,null),Vt=Bt.exports,Ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g(e._b({staticClass:"block px-4 py-2 text-md hover:bg-gray-100 cursor-pointer",attrs:{role:"menuitem"}},"div",e.$attrs,!1),e.$listeners),[e._t("default")],2)},Ht=[],Gt={},Wt=Object(u["a"])(Gt,Ut,Ht,!1,null,null,null),Qt=Wt.exports,Jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative"},[i("div",{on:{click:e.toggleMenu}},[e._t("button",null,{isOpen:e.isOpen})],2),i("div",{class:["origin-top-left-10 absolute z-10 left-0 mt-2 rounded-md shadow-lg transform transition ease-in-out duration-200",e.isOpen?"opacity-100":"opacity-0 hidden"]},[e._t("menu",null,{closeMenu:e.closeMenu})],2)])},Yt=[],Zt={data(){return{isOpen:!1}},methods:{checkOutsideClick(e){this.$el.contains(e.target)||this.closeMenu()},openMenu(){this.isOpen=!0},closeMenu(){this.isOpen=!1},toggleMenu(){this.isOpen=!this.isOpen}},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},0)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)}},Kt=Zt,Xt=Object(u["a"])(Kt,Jt,Yt,!1,null,null,null),ei=Xt.exports,ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("notifications",{staticClass:"fixed top-0 z-20 w-64",staticStyle:{width:"410px"},attrs:{group:"notifications",position:"top center"},scopedSlots:e._u([{key:"body",fn:function(t){return[i("div",{class:["text-white p-2 m-2","vue-notification",t.item.type],on:{click:t.close}},[i("div",{staticClass:"notification-icon"}),i("div",{staticClass:"text-white"},[i("div",{staticClass:"text-lg"},[e._v(e._s(t.item.title))]),i("div",{staticClass:"text-sm",domProps:{innerHTML:e._s(t.item.text)}})])])]}}])})},ii=[],ai=(i("efa2"),{}),si=Object(u["a"])(ai,ti,ii,!1,null,"7743ec3e",null),ni=si.exports,oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fixed z-40 inset-0 transform transition ease-in-out duration-300",e.isOpen?"opacity-100":"opacity-0 pointer-events-none"]},[i("div",{staticClass:"absolute w-full h-full bg-gray-500 opacity-75"}),i("div",{class:["flex items-center justify-center min-h-screen ",e.containerClasses]},[i("div",{ref:"dialog",staticClass:"opacity-100 z-50 shadow-xl overflow-hidden ",attrs:{role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"}},[i("div",{staticClass:"bg-white"},[e._t("header",[i("div",{staticClass:"pt-10 px-10 pb-4 "},[i("div",{staticClass:"flex justify-between border-b border-G400"},[i("div",{staticClass:"text-display-md text-primary"},[e._t("title")],2),i("Button",{attrs:{variant:"primaryText",icon:"times",size:"lg"},on:{click:e.closeModal}})],1)])]),i("div",{staticClass:"px-10 pt-6 pb-10"},[e._t("body")],2),e.$slots.footer?i("div",{staticClass:"px-4 pb-8 sm:px-6 flex justify-end"},[e._t("footer")],2):e._e()],2)])])])},ri=[],li={props:{closeModal:{type:Function},isOpen:{type:Boolean},closeClickOutside:{type:Boolean,default:!1},containerClasses:{type:Array}},methods:{checkOutsideClick(e){this.isOpen&&this.closeModal&&!this.$refs.dialog.contains(e.target)&&this.closeModal()}},mounted(){this.closeClickOutside&&document.addEventListener("click",this.checkOutsideClick)},destroyed(){this.closeClickOutside&&document.removeEventListener("click",this.checkOutsideClick)}},ci=li,ui=Object(u["a"])(ci,oi,ri,!1,null,null,null),di=ui.exports,pi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-G200 py-8 px-8 border-l-4 border-primary"},[i("div",{staticClass:"text-display-md mb-4"},[e._v(e._s(e.title))]),i("div",[e._t("default")],2)])},mi=[],hi={props:{title:{type:String}}},vi=hi,fi=Object(u["a"])(vi,pi,mi,!1,null,null,null),gi=fi.exports,bi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isOpen?i("div",{ref:"backdrop",staticClass:"fixed inset-0 bg-gray-500 opacity-75 z-backdrop",on:{click:e.clickBackdrop}}):e._e(),i("div",{class:["fixed z-sidePanel top-0 bottom-0 right-0 overflow-y-auto full-height transform transition ease-in-out duration-500",e.isOpen?"translate-x-0":"translate-x-full"]},[i("div",{class:["min-h-screen w-128 bg-white"]},[e._t("default")],2)])])},_i=[],yi={props:{closePanel:{type:Function},isOpen:{type:Boolean},closeClickOutside:{type:Boolean,default:!1}},methods:{clickBackdrop(){this.isOpen&&this.closeClickOutside&&this.closePanel()}}},wi=yi,Ci=(i("d694"),Object(u["a"])(wi,bi,_i,!1,null,null,null)),ki=Ci.exports,xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{ref:"provider",attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("InputWrapper",{attrs:{hasErrors:!!a.length}},[i("InputLabel",{attrs:{label:e.label,info:e.info}}),i("AutocompleteVue",{attrs:{search:e.search,"default-value":e.searchInput,placeholder:e.placeholder,"aria-label":e.placeholder,getResultValue:e.getResultValue,debounceTime:e.debounceTime},on:{submit:e.onItemSelect},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.rootProps,s=t.inputProps,n=t.inputListeners,o=t.resultListProps,r=t.resultListListeners,l=t.results,c=t.resultProps;return[i("div",e._b({},"div",a,!1),[i("div",{staticClass:"relative"},[e.prefixIcon?i("InputIcon",{staticClass:"text-primary pl-6",attrs:{position:"before",icon:e.prefixIcon}}):e._e(),"checkbox"===s.type?i("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",staticClass:"pl-12 pr-12",class:e.classes,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.searchInput)?e._i(e.searchInput,null)>-1:e.searchInput},on:{focus:e.handleFocus,blur:e.handleBlur,change:function(t){var i=e.searchInput,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);a.checked?o<0&&(e.searchInput=i.concat([n])):o>-1&&(e.searchInput=i.slice(0,o).concat(i.slice(o+1)))}else e.searchInput=s}}},"input",s,!1),n)):"radio"===s.type?i("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",staticClass:"pl-12 pr-12",class:e.classes,attrs:{type:"radio"},domProps:{checked:e._q(e.searchInput,null)},on:{focus:e.handleFocus,blur:e.handleBlur,change:function(t){e.searchInput=null}}},"input",s,!1),n)):i("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",staticClass:"pl-12 pr-12",class:e.classes,attrs:{type:s.type},domProps:{value:e.searchInput},on:{focus:e.handleFocus,blur:e.handleBlur,input:function(t){t.target.composing||(e.searchInput=t.target.value)}}},"input",s,!1),n)),i("InputIcon",{staticClass:"pr-6",attrs:{position:"after"}},[e.loading?i("Spinner"):e._e(),i("div",{staticClass:"cursor-pointer ",on:{click:e.removeItem}},[!e.loading&&e.value&&e.getResultValue(e.value)===e.searchInput?i("Icon",{staticClass:"text-primary text-display-sm",attrs:{icon:"times","data-cy-button":"clear"}}):e._e()],1)],1)],1),i("transition",{attrs:{name:"fade"}},[e.focused&&e.searchInput?i("div",{class:["origin-top-left-10 absolute z-10 left-0 mt-2 w-full rounded-md shadow-lg"]},[e._t("default",[l.length?i("Menu",e._g(e._b({},"Menu",o,!1),r),e._l(l,(function(t,a){return i("MenuItem",e._b({key:c[a].id,class:["cursor-pointer",c[a]["aria-selected"]&&"bg-gray-100"]},"MenuItem",c[a],!1),[i("div",[e._v(" "+e._s(e.getResultValue(t))+" ")])])})),1):i("Menu",[i("MenuItem",[e._v(" Aucun résultats ")])],1)],{results:l,resultListProps:o,resultListListeners:r,resultProps:c,getResultValue:e.getResultValue})],2):e._e()]),i("div",[e._t("extra",null,{removeItem:e.removeItem})],2)],1)]}}],null,!0)}),i("InputError",[e._v(e._s(a[0]))])],1)]}}])})},Si=[],Pi={components:{InputLabel:ce,InputWrapper:ve,InputError:ye,InputIcon:Pe},props:{loading:{type:Boolean},label:{type:String},info:{type:String},validationName:{type:String},rules:{type:String},id:{type:String},inputClasses:{type:Array,default:()=>[]},search:{type:Function,required:!0},defaultValue:{type:Object,required:!1},placeholder:{type:String},getResultValue:{type:Function,default:e=>e},debounceTime:{type:Number,default:0},variant:{type:String,default:"default"},prefixIcon:{type:String}},computed:{classes(){const e={error:this.error,prefixIcon:this.prefixIcon},t={state:[...$e("state",e)],default:$e("default",e)}[this.variant];return[...this.inputClasses,...t]}},data(){return{show:!0,focused:!1,value:this.defaultValue||{},searchInput:this.defaultValue?this.getResultValue(this.defaultValue):"",results:[]}},methods:{removeItem(){this.value="",this.searchInput="",this.$emit("submit",null),this.$refs.provider.syncValue(null),this.$refs.provider.validate()},onItemSelect(e){this.value=e,e&&(this.searchInput=this.getResultValue(e)),this.$emit("submit",e),this.$refs.provider.syncValue(e),this.$refs.provider.validate(),this.$refs.searchInput.blur()},handleFocus(){this.focused=!0},handleBlur(){this.value?this.searchInput=this.getResultValue(this.value):this.onItemSelect(null),this.focused=!1}}},$i=Pi,Ti=Object(u["a"])($i,xi,Si,!1,null,null,null),Ii=Ti.exports,Oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Icon",e._g(e._b({attrs:{icon:"spinner",spin:""}},"Icon",e.$attrs,!1),e.$listeners))},Ai=[],Ei={},Ni=Object(u["a"])(Ei,Oi,Ai,!1,null,null,null),qi=Ni.exports,Di=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("InputWrapper",{attrs:{withoutMargin:e.withoutMargin}},[i("InputLabel",{attrs:{label:e.label,info:e.info,id:e.id,showMandatoryStar:e.showMandatoryStar}}),i("div",{class:"flex flex-col relative"},[e.error?i("div",{staticClass:"absolute h-full bg-error leftBorder"}):e._e(),i("div",{class:["flex","vertical"===e.direction?"flex-col checkableGroup--verticalLayout":"flex-row flex-wrap checkableGroup--horizontalLayout"]},[e._t("default")],2)]),a[0]?i("InputError",[e._v(e._s(a[0]))]):e._e()],1)]}}],null,!0)})},ji=[],Mi={props:{label:{type:String},info:{type:String},error:{type:String},direction:{type:String,default:"vertical"},validationName:{type:String},rules:{type:String},id:{type:String},withoutMargin:{required:!1,type:Boolean,default:!1},showMandatoryStar:{required:!1,type:Boolean,default:!1}},components:{InputError:ye,InputLabel:ce,InputWrapper:ve}},Li=Mi,Fi=(i("cb4e"),i("8324"),Object(u["a"])(Li,Di,ji,!1,null,"fe57aba0",null)),zi=Fi.exports,Ri=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationProvider",{ref:"provider",attrs:{rules:e.rules,name:e.validationName||e.label,vid:e.id},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("InputWrapper",{attrs:{hasErrors:!!a.length}},[i("InputLabel",{attrs:{label:e.label,info:e.info,showMandatoryStar:e.showMandatoryStar,id:e.id}}),i("div",{staticClass:"relative"},[i("InputIcon",{staticClass:"z-10 text-G400",attrs:{position:"before",icon:"calendar"}}),i(e.dynamicComponent,e._g(e._b({ref:"datepicker",tag:"component",attrs:{"input-class":e.inputClasses,language:e.dateLanguage,"monday-first":!0,"data-cy-field":e.cypressName}},"component",e.$attrs,!1),e.$listeners)),e.$attrs.value?i("InputIcon",{staticClass:"text-primary text-display-sm cursor-pointer",attrs:{position:"after",icon:"times","data-cy-button":"clear"},nativeOn:{click:function(t){return e.clear(t)}}}):e._e()],1),i("InputError",[e._v(e._s(a[0]))])],1)]}}])})},Bi=[],Vi=i("2430"),Ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-1 text-xs"},[e._t("default")],2)},Hi=[],Gi={},Wi=Object(u["a"])(Gi,Ui,Hi,!1,null,null,null),Qi=Wi.exports,Ji={props:{label:{type:String},info:{type:String},id:{type:String},validationName:{type:String},variant:{type:String,default:"default"},rules:{type:String},cypressName:{type:String},showMandatoryStar:{required:!1,type:Boolean,default:!1}},components:{InputLabel:ce,InputWrapper:ve,InputError:ye,InputInfo:Qi,InputIcon:Pe},data(){return{dateLanguage:Vi["fr"],dynamicComponent:null}},mounted(){Promise.resolve().then(i.bind(null,"fa33")).then(e=>{this.dynamicComponent=e.default})},computed:{inputClasses(){const e={error:this.error,prefixIcon:"default"===this.variant};return{state:[...$e("state",e)],default:$e("default",e),town:$e("town",e)}[this.variant]}},methods:{clear(){this.$refs.datepicker.clearDate()}}},Yi=Ji,Zi=Object(u["a"])(Yi,Ri,Bi,!1,null,null,null),Ki=Zi.exports,Xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[e.color,"inline-flex text-sm px-4 py-1 flex-row items-center"]},[e._t("default"),e.onDelete?i("span",{staticClass:"ml-2 cursor-pointer",on:{click:e.onDelete}},[i("Icon",{attrs:{icon:"times"}})],1):e._e()],2)},ea=[],ta={props:{onDelete:{type:Function},color:{type:String,default:"bg-G200"}}},ia=ta,aa=Object(u["a"])(ia,Xi,ea,!1,null,null,null),sa=aa.exports,na=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-row items-center"},[i("Button",{staticClass:"hover:bg-G200 rounded-full px-4 py-1 mx-2 focus:outline-none ",attrs:{icon:"chevron-left",iconPosition:"left",variant:"custom",size:"custom"},on:{click:e.onPrevious}},[e._v("Précédent")]),e.currentPage>1?i("div",{staticClass:"h-8 w-8 hover:bg-G200 flex justify-center items-center rounded-full cursor-pointer",on:{click:function(){return e.onChangePage(1)}}},[e._v(" 1 ")]):e._e(),i("div",{class:["h-8 w-8 bg-primary text-white flex justify-center items-center rounded-full",1===e.currentPage?"":"ml-4",e.currentPage===e.nbPages?"":"mr-4"]},[e._v(" "+e._s(e.currentPage)+" ")]),e.currentPage!==e.nbPages?i("div",{staticClass:"h-8 w-8 hover:bg-G200 flex justify-center items-center rounded-full cursor-pointer",on:{click:function(){return e.onChangePage(e.nbPages)}}},[e._v(" "+e._s(e.nbPages)+" ")]):e._e(),i("Button",{staticClass:"hover:bg-G200  rounded-full px-4 py-1 mx-2  focus:outline-none",attrs:{icon:"chevron-right",iconPosition:"right",variant:"custom",size:"custom"},on:{click:e.onNext}},[e._v("Suivant")])],1)},oa=[],ra={props:{currentPage:{type:Number},nbPages:{type:Number},onChangePage:{type:Function}},methods:{onPrevious(){this.onChangePage(Math.max(1,this.currentPage-1))},onNext(){this.onChangePage(Math.min(this.currentPage+1,this.nbPages))}}},la=ra,ca=Object(u["a"])(la,na,oa,!1,null,null,null),ua=ca.exports,da=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"w-full h-full relative"},[i("Tooltip"),i("div",{ref:"container",staticClass:"w-full h-full",attrs:{id:"map"}})],1)},pa=[],ma=i("e11e"),ha=i.n(ma),va=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isVisible?i("div",[i("div",{staticClass:"absolute w-full h-full opacity-50 bg-black",staticStyle:{"z-index":"1001"}}),i("div",{staticClass:"absolute w-full",staticStyle:{"z-index":"1002"}},[i("div",{staticClass:"mx-auto mt-6 w-8/12 text-sm bg-white p-3"},[i("p",[e._v(" Si besoin, préciser la localisation en déplaçant le pointeur bleu sur la carte. ")]),i("p",{staticClass:"font-bold text-right cursor-pointer text-primary",on:{click:e.hide}},[e._v(" J'ai compris ")])]),i("div",{staticClass:"arrow mx-auto"})])]):e._e()},fa=[],ga={data(){return{isVisible:!0}},methods:{hide(){this.isVisible=!1}}},ba=ga,_a=(i("8974"),Object(u["a"])(ba,va,fa,!1,null,"afec8fd8",null)),ya=_a.exports;i("e5e0");const wa=[46.7755829,2.0497727];var Ca={components:{Tooltip:ya},props:{value:{type:Array,required:!1},zoom:{type:Number,required:!1,default:5}},data(){return{map:null,marker:null,clickTimeout:null}},computed:{coordinates(){if(null===this.marker)return;const{lat:e,lng:t}=this.marker.getLatLng();return[e,t]},view(){return{center:this.coordinates||wa,zoom:this.zoom}},mapLayers(){return{Satellite:ha.a.tileLayer.provider("Esri.WorldImagery"),Dessin:ha.a.tileLayer.provider("OpenStreetMap.Mapnik")}}},watch:{value(){this.syncMarker(),this.refreshView()}},mounted(){this.createMap(),this.syncMarker(),this.refreshView()},methods:{createMap(){this.map=ha.a.map("map",{layers:this.mapLayers.Dessin})},refreshView(e=!1){const{center:t,zoom:i}=this.view;this.map.setView(t,this.map&&this.map.getZoom()||i),!0===e&&this.$emit("input",this.coordinates)},syncMarker(){void 0===this.value?this.removeMarker():null===this.marker?this.createMarker():this.marker.setLatLng(this.value)},createMarker(){null!==this.marker&&void 0!==this.value||(this.marker=ha.a.marker(this.value,{draggable:!0}),this.map.addEventListener("click",e=>{clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(this.handleClick.bind(this,e),200)}),this.map.addEventListener("dblclick",()=>{clearTimeout(this.clickTimeout),this.clickTimeout=null}),this.marker.addEventListener("dragend",()=>{this.refreshView(!0)}),this.marker.addTo(this.map))},removeMarker(){null!==this.marker&&(this.marker.remove(),this.marker=null)},handleClick({latlng:{lat:e,lng:t}}){null!==this.marker&&(this.marker.setLatLng([e,t]),this.refreshView(!0),clearTimeout(this.clickTimeout),this.clickTimeout=null)}}},ka=Ca,xa=Object(u["a"])(ka,da,pa,!1,null,null,null),Sa=xa.exports,Pa=function(e){e.component("Button",ee),e.component("TextInput",Ae),e.component("InlineTextInput",Me),e.component("TextArea",Ve),e.component("Icon",Y),e.component("Menu",Vt),e.component("MenuItem",Qt),e.component("Checkbox",tt),e.component("Radio",rt),e.component("Select",mt),e.component("SelectOption",_t),e.component("FormGroup",St),e.component("MandatoryStar",jt),e.component("Dropdown",ei),e.component("Modal",di),e.component("SidePanel",ki),e.component("CheckableGroup",zi),e.component("InputGroup",At),e.component("FormParagraph",Mt["default"]),e.component("Callout",gi),e.component("Spinner",qi),e.component("AutocompleteV2",Ii),e.component("DatepickerV2",Ki),e.component("Tag",sa),e.component("Pagination",ua),e.component("MapV2",Sa),e.use(B.a),e.component("NotificationsGroup",ni),e.component("ValidationProvider",D["b"]),e.component("ValidationObserver",D["a"]),e.component("AutocompleteVue",q["a"]),Object(D["d"])({en:L,fr:M,bg:z,ro:F}),Object.keys(j).forEach(e=>{Object(D["c"])(e,{...j[e]})}),Object(D["d"])("fr")};const $a={debug:!1,enableLinkTracking:!0,requireConsent:!1,trackInitialView:!0,trackerFileName:"piwik"};function Ta(e){const t=new Promise((t,i)=>{const a=document.createElement("script");a.async=!0,a.defer=!0,a.src=e;const s=document.head||document.getElementsByTagName("head")[0];s.appendChild(a),a.onload=t,a.onerror=i});return t.catch(e=>{const t=`[vue-matomo] An error occurred trying to load ${e.target.src}. `;console.error(t)}),t}function Ia(e,t){const{host:i,siteId:a,trackerFileName:s,trackerUrl:n}=t,o=n||`${i}/${s}.php`,r=window.Piwik.getTracker(o,a);e.prototype.$piwik=r,e.prototype.$matomo=r,t.requireConsent&&r.requireConsent(),t.trackInitialView&&r.trackPageView(),t.enableLinkTracking&&r.enableLinkTracking(),t.router&&t.router.afterEach(e=>{const i=window.location;let{protocol:a}=i;":"!==a.slice(-1)&&(a+=":");const s="hash"===t.router.mode?"/#":"",n=`${a}//${i.host}${s}${e.fullPath}`;e.meta.analyticsIgnore||(t.debug&&console.debug("[vue-matomo] Tracking "+n),r.setCustomUrl(n),r.trackPageView())})}function Oa(e,t={}){const i={...$a,...t},{host:a,trackerFileName:s}=i,n=`${a}/${s}.js`;Ta(n).then(()=>Ia(e,i))}var Aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("PublicLayout",{attrs:{displayLanguagePicker:!0}},[a("PublicContainer",[a("div",{staticClass:"pt-4"},[a("div",{staticClass:"max-w-screen-lg mx-auto pb-20"},[a("LandingPageHero",{staticClass:"mt-20"}),a("LandingPageFirstSection")],1)])]),a("LandingPageBanner",{attrs:{cta:e.$t("landingPage.firstBanner.cta")}},[e._v(" "+e._s(e.$t("landingPage.firstBanner.text"))+" ")]),a("CreditWrapper",{attrs:{credit:"© Diego Inglez de Souza"}},[a("img",{staticClass:"h-128 w-full object-cover object-center",attrs:{src:i("dce0")}})]),a("PublicContainer",[a("div",{staticClass:"max-w-screen-lg mx-auto py-20"},[a("LandingPageSecondSection")],1)]),a("LandingPageBanner",{attrs:{cta:e.$t("landingPage.secondBanner.cta")}},[e._v(" "+e._s(e.$t("landingPage.secondBanner.text"))+" ")]),a("CreditWrapper",{attrs:{credit:"© Ville de Strasbourg"}},[a("img",{staticClass:"h-128 w-full object-cover object-top",attrs:{src:i("8503")}})]),a("PublicContainer",[a("div",{staticClass:"max-w-screen-lg mx-auto py-20"},[a("LandingPageThirdSection"),a("div",{staticClass:"text-center mt-40"},[a("h2",{staticClass:"text-display-lg text-secondary"},[e._v(" "+e._s(e.$t("landingPage.hero.subtitle"))+" ")]),a("LandingPageContactForm",{staticClass:"mx-auto"})],1)],1)]),a("CreditWrapper",{attrs:{credit:"© Ville de Strasbourg"}},[a("div",{staticClass:"grid grid-cols-3 w-full gap-0"},[a("img",{staticClass:"h-64 w-full object-cover object-top",attrs:{src:i("da0f")}}),a("img",{staticClass:"h-64 w-full object-cover object-top",attrs:{src:i("1676")}}),a("img",{staticClass:"h-64 w-full object-cover object-top",attrs:{src:i("8b2f")}})])])],1)},Ea=[],Na=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("NavBar",{attrs:{stickyHeader:e.stickyHeader,displayLanguagePicker:e.displayLanguagePicker}}),e._t("default"),i("PublicFooter")],2)},qa=[],Da=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{class:!e.sticky&&"hidden"},[i("NavBarSticky",{attrs:{menuDisplayed:e.menuDisplayed,toggleMenu:e.toggleMenu}})],1),i("div",{class:e.sticky&&"hidden"},[i("PublicContainer",[i("header",{staticClass:"py-4 flex flex-row justify-between items-center",attrs:{role:"navigation"}},[i("NavBarLogo"),i("div",{staticClass:"hidden md:flex flex-row"},[i("div",[i("router-link",{attrs:{to:"/connexion"}},[i("Button",{attrs:{variant:"primary"}},[e._v(e._s(e.$t("landingPage.header.connect")))])],1)],1),e.displayLanguagePicker?i("LanguagePicker",{staticClass:"ml-2"}):e._e()],1),i("NavBarMobileButton",{staticClass:"md:hidden",attrs:{onClick:e.toggleMenu}})],1)])],1),e.menuDisplayed?i("NavBarMobileMenu",{staticClass:"fixed top-0 right-0 mt-16 z-10",attrs:{closeMenu:e.closeMenu,displayLanguagePicker:e.displayLanguagePicker}}):e._e()],1)},ja=[],Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-link",{attrs:{to:"/landing"}},[a("div",{staticClass:"flex flex-row align-items"},[a("img",{staticClass:"marianne",attrs:{src:i("37bc"),alt:"france"}}),a("div",{staticClass:"ml-2 text-display-xs md:text-display-sm text-black"},[e._v(" Résorption-bidonvilles ")])])])],1)},La=[],Fa=(i("4316"),{}),za=Object(u["a"])(Fa,Ma,La,!1,null,"07ee7c4c",null),Ra=za.exports,Ba=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fixed z-10 top-0 left-0 w-full bg-white shadow"},[i("PublicContainer",[i("header",{staticClass:"py-4 flex flex-row justify-between items-center",attrs:{role:"navigation"}},[i("NavBarLogo"),i("div",{staticClass:"hidden md:block"},[i("router-link",{staticClass:"mr-2",attrs:{to:"/contact"}},[i("Button",{attrs:{variant:"secondary"}},[e._v(e._s(e.$t("landingPage.header.contact")))])],1),i("router-link",{attrs:{to:"/connexion"}},[i("Button",{attrs:{variant:"primary"}},[e._v(e._s(e.$t("landingPage.header.connect")))])],1)],1),i("NavBarMobileButton",{staticClass:"md:hidden",attrs:{onClick:e.toggleMenu}})],1)])],1)},Va=[],Ua=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"focus:outline-none",on:{click:e.onClick}},[i("svg",{staticClass:"block h-6 w-6",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"}},[i("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"}})])])},Ha=[],Ga={props:{onClick:{type:Function,required:!0}}},Wa=Ga,Qa=Object(u["a"])(Wa,Ua,Ha,!1,null,null,null),Ja=Qa.exports,Ya=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container px-10 mx-auto"},[e._t("default")],2)},Za=[],Ka={},Xa=Object(u["a"])(Ka,Ya,Za,!1,null,null,null),es=Xa.exports,ts={props:{menuDisplayed:{type:Boolean,required:!0},toggleMenu:{type:Function,required:!0}},components:{NavBarLogo:Ra,Button:ee,NavBarMobileButton:Ja,PublicContainer:es}},is=ts,as=Object(u["a"])(is,Ba,Va,!1,null,null,null),ss=as.exports,ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Dropdown",{scopedSlots:e._u([{key:"button",fn:function(){return[a("Button",{attrs:{variant:"primaryOutline",icon:"chevron-down"}},["fr"===e.$i18n.locale?a("img",{staticClass:"inline-block h-6",attrs:{src:i("3229")}}):e._e(),"en"===e.$i18n.locale?a("img",{staticClass:"inline-block h-6",attrs:{src:i("2361")}}):e._e(),"ro"===e.$i18n.locale?a("img",{staticClass:"inline-block h-6",attrs:{src:i("9d64")}}):e._e(),"bg"===e.$i18n.locale?a("img",{staticClass:"inline-block h-6",attrs:{src:i("ac65")}}):e._e(),e._v(" "+e._s(" ")+" "),a("span",{staticClass:"uppercase"},[e._v(e._s(e.$i18n.locale))])])]},proxy:!0},{key:"menu",fn:function(t){var s=t.closeMenu;return[a("Menu",{on:{click:s}},[a("MenuItem",{on:{click:function(t){return e.pickLang("fr")}}},[a("img",{staticClass:"inline-block h-6",attrs:{src:i("3229")}}),e._v(" FR ")]),a("MenuItem",{on:{click:function(t){return e.pickLang("en")}}},[a("img",{staticClass:"inline-block h-6",attrs:{src:i("2361")}}),e._v(" EN ")]),a("MenuItem",{on:{click:function(t){return e.pickLang("ro")}}},[a("img",{staticClass:"inline-block h-6",attrs:{src:i("9d64")}}),e._v(" RO ")]),a("MenuItem",{on:{click:function(t){return e.pickLang("bg")}}},[a("img",{staticClass:"inline-block h-6",attrs:{src:i("ac65")}}),e._v(" BG ")])],1)]}}])})},os=[],rs={methods:{pickLang(e){this.$i18n.locale=e,Object(D["d"])(e)}}},ls=rs,cs=Object(u["a"])(ls,ns,os,!1,null,null,null),us=cs.exports,ds=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"origin-top-right right-0 mt-2 w-48 rounded-md shadow-lg"},[i("Menu",[i("MenuItem",[i("router-link",{attrs:{to:"/connexion"}},[e._v(" "+e._s(e.$t("landingPage.header.connect"))+" ")])],1),i("MenuItem",[i("router-link",{attrs:{to:"/contact"}},[e._v(" "+e._s(e.$t("landingPage.header.contact"))+" ")])],1),i("MenuItem",[i("LanguagePicker")],1)],1)],1)},ps=[],ms={props:{closeMenu:{required:!0,type:Function},displayLanguagePicker:{type:Boolean}},components:{LanguagePicker:us,Menu:Vt,MenuItem:Qt},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},0)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){this.$el.contains(e.target)||this.closeMenu()}}},hs=ms,vs=Object(u["a"])(hs,ds,ps,!1,null,null,null),fs=vs.exports,gs={props:{stickyHeader:{type:Boolean},displayLanguagePicker:{type:Boolean,default:!1}},components:{NavBarLogo:Ra,NavBarSticky:ss,Button:ee,NavBarMobileMenu:fs,NavBarMobileButton:Ja,PublicContainer:es,LanguagePicker:us},data(){return{scrollTop:0,menuDisplayed:!1}},methods:{handleScroll(){const e=this.$el.offsetHeight;this.scrollTop=window.scrollY-e},openMenu(){this.menuDisplayed=!0},closeMenu(){this.menuDisplayed=!1},toggleMenu(){this.menuDisplayed=!this.menuDisplayed}},computed:{sticky(){return this.scrollTop>200&&this.stickyHeader}},mounted(){window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)}},bs=gs,_s=Object(u["a"])(bs,Da,ja,!1,null,null,null),ys=_s.exports,ws=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",{staticClass:"bg-black text-white py-8",attrs:{role:"contentinfo"}},[i("PublicContainer",[i("div",{staticClass:"max-w-screen-lg mx-auto"},[i("div",{staticClass:"md:flex flex-row justify-between"},[i("ul",[i("li",[i("font-awesome-icon",{attrs:{icon:"envelope"}})],1),i("li",[i("h4",[e._v(e._s(e.$t("footer.contact")))])]),i("li",[i("h4",[i("a",{staticClass:"underline",attrs:{href:"mailto:contact@resorption-bidonvilles.beta.gouv.fr"}},[e._v("contact@resorption-bidonvilles.beta.gouv.fr")])])])]),i("ul",[i("li",[i("router-link",{attrs:{to:"/statistiques-publiques"}},[e._v(e._s(e.$t("footer.statistics")))])],1),i("li",[i("router-link",{attrs:{to:"/mentions-legales"}},[e._v(e._s(e.$t("footer.legal")))])],1)])])])])],1)},Cs=[],ks={components:{PublicContainer:es}},xs=ks,Ss=Object(u["a"])(xs,ws,Cs,!1,null,null,null),Ps=Ss.exports,$s={props:{stickyHeader:{type:Boolean,default:!0},displayLanguagePicker:{type:Boolean,default:!1}},components:{NavBar:ys,PublicFooter:Ps}},Ts=$s,Is=Object(u["a"])(Ts,Na,qa,!1,null,null,null),Os=Is.exports,As=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-center"},[i("h1",{staticClass:"text-display-xl font"},[e._v(e._s(e.$t("landingPage.hero.title")))]),i("h2",{staticClass:"text-display-lg text-secondary mt-2"},[e._v(" "+e._s(e.$t("landingPage.hero.subtitle"))+" ")]),i("LandingPageContactForm",{staticClass:"mx-auto"})],1)},Es=[],Ns=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"flex flex-row justify-center mt-4 w-full max-w-md",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"hidden md:block border-2 border-G200 rounded-md flex-1 py-2 px-4 outline-none focus:border-G400",attrs:{placeholder:e.$t("landingPage.contactForm.email")},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),i("Button",{staticClass:"ml-1",attrs:{type:"submit",variant:"secondary"}},[e._v(e._s(e.$t("landingPage.contactForm.cta")))])],1)},qs=[],Ds={data(){return{email:""}},methods:{onSubmit(){this.$router.push("/contact"+(this.email?"?email="+encodeURIComponent(this.email):""))}}},js=Ds,Ms=Object(u["a"])(js,Ns,qs,!1,null,null,null),Ls=Ms.exports,Fs={components:{LandingPageContactForm:Ls}},zs=Fs,Rs=Object(u["a"])(zs,As,Es,!1,null,null,null),Bs=Rs.exports,Vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("img",{staticClass:"full-width mx-auto",attrs:{src:i("8973")}}),a("div",{staticClass:"max-w-screen-sm mx-auto mt-8"},[a("LandingPageResponsiveEmbed",[a("iframe",{attrs:{src:"https://www.youtube.com/embed/AAD0QoOzIHM?modestbranding=1&autohide=1&showinfo=0",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])],1),a("div",[a("div",{staticClass:"mt-24"},[a("div",{staticClass:"max-w-screen-sm mx-auto"},[a("div",{staticClass:"text-display-lg font-normal"},[e._v(" "+e._s(e.$t("landingPage.firstSection.context.title"))+" ")]),a("div",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.firstSection.context.subtitle"))+" ")]),a("div",{staticClass:"mt-4"},[e._v(" "+e._s(e.$t("landingPage.firstSection.context.text"))+" ")])])]),a("div",{staticClass:"md:grid md:grid-cols-3 gap-16 mt-16"},[a("LandingPageFeatureBlock",{attrs:{icon:"map-marked-alt"}},[e._v(e._s(e.$t("landingPage.firstSection.features.position")))]),a("LandingPageFeatureBlock",{staticClass:"my-8 md:my-0",attrs:{icon:"chart-line"}},[e._v(e._s(e.$t("landingPage.firstSection.features.actions")))]),a("LandingPageFeatureBlock",{attrs:{icon:"comments"}},[e._v(e._s(e.$t("landingPage.firstSection.features.exchange")))])],1),a("div",{staticClass:"md:flex md:flex-row mt-16"},[a("LandingPageContextImage",{attrs:{label:e.$t("landingPage.firstSection.before")}},["fr"===e.$i18n.locale?a("img",{attrs:{src:i("dd94")}}):e._e(),"en"===e.$i18n.locale?a("img",{attrs:{src:i("f20a")}}):e._e(),"bg"===e.$i18n.locale?a("img",{attrs:{src:i("7b7b")}}):e._e(),"ro"===e.$i18n.locale?a("img",{attrs:{src:i("a8ac")}}):e._e()]),a("div",{staticClass:"hidden md:block border-solid border-r-2 border-gray-200 m-20"}),a("LandingPageContextImage",{attrs:{label:e.$t("landingPage.firstSection.after")}},["fr"===e.$i18n.locale?a("img",{attrs:{src:i("cbe6")}}):e._e(),"en"===e.$i18n.locale?a("img",{attrs:{src:i("9aab")}}):e._e(),"bg"===e.$i18n.locale?a("img",{attrs:{src:i("e2e4")}}):e._e(),"ro"===e.$i18n.locale?a("img",{attrs:{src:i("64d6")}}):e._e()])],1),a("LandingPageUserFeedback",{staticClass:"mt-32"})],1)])},Us=[],Hs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("font-awesome-icon",{attrs:{icon:e.icon,size:"3x"}}),i("h3",{staticClass:"text-display-lg font-normal mt-2"},[e._t("default")],2)],1)},Gs=[],Ws={name:"LandingPageFeatureBlock",props:{icon:{type:String,required:!0}}},Qs=Ws,Js=Object(u["a"])(Qs,Hs,Gs,!1,null,null,null),Ys=Js.exports,Zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-secondary text-display-md"},[e._v(e._s(e.label))]),e._t("default")],2)},Ks=[],Xs={props:{label:{type:String,required:!0}}},en=Xs,tn=Object(u["a"])(en,Zs,Ks,!1,null,null,null),an=tn.exports,sn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"max-w-screen-sm mx-auto relative mt-16"},[i("LandingPageUserFeedbackSection",{attrs:{active:1===e.active,text:e.$t("landingPage.firstSection.feedback.1.text"),author:e.$t("landingPage.firstSection.feedback.1.author")}}),i("LandingPageUserFeedbackSection",{attrs:{active:2===e.active,text:e.$t("landingPage.firstSection.feedback.2.text"),author:e.$t("landingPage.firstSection.feedback.2.author")}}),i("LandingPageUserFeedbackSection",{attrs:{active:3===e.active,text:e.$t("landingPage.firstSection.feedback.3.text"),author:e.$t("landingPage.firstSection.feedback.3.author")}})],1),i("div",{staticClass:"mt-2 text-center"},[i("LandingPageUserFeedbackBullet",{attrs:{onClick:function(){return e.setSection(1)},active:1===e.active}}),i("LandingPageUserFeedbackBullet",{attrs:{onClick:function(){return e.setSection(2)},active:2===e.active}}),i("LandingPageUserFeedbackBullet",{attrs:{onClick:function(){return e.setSection(3)},active:3===e.active}})],1)])},nn=[],on=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("input",{class:["appearance-none h-3 w-3 mx-1 cursor-pointer rounded-full border border-black outline-none",e.active&&"bg-black border-transparent"],attrs:{type:"radio"},domProps:{checked:e.active},on:{click:e.onClick}})},rn=[],ln={props:{active:{type:Boolean},onClick:{type:Function}}},cn=ln,un=Object(u["a"])(cn,on,rn,!1,null,null,null),dn=un.exports,pn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.active?"transition duration-500 block opacity-100 visible":"invisible opacity-0 absolute"},[i("div",{staticClass:"relative text-xl feedbackText"},[e._v(e._s(e.text))]),i("div",{staticClass:"text-lg font-light"},[e._v(e._s(e.author))])])},mn=[],hn={props:{text:{type:String},author:{type:String},active:{type:Boolean}}},vn=hn,fn=(i("1210"),Object(u["a"])(vn,pn,mn,!1,null,"a695c1c4",null)),gn=fn.exports,bn={data(){return{active:1,interval:null}},methods:{setNextSection(){1===this.active?this.active=2:2===this.active?this.active=3:3===this.active&&(this.active=1)},setSection(e){this.active=e,clearInterval(this.interval),this.interval=setInterval(this.setNextSection,8e3)}},mounted(){this.interval=setInterval(this.setNextSection,8e3)},beforeDestroy(){clearInterval(this.interval)},components:{LandingPageUserFeedbackBullet:dn,LandingPageUserFeedbackSection:gn}},_n=bn,yn=Object(u["a"])(_n,sn,nn,!1,null,null,null),wn=yn.exports,Cn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper",style:e.paddingStyle},[e._t("default")],2)},kn=[],xn={props:{videoRatio:{type:String,default:"56.25%"}},computed:{paddingStyle(){return"padding-bottom: "+this.videoRatio}}},Sn=xn,Pn=(i("379b"),Object(u["a"])(Sn,Cn,kn,!1,null,null,null)),$n=Pn.exports,Tn={components:{LandingPageContextImage:an,LandingPageFeatureBlock:Ys,LandingPageUserFeedback:wn,LandingPageResponsiveEmbed:$n}},In=Tn,On=Object(u["a"])(In,Vs,Us,!1,null,null,null),An=On.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"md:grid md:grid-cols-3 md:gap-16"},[a("LandingPageDataBlock",{attrs:{line1:e.$t("landingPage.secondSection.data.1.line1"),line2:e.$t("landingPage.secondSection.data.1.line2"),line3:e.$t("landingPage.secondSection.data.1.line3")}}),a("LandingPageDataBlock",{staticClass:"my-4 md:my-0",attrs:{line1:e.$t("landingPage.secondSection.data.2.line1"),line2:e.$t("landingPage.secondSection.data.2.line2"),line3:e.$t("landingPage.secondSection.data.2.line3")}}),a("LandingPageDataBlock",{attrs:{line1:e.$t("landingPage.secondSection.data.3.line1"),line2:e.$t("landingPage.secondSection.data.3.line2"),line3:e.$t("landingPage.secondSection.data.3.line3")}})],1),a("div",{staticClass:"max-w-screen-sm mx-auto "},[a("h2",{staticClass:"mt-16"},[a("span",{staticClass:"text-display-lg font-normal"},[e._v(e._s(e.$t("landingPage.secondSection.title")))]),a("span",{staticClass:"text-display-lg block"},[e._v(e._s(e.$t("landingPage.secondSection.subtitle")))])]),a("div",{staticClass:"mt-8"},[e._v(" "+e._s(e.$t("landingPage.secondSection.firstParagraph"))+" ")]),a("div",{staticClass:"mt-8"},[a("span",{staticClass:"font-bold"},[e._v(e._s(e.$t("landingPage.secondSection.secondParagraph.bold")))]),e._v(" "+e._s(e.$t("landingPage.secondSection.secondParagraph.normal"))+" ")]),a("div",[a("a",{staticClass:"link",attrs:{href:"https://www.ecologie.gouv.fr/resorption-des-campements-illicites-et-des-bidonvilles"}},[e._v(e._s(e.$t("landingPage.secondSection.secondParagraph.link")))])]),"fr"===e.$i18n.locale?a("img",{staticClass:"mt-20 w-full",attrs:{src:i("d67e")}}):e._e(),"en"===e.$i18n.locale?a("img",{staticClass:"mt-20 w-full",attrs:{src:i("1239")}}):e._e(),"bg"===e.$i18n.locale?a("img",{staticClass:"mt-20 w-full",attrs:{src:i("5549")}}):e._e(),"ro"===e.$i18n.locale?a("img",{staticClass:"mt-20 w-full",attrs:{src:i("cfd5")}}):e._e()]),a("div",{staticClass:"mt-20 md:flex md:flex-row items-center"},[a("div",{staticClass:"block md:hidden mb-4 text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.secondSection.video.text"))+" ")]),a("div",{staticClass:"md:w-1/2 md:mr-16 bg-gray-500"},[a("LandingPageResponsiveEmbed",[a("iframe",{attrs:{src:"https://www.dailymotion.com/embed/video/x7mf87e",allowfullscreen:"",allow:"autoplay; fullscreen"}})])],1),a("div",{staticClass:"hidden md:blockw-1/2 text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.secondSection.video.text"))+" ")])])])},Nn=[],qn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-md"},[e._v(e._s(e.line1))]),i("div",{staticClass:"text-display-xl leading-none"},[e._v(e._s(e.line2))]),i("div",{staticClass:"text-md"},[e._v(e._s(e.line3))])])},Dn=[],jn={name:"LandingPageDataBlock",props:{line1:{type:String,required:!0},line2:{type:String,required:!0},line3:{type:String,required:!0}}},Mn=jn,Ln=Object(u["a"])(Mn,qn,Dn,!1,null,null,null),Fn=Ln.exports,zn={components:{LandingPageDataBlock:Fn,LandingPageResponsiveEmbed:$n}},Rn=zn,Bn=Object(u["a"])(Rn,En,Nn,!1,null,null,null),Vn=Bn.exports,Un=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"max-w-screen-sm mx-auto"},[i("h2",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.title"))+" ")]),i("div",{staticClass:" mt-8"},[i("span",{staticClass:"font-bold"},[e._v(e._s(e.$t("landingPage.thirdSection.firstParagraph.bold")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.firstParagraph.normal"))+" ")]),e._m(0),i("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-y-8 md:gap-x-16"},[i("LandingPageBilanBlock",{attrs:{icon:"users",text:e.$t("landingPage.thirdSection.bilan.1.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"hand-holding-medical",text:e.$t("landingPage.thirdSection.bilan.3.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"map-marker-alt",text:e.$t("landingPage.thirdSection.bilan.4.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"file-signature",text:e.$t("landingPage.thirdSection.bilan.6.text")}}),i("LandingPageBilanBlock",{attrs:{icon:"book",text:e.$t("landingPage.thirdSection.bilan.5.text"),info:e.$t("landingPage.thirdSection.bilan.5.info")}})],1),i("div",{staticClass:"text-center mt-8"},[i("a",{attrs:{href:"https://www.gouvernement.fr/sites/default/files/contenu/piece-jointe/2019/09/bilan_campements_2018_vecran.pdf"}},[i("Button",{attrs:{variant:"secondary"}},[e._v(" "+e._s(e.$t("landingPage.thirdSection.cta"))+" ")])],1)])]),i("div",{staticClass:"mt-32"},[i("div",{staticClass:"max-w-screen-sm mx-auto"},[i("h2",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.title"))+" ")]),i("div",{staticClass:"mt-4"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text1"))+" "),i("a",{staticClass:"link",attrs:{href:"https://www.ecologie.gouv.fr/resorption-des-campements-illicites-et-des-bidonvilles"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.body.link1")))]),e._v(", "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text2"))+". "),i("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text3"))+" ")]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.body.text4"))+" "),i("a",{staticClass:"link",attrs:{href:"https://beta.gouv.fr/startups/resorption-bidonvilles.html"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.body.link2"))+".")])]),i("div",{staticClass:"mt-8"},[i("div",[e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.title"))+" ")]),i("ul",{staticClass:"list-disc ml-8"},[i("li",[i("a",{staticClass:"link",attrs:{href:"https://entrepreneur-interet-general.etalab.gouv.fr/defis/2019/resorption-bidonvilles.html"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.1.link")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.1.text"))+" ")]),i("li",[i("a",{staticClass:"link",attrs:{href:"https://ec.europa.eu/info/funding-tenders/opportunities/portal/screen/how-to-participate/org-details/999999999/project/881989/program/31076817/details"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.2.link")))]),e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.2.text"))+" ")]),i("li",[i("a",{staticClass:"link",attrs:{href:"https://beta.gouv.fr/approche/fast/03-fast.html"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.3.link")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.3.text"))+" ")]),i("li",[i("a",{staticClass:"link",attrs:{href:"https://www.modernisation.gouv.fr/action-publique-2022/fonds-pour-la-transformation-de-laction-publique/ftap-112-millions-deuros-pour-les-19-projets-laureats"}},[e._v(e._s(e.$t("landingPage.thirdSection.secondParagraph.items.4.link")))]),e._v(" "+e._s(e.$t("landingPage.thirdSection.secondParagraph.items.4.text"))+" ")])])]),e._m(1),e._m(2)])])])},Hn=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-row items-center my-8"},[i("div",{staticClass:"bg-gray-500 h-px flex-1"}),i("div",{staticClass:"inline-block bg-black text-white text-display-md px-4"},[e._v(" 2019 ")]),i("div",{staticClass:"bg-gray-500 h-px flex-1"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-row flex-wrap items-center justify-between mt-8"},[a("a",{attrs:{href:"https://solidarites-sante.gouv.fr/"}},[a("img",{staticClass:"h-24 m-2",attrs:{src:i("6ead")}})]),a("a",{attrs:{href:"https://ec.europa.eu/info/index_en"}},[a("img",{staticClass:"h-24 my-2",attrs:{src:i("e61f")}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-row flex-wrap items-center justify-between mt-8"},[a("a",{attrs:{href:"https://beta.gouv.fr/approche/incubateurs/mtes.html"}},[a("img",{staticClass:"h-24 m-2",attrs:{src:i("0f88")}})]),a("a",{attrs:{href:"https://beta.gouv.fr/"}},[a("img",{staticClass:"h-20 m-2",attrs:{src:i("3b8a")}})]),a("a",{attrs:{href:"https://entrepreneur-interet-general.etalab.gouv.fr/defis/2019/resorption-bidonvilles.html"}},[a("img",{staticClass:"h-16 m-2",attrs:{src:i("77c5")}})])])}],Gn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-row"},[i("div",[i("font-awesome-icon",{staticClass:"text-secondary",attrs:{icon:e.icon,size:"2x"}})],1),i("div",{staticClass:"ml-2"},[i("span",{staticClass:"font-bold text-display-md"},[e._v(e._s(e.text))]),i("span",[e._v(e._s(e.info))])])])},Wn=[],Qn={name:"LandingPageBilanBlock",props:{icon:{required:!0},text:{type:String,required:!0},info:{type:String}}},Jn=Qn,Yn=Object(u["a"])(Jn,Gn,Wn,!1,null,null,null),Zn=Yn.exports,Kn={components:{LandingPageBilanBlock:Zn,Button:ee}},Xn=Kn,eo=Object(u["a"])(Xn,Un,Hn,!1,null,null,null),to=eo.exports,io=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-corail text-white full-width text-center py-8"},[i("PublicContainer",[i("div",{staticClass:"max-w-screen-md mx-auto"},[i("h2",{staticClass:"text-display-lg text-white "},[e._t("default")],2),i("div",{staticClass:"pt-4"},[i("router-link",{attrs:{to:"/contact"}},[i("Button",{attrs:{variant:"primary"}},[e._v(e._s(e.cta))])],1)],1)])])],1)},ao=[],so={components:{Button:ee,PublicContainer:es},props:{cta:{type:String,required:!0}}},no=so,oo=Object(u["a"])(no,io,ao,!1,null,null,null),ro=oo.exports,lo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative"},[e._t("default"),i("div",{staticClass:"absolute bottom-0 right-0 mr-4 text-white"},[e._v(" "+e._s(e.credit)+" ")])],2)},co=[],uo={props:{credit:{type:String}}},po=uo,mo=Object(u["a"])(po,lo,co,!1,null,null,null),ho=mo.exports,vo={components:{CreditWrapper:ho,PublicContainer:es,PublicLayout:Os,LandingPageHero:Bs,LandingPageFirstSection:An,LandingPageSecondSection:Vn,LandingPageThirdSection:to,LandingPageBanner:ro,LandingPageContactForm:Ls}},fo=vo,go=Object(u["a"])(fo,Aa,Ea,!1,null,null,null),bo=go.exports,_o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("Form",e._b({on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1)])},yo=[],wo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{attrs:{role:"navigation"}},[i("div",{staticClass:"topbar"},[i("div",{staticClass:"topbar-container"},[i("router-link",{staticClass:"topbar-home",attrs:{to:"/landing"}},[i("img",{staticClass:"topbar-marianne",attrs:{src:"/img/logo-marianne.svg",alt:"france"}}),i("span",{staticClass:"topbar-domain"},[e._v("resorption-bidonvilles.")]),i("img",{staticClass:"topbar-betagouv",attrs:{src:"/img/betagouvfr.svg",alt:"beta.gouv.fr"}})]),i("span",{ref:"menu",staticClass:"topbar-menu",on:{click:e.showSidebar}},[e._v("Menu")]),i("ul",{staticClass:"nav__links"},e._l(e.items,(function(t){return i("li",{key:t.target,staticClass:"nav__item"},[t.items?i("div",{staticClass:"dropdown"},[e._v(e._s(t.label)+" "),i("div",{staticClass:"dropdown-content"},e._l(t.items,(function(t){return i("router-link",{key:t.target,class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])})),1)]):i("router-link",{class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])],1)})),0)],1)]),i("div",{ref:"sidebar",staticClass:"sidebar",class:{opened:e.isSidebarOpened}},[i("div",{staticClass:"sidebar-cross",on:{click:e.hideSidebar}},[i("img",{attrs:{src:"/img/cross.svg",alt:"Fermer"}})]),i("ul",{staticClass:"nav__links"},e._l(e.items,(function(t){return i("li",{key:t.target,staticClass:"nav__item"},[t.items?i("div",{staticClass:"dropdown"},[e._v(e._s(t.label)+" "),i("div",{staticClass:"dropdown-content"},e._l(t.items,(function(t){return i("router-link",{key:t.target,class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])})),1)]):i("router-link",{class:Object.assign(t.classes||{},t.group?{active:e.isCurrentRouteAMemberOf(t.group)}:{}),attrs:{to:t.target}},[e._v(e._s(t.label))])],1)})),0)])])},Co=[];let ko=null;function xo(e){null===ko||ko.closed?ko=window.open(e,"_blank"):(ko.location=e,ko.location.reload(),ko.focus())}var So=i("227c");const Po={MISSING_TOKEN:1,EXPIRED_OR_INVALID_TOKEN:2};function $o(e,t){let i=null;try{i=this.responseText?JSON.parse(this.responseText):this.responseText}catch(s){return void t({user_message:"Une erreur inconnue est survenue",developer_message:"Failed to parsed the server's response"})}if(!0!==i.success||void 0===i.response)if(this.status/200<1||this.status/200>=1.5){const e=i&&i.error||i||{};switch(e.code){case Po.MISSING_TOKEN:case Po.EXPIRED_OR_INVALID_TOKEN:Qo(a["default"].prototype.$piwik),y$.push("/");break;default:t(e.user_message?e:{user_message:"Une erreur inconnue est survenue",developer_message:"The server responded with an error status but did not provide error details"})}}else e(i);else e(i.response)}function To(e){e()}function Io(e,t,i,a={}){const s=new XMLHttpRequest,n=new Promise((n,o)=>{if(s.open(e,"https://api.preprod.resorption-bidonvilles.beta.gouv.fr"+t),Object.keys(a).forEach(e=>{s.setRequestHeader(e,a[e])}),!Object.prototype.hasOwnProperty.call(a,"x-access-token")){const e=Zo();null!==e&&s.setRequestHeader("x-access-token",e)}s.setRequestHeader("x-app-version",So),s.onload=$o.bind(s,n,o),s.onerror=To.bind(s,o),s.ontimeout=To.bind(s,o),void 0!==i?(Object.prototype.hasOwnProperty.call(a,"Content-Type")||s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(i))):s.send()});return n.abort=()=>{s.abort()},n}function Oo(e,t,i){return Io("GET",e,t,i)}function Ao(e,t,i){return Io("POST",e,t,i)}function Eo(e,t,i){return Io("DELETE",e,t,i)}function No(e,t,i){return Io("PATCH",e,t,i)}function qo(e,t,i){return Io("PUT",e,t,i)}function Do(e){return xo(`${e}${-1===e.indexOf("?")?"?":"&"}accessToken=${encodeURIComponent(Zo())}`)}let jo=null;function Mo(){return null!==jo}function Lo(){return Oo("/config").then(e=>(Wo(),jo=e,e))}function Fo(){jo=null}function zo(){return jo}function Ro(e,t){if(null===jo)return;const i=e.split(".");let a=jo;while(i.length>1){if(void 0===a)return;a=a[i.shift()]}a[i[0]]=t}function Bo(e){if(null===jo||null===jo.user)return null;const[t,i]=e.split(".");if(!Object.prototype.hasOwnProperty.call(jo.user.permissions,t)||!Object.prototype.hasOwnProperty.call(jo.user.permissions[t],i))return null;const a=jo.user.permissions[t][i];return!0!==a.allowed?null:a}function Vo(e){const[t,i,a]=e.split("."),s=Bo(`${t}.${i}`);return null!==s&&(void 0===a||!0===s[a])}function Uo(e){return Ao("/changelog",{version:e})}function Ho(){return null!==jo&&jo.user.charte_engagement_a_jour}function Go(e,t){return Ao("/signin",{email:e,password:t}).then(e=>(localStorage.setItem("token",e.token),e))}function Wo(){return Oo("/refreshToken").then(e=>{localStorage.setItem("token",e.token)})}function Qo(e){Fo(),localStorage.removeItem("token"),e&&(e.resetUserId(),e.setCustomVariable(1,"superuser",null),e.setCustomVariable(2,"structure",null),e.setCustomVariable(3,"niveau_geo",null),e.setCustomVariable(4,"geo_nom",null))}function Jo(){return null!==localStorage.getItem("token")}function Yo(){return!0===localStorage.getItem("logged_once")}function Zo(){return localStorage.getItem("token")}function Ko(e){return Ao("/users",e)}function Xo(){return Oo("/me")}function er(e){return Ao("/me",e)}function tr(){return Oo("/users")}function ir(e){return Oo("/users/"+e)}function ar(e,t){return Ao(`/users/${e}/sendActivationLink`,t)}function sr(e){return Ao(`/users/${e}/denyAccess`)}function nr(e){return Oo(`/activation-tokens/${encodeURIComponent(e)}/check`)}function or(e){return Oo(`/password-tokens/${encodeURIComponent(e)}/check`)}function rr(e,t){return Ao(`/users/${e}/activate`,t)}function lr(e,t){return Ao(`/users/${e}/newPassword`,t)}function cr(e,t){return Ao(`/users/${e}/upgrade`,t)}function ur(e){return Eo("/users/"+e)}function dr(e){return Ao("/users/new-password",{email:e})}function pr(){return Oo("/directory")}function mr(e){return Oo("/organizations/search?query="+encodeURIComponent(e))}function hr(e,t){return qo(`/users/${e}/charte_engagement`,{version_de_charte:t})}var vr={anonymous:[{label:"Connexion",target:"/connexion"},{label:"Demander un accès",target:"/contact"},{label:"Aide",items:[{label:"Nous contacter",target:"/feedback"},{label:"Mentions légales",target:"/mentions-legales"},{label:"CGUs",target:"/conditions-d-utilisation"}]}],loading:[{label:"Aide",items:[{label:"Nous contacter",target:"/feedback"},{label:"Mentions légales",target:"/mentions-legales"},{label:"CGUs",target:"/conditions-d-utilisation"}]},{label:"Déconnexion",target:"/deconnexion"}],loaded:[{label:"Covid-19",target:"/covid-19",classes:{"router-link--covid":!0}},{label:"Sites",items:[{label:"Liste des sites",target:"/liste-des-sites",group:"townList"},{label:"Déclarer un site",target:"/nouveau-site",group:"townCreation"}]},{label:"Dispositifs",items:[{label:"Liste des dispositifs",target:"/liste-des-dispositifs"},{label:"Déclarer un dispositif",target:"/nouveau-dispositif"}]},{label:"Annuaire",target:"/annuaire",group:"directory"},{label:"Administration",items:[{label:"Liste des utilisateurs",target:"/liste-des-utilisateurs",group:"users"},{label:"Créer un utilisateur",target:"/nouvel-utilisateur",group:"userCreation"},{label:"Statistiques",target:"/statistiques",group:"stats"},{label:"Historique des activités",target:"/historique-des-activites",group:"admin"}]},{label:"Mon compte",items:[{label:"Gérer mon compte",target:"/mon-compte",group:"me"},{label:"Déconnexion",target:"/deconnexion"}]},{label:"Aide",items:[{label:"Nous contacter",target:"/feedback"},{label:"Mentions légales",target:"/mentions-legales"},{label:"CGUs",target:"/conditions-d-utilisation"}]}]},fr={data(){return{isSidebarOpened:!1}},computed:{items(){return!0!==Jo()?vr.anonymous:!0!==Mo()||!0!==Ho()?vr.loading:this.filterItems(vr.loaded)}},methods:{filterItems(e){return e.map(e=>e.items?Object.assign(e,{items:e.items.filter(e=>this.isItemAllowed(e))}):e).filter(e=>e.items?e.items.length>0:this.isItemAllowed(e))},isItemAllowed(e){const t=this.$router.resolve({path:e.target}).route.meta.permissions;return!t||t.every(e=>Vo(e))},isCurrentRouteAMemberOf(e){return this.$route.matched.some(t=>t.meta.group===e)},showSidebar(){this.isSidebarOpened=!0},hideSidebar(){this.isSidebarOpened=!1},checkClickOutsideSidebar(e){this.$refs.sidebar.contains(e.target)||e.target===this.$refs.menu||this.hideSidebar()}},mounted(){document.addEventListener("click",this.checkClickOutsideSidebar)},destroyed(){document.removeEventListener("click",this.checkClickOutsideSidebar)}},gr=fr,br=gr,_r=(i("17d9"),Object(u["a"])(br,wo,Co,!1,null,"b24b83de",null)),yr=_r.exports,wr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form",attrs:{id:"top"}},[i("header",{staticClass:"form-header"},[i("div",{staticClass:"container"},[i("h1",{staticClass:"form-title"},[e._v(e._s(e.title||"Formulaire"))])])]),i("div",{staticClass:"container"},[i("div",{staticClass:"form-body"},[i("div",{staticClass:"container"},[e.description?i("SlideNote",{attrs:{title:e.descriptionTitle,content:e.description}}):e._e(),e._l(e.fullSections,(function(t){return i("section",{staticClass:"formSection"},[i("header",{staticClass:"formSection-header"},[t.title?i("h1",{staticClass:"formSection-title"},[i("span",{staticClass:"formSection-icon"},[i("font-awesome-icon",{attrs:{icon:t.icon||"flag"}})],1),e._v(" "+e._s(t.title)+" ")]):e._e(),t.description?i("p",{staticClass:"formSection-description",domProps:{innerHTML:e._s(t.description)}}):e._e()]),i("div",[i("span",{staticStyle:{display:"none"}},[e._v(e._s(e.refreshId))]),e._l(t.inputs,(function(t,a){return e.isInputVisible(t)?i("Input",e._b({key:a,attrs:{id:a,errors:e.errors&&e.errors.fields&&e.errors.fields[a]||void 0,disabled:e.isInputDisabled(t),alertMessage:e.getInputAlert(t)},on:{change:e.onDataChange},model:{value:e.data[a],callback:function(t){e.$set(e.data,a,t)},expression:"data[inputId]"}},"Input",t,!1)):e._e()}))],2)])})),e.errors&&e.errors.main?i("div",{staticClass:"notification error"},[i("span",[e._v(e._s(e.wording.error+" : "+e.errors.main))]),e.numberOfFilteredErrors>0?i("p",[e._v("Les champs en erreur sont : "),i("ul",e._l(e.filteredErrors,(function(t,a){return i("li",[i("a",{on:{click:function(t){e.$router.replace("#top",(function(){return e.$router.replace("#"+a)}))}}},[e._v(e._s((e.getInputById(a)||{}).label||"inconnu"))])])})),0)]):e._e()]):e._e(),i("section",{staticClass:"form-stepNav"},[e.submitPrefix?i("p",{domProps:{innerHTML:e._s(e.submitPrefix)}}):e._e(),i("button",{staticClass:"form-stepButton button",attrs:{"data-cy-button":"submit",disabled:e.pending},on:{click:e.submit}},[e.pending?i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}}):i("span",[e._v(e._s(e.wording.submit))])])])],2)])])])},Cr=[],kr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form__group inputContainer",class:{error:e.errors.length>0},attrs:{id:e.id}},[i("label",{staticClass:"input-label"},[e._v(e._s(e.label)),e.mandatory?i("sup",{staticClass:"input-mandatory"},[e._v(" (*)")]):e._e()]),e.alertMessage?i("p",{staticClass:"notification warning"},[e._v(e._s(e.alertMessage))]):i("div",[e.description?i("p",{staticClass:"input-description",domProps:{innerHTML:e._s(e.description)}}):e._e(),e.errors.length>0?i("div",{staticClass:"notification error"},e._l(e.errors,(function(t){return i("ul",[i("li",[e._v(e._s(t))])])})),0):e._e(),"text"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--text",attrs:{"data-cy-field":e.id,type:"text",id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"hidden"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--hidden",attrs:{"data-cy-field":e.id,type:"hidden",id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"checkbox"===(e.showPassword?"text":"password")&&"password"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--password",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.data)?e._i(e.data,null)>-1:e.data},on:{change:function(t){var i=e.data,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);a.checked?o<0&&(e.data=i.concat([n])):o>-1&&(e.data=i.slice(0,o).concat(i.slice(o+1)))}else e.data=s}}},"input",e.props,!1)):"radio"===(e.showPassword?"text":"password")&&"password"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--password",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled,type:"radio"},domProps:{checked:e._q(e.data,null)},on:{change:function(t){e.data=null}}},"input",e.props,!1)):"password"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--password",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled,type:e.showPassword?"text":"password"},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"password"===e.type?i("span",{staticClass:"input--password-toggler",on:{click:function(t){e.showPassword=!e.showPassword}}},[i("font-awesome-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1):e._e(),"textarea"===e.type?i("textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--textarea",attrs:{"data-cy-field":e.id,id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"textarea",e.props,!1)):e._e(),"number"===e.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--number",attrs:{"data-cy-field":e.id,type:"number",id:"input-"+e.id,disabled:e.disabled,readonly:e.disabled},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}},"input",e.props,!1)):e._e(),"select"===e.type||"selectMultiple"===e.type?i("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--select",attrs:{"data-cy-field":e.id,id:"input-"+e.id,multiple:"selectMultiple"===e.type,disabled:e.disabled},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.data=t.target.multiple?i:i[0]}}},"select",e.props,!1),[e._l(Object.keys(e.options),(function(t){return e.optionsAreGrouped?i("optgroup",{attrs:{label:e.options[t].label}},e._l(e.options[t].options,(function(t){return i("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})),0):e._e()})),e._l(e.options,(function(t){return e.optionsAreGrouped?e._e():i("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])}))],2):e._e(),"radio"===e.type?i("ul",{staticClass:"input input--radio",attrs:{id:"input-"+e.id}},e._l(e.options,(function(t,a){return i("li",{staticClass:"input--radio-option"},[i("label",{attrs:{for:"input"+e._uid+"-"+a}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--radio",attrs:{type:"radio","data-cy-field":e.id,"data-cy-label":t.label,id:"input"+e._uid+"-"+a,name:"input"+e._uid,disabled:e.disabled},domProps:{value:t.value,checked:e._q(e.data,t.value)},on:{change:function(i){e.data=t.value}}}),e._v(" "+e._s(t.label)+" ")])])})),0):e._e(),"checkbox"===e.type?i("ul",{staticClass:"input--checkbox",attrs:{id:"input-"+e.id}},e._l(e.options,(function(t,a){return i("li",{staticClass:"input--checkbox-option"},[i("label",{attrs:{for:"input"+e._uid+"-"+a}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--checkbox",attrs:{type:"checkbox","data-cy-field":e.id,"data-cy-label":t.label,id:"input"+e._uid+"-"+a,name:"input"+e._uid,disabled:e.disabled},domProps:{value:t.value,checked:Array.isArray(e.data)?e._i(e.data,t.value)>-1:e.data},on:{change:function(i){var a=e.data,s=i.target,n=!!s.checked;if(Array.isArray(a)){var o=t.value,r=e._i(a,o);s.checked?r<0&&(e.data=a.concat([o])):r>-1&&(e.data=a.slice(0,r).concat(a.slice(r+1)))}else e.data=n}}}),e._v(" "+e._s(t.label)+" ")])])})),0):e._e(),"date"===e.type?i("Datepicker",e._b({attrs:{"data-cy-field":e.id,"input-class":"input input--date",disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Datepicker",e.props,!1)):e._e(),"autocompleter"===e.type?i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.props,!1)):e._e(),"address"===e.type?i("Address",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Address",e.props,!1)):e._e(),"location"===e.type?i("Location",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Location",e.props,!1)):e._e(),"addressWithLocation"===e.type?i("AddressWithLocation",e._b({attrs:{"data-cy-field":e.id,disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"AddressWithLocation",e.props,!1)):e._e(),"townList"===e.type?i("TownList",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"TownList",e.props,!1)):e._e(),"planFunding"===e.type?i("PlanFunding",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"PlanFunding",e.props,!1)):e._e(),"collectivity"===e.type?i("Collectivity",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Collectivity",e.props,!1)):e._e(),"organization"===e.type?i("Organization",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Organization",e.props,!1)):e._e(),"etp"===e.type?i("Etp",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Etp",e.props,!1)):e._e(),"audience"===e.type?i("Audience",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Audience",e.props,!1)):e._e(),"planHousing"===e.type?i("PlanHousing",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"PlanHousing",e.props,!1)):e._e()],1)])},xr=[],Sr=i("fa33"),Pr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"autocompleter"},[i("div",{ref:"measure",staticClass:"autocompleter-measure"},[e._v(e._s(e.currentLabel))]),i("div",{staticClass:"autocompleter-textfield"},[i("div",{ref:"prefixIcon",staticClass:"autocompleter-prefixIcon"},[i("img",{attrs:{src:"/img/search.svg"}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentLabel,expression:"currentLabel"}],ref:"input",attrs:{type:"text",disabled:e.disabled,readonly:e.disabled,placeholder:e.placeholder},domProps:{value:e.currentLabel},on:{keydown:e.onNavigation,keyup:e.onType,focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},input:function(t){t.target.composing||(e.currentLabel=t.target.value)}}}),i("div",{ref:"spinner",staticClass:"autocompleter-spinner",style:{visibility:e.suggestionRequest.pending?"visible":"hidden"}},[i("img",{attrs:{src:"/img/spinner_dark.svg"}})]),e.currentLabel&&!e.disabled?i("span",{ref:"suffixIcon",staticClass:"autocompleter-clearIcon",on:{click:e.clearLabel}}):e._e(),null!==e.suggestions?i("div",{ref:"suggestionContainer",staticClass:"autocompleter-suggestionContainer",class:{"autocompleter-suggestionContainer--float":e.float,"autocompleter-suggestionContainer--withoutCategories":!e.showCategory}},e._l(e.nonEmptyCategories,(function(t){return e.nonEmptyCategories.length>0?i("div",{staticClass:"autocompleter-suggestionCategoryContainer"},[e.showCategory?i("div",{staticClass:"autocompleter-suggestionCategory"},[e._v(e._s(t))]):e._e(),i("ul",{staticClass:"autocompleter-suggestionCategoryItems"},e._l(e.unselectedSuggestions[t],(function(t){return i("li",{staticClass:"autocompleter-suggestionCategoryItem",class:{"autocompleter-suggestionCategoryItem--empty":t.isExtra,active:t.id===e.idOfHighlightedItem},on:{click:function(i){return e.selectItem(t)}}},[e._v(e._s(t.label))])})),0)]):e._e()})),0):e._e(),null===e.suggestions&&e.suggestionRequest.error&&e.float?i("div",{staticClass:"autocompleter-suggestionContainer autocompleter-suggestionContainer--float autocompleter-suggestionContainer--withoutCategories"},[i("div",{staticClass:"autocompleter-suggestionCategoryContainer"},[i("ul",{staticClass:"autocompleter-suggestionCategoryItems"},[i("li",{staticClass:"autocompleter-suggestionCategoryItem autocompleter-suggestionCategoryItem--error"},[i("img",{attrs:{src:"/img/warning.svg"}}),e._v(" "+e._s(e.suggestionRequest.error))])])])]):e._e()]),e.suggestionRequest.error&&!e.float?i("p",{staticClass:"autocompleter-error"},[i("img",{attrs:{src:"/img/warning.svg"}}),i("span",[e._v(e._s(e.suggestionRequest.error))])]):e._e(),e.allowMultiple&&e.selectedItems.length>0?i("div",{staticClass:"autocompleter-selectionContainer"},[i("p",[e._v(e._s(e.wording.selectedItems)+" :")]),i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[e._v(e._s(e.wording.label))]),i("th",[e._v("Actions")])])]),i("tbody",e._l(e.selectedItems,(function(t){return i("tr",[i("td",[e._v(e._s(t.label))]),i("td",[e.disabled?e._e():i("img",{staticClass:"autocompleter-removeItemIcon",attrs:{src:"/img/remove.svg"},on:{click:function(i){return e.unselectItem(t)}}})])])})),0)])]):e._e()])},$r=[];const Tr=200;var Ir={props:{autocompleter:{type:Function,required:!0},showCategory:{type:Boolean,required:!1,default:!1},allowMultiple:{type:Boolean,required:!1,default:!1},float:{type:Boolean,required:!1,default:!0},wording:{type:Object,required:!1,default(){return{selectedItems:"Éléments sélectionnés",label:"Label"}}},createNew:{type:Function,required:!1,default:null},value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1}},data(){let e="";return this.allowMultiple||1!==this.value.length||([{label:e}]=this.value),{selectedItems:this.value,currentLabel:e,previousLabel:e,focused:!1,suggestions:null,suggestionRequest:{timeout:null,promise:null,pending:!1,error:null},indexOfHighligtedItem:null}},computed:{selectedIds(){return this.selectedItems.map(({id:e})=>e)},nonEmptyCategories(){return Object.keys(this.unselectedSuggestions).sort()},unselectedSuggestions(){if(null===this.suggestions)return{};let e=!0;const t=this.suggestions.reduce((t,i)=>(this.allowMultiple&&-1!==this.selectedIds.indexOf(i.id)||(t[i.category]||(t[i.category]=[]),t[i.category].push(i),e=!1),t),{});return null!==this.createNew?t._=[{id:"new",label:`Créer "${this.currentLabel}"`,category:"",data:{},isExtra:!0}]:e&&(t._=[{id:"empty",label:"Aucun résultat",category:"",data:{},isExtra:!0}]),t},unselectedSuggestionsFlat(){return this.nonEmptyCategories.reduce((e,t)=>[...e,...this.unselectedSuggestions[t]],[])},isSuggestionListEmpty(){const e=this.unselectedSuggestionsFlat;return!(e.length>1)&&(0===e.length||!0===e[0].isExtra&&"empty"===e[0].id)},idOfHighlightedItem(){return null===this.indexOfHighligtedItem||this.indexOfHighligtedItem<0||this.indexOfHighligtedItem>=this.unselectedSuggestionsFlat.length?null:this.unselectedSuggestionsFlat[this.indexOfHighligtedItem].id}},watch:{value(){this.selectedItems=this.value},disabled(){this.reset()}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{onType(){this.positionSpinner(),this.currentLabel!==this.previousLabel&&(this.previousLabel=this.currentLabel,this.resetSuggestions(),this.scheduleSuggestionRequest())},onNavigation(e){this.isSuggestionListEmpty?this.indexOfHighligtedItem=null:38===e.keyCode?this.indexOfHighligtedItem-1<0?this.indexOfHighligtedItem=null:this.indexOfHighligtedItem-=1:40===e.keyCode?this.unselectedSuggestionsFlat.length>0&&(null===this.indexOfHighligtedItem?this.indexOfHighligtedItem=0:this.indexOfHighligtedItem=Math.min(this.unselectedSuggestionsFlat.length-1,this.indexOfHighligtedItem+1)):13===e.keyCode?null!==this.indexOfHighligtedItem&&(this.selectItem(this.unselectedSuggestionsFlat[this.indexOfHighligtedItem]),this.$refs.input.focus()):this.indexOfHighligtedItem=null},scheduleSuggestionRequest(){this.cancelSuggestionRequest(),this.suggestionRequest.timeout=setTimeout(this.requestSuggestions,Tr)},cancelSuggestionRequest(){null!==this.suggestionRequest.promise&&this.suggestionRequest.promise.abort(),this.resetSuggestionPromise(),null!==this.suggestionRequest.timeout&&(clearTimeout(this.suggestionRequest.timeout),this.suggestionRequest.timeout=null)},resetSuggestionPromise(){this.suggestionRequest.promise=null,this.suggestionRequest.pending=!1,this.suggestionRequest.error=null},requestSuggestions(){this.canLabelTriggerARequest(this.currentLabel)&&(null!==this.suggestionRequest.promise&&this.cancelSuggestionRequest(),this.suggestionRequest.pending=!0,this.suggestionRequest.promise=this.autocompleter(this.currentLabel),this.suggestionRequest.promise.then(this.setSuggestions).catch(this.handleSuggestionFailure))},setSuggestions(e){this.resetSuggestionPromise(),this.focused&&(this.suggestions=e,this.isSuggestionListEmpty||(this.indexOfHighligtedItem=0))},handleSuggestionFailure(e){let t="erreur inconnue";e&&e.user_message&&(t=e.user_message),this.resetSuggestionPromise(),this.suggestionRequest.error="Une erreur est survenue : "+t},canLabelTriggerARequest(e){return""!==e},clearLabel(){this.cancelSuggestionRequest(),this.setLabel(""),!1===this.allowMultiple&&(this.selectedItems=[],this.$emit("input",this.selectedItems))},reset(){this.cancelSuggestionRequest(),this.$refs.input.blur(),this.allowMultiple||1!==this.selectedItems.length?this.setLabel(""):this.setLabel(this.selectedItems[0].label)},resetSuggestions(){this.suggestions=null},setLabel(e){this.currentLabel=e,this.previousLabel=e,this.resetSuggestions()},checkOutsideClick(e){const t=["prefixIcon","input","suffixIcon","suggestionContainer"];t.some(t=>this.$refs[t]&&this.$refs[t].contains(e.target))||this.reset()},selectItem(e){if(!0!==e.isExtra){if(!1===this.allowMultiple)this.selectedItems=[e],this.reset();else{if(this.selectedItems.some(({id:t})=>e.id===t))return;this.selectedItems.push(e)}this.$emit("input",this.selectedItems)}else{if("empty"===e.id)return;"new"===e.id&&(this.createNew(this.currentLabel),this.resetSuggestions())}},unselectItem(e){const t=this.selectedItems.findIndex(({id:t})=>e.id===t);-1!==t&&(this.selectedItems.splice(t,1),this.$emit("input",this.selectedItems))},positionSpinner(){this.$refs.spinner.style.marginLeft=0;const e=this.$refs.input.clientWidth;this.$refs.spinner.offsetLeft,this.$refs.spinner.offsetWidth,this.$refs.spinner.style.marginLeft=Math.min(this.$refs.measure.clientWidth,e)+"px"}}},Or=Ir,Ar=Or,Er=(i("4f16"),Object(u["a"])(Ar,Pr,$r,!1,null,null,null)),Nr=Er.exports,qr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.options,!1))},Dr=[];function jr(e){return`${e.geometry.coordinates[0]}-${e.geometry.coordinates[1]}`}function Mr(e){const t=[];return e.filter(e=>{const i=jr(e);return-1===t.indexOf(i)&&(t.push(i),!0)})}function Lr(e,t){if(200===this.status)try{const{features:t}=JSON.parse(this.responseText);e(Mr(t).filter(e=>e.properties&&e.properties.citycode).map(e=>({addressType:e.properties.type,citycode:e.properties.citycode,city:e.properties.city,coordinates:e.geometry.coordinates,id:e.properties.id,label:`${e.properties.label}, ${e.properties.context}`,category:"address",data:{citycode:e.properties.citycode,city:e.properties.city,label:`${e.properties.label}, ${e.properties.context}`,coordinates:e.geometry.coordinates}})))}catch(i){t()}else t()}function Fr(e,t=5){const i=new XMLHttpRequest,a=new Promise((a,s)=>{const n=["q="+encodeURIComponent(e)],o=parseInt(t,10);Number.isNaN(o)||n.push("limit="+o),i.open("GET","https://api-adresse.data.gouv.fr/search/?"+n.join("&")),i.onload=Lr.bind(i,a,s),i.onerror=s,i.ontimeout=s,i.send()});return a.abort=()=>{i.abort()},a}function zr(e){const t=Oo("/locations/search?q="+encodeURIComponent(e)),i=t.then(e=>e.map(e=>({label:5===e.code.length?`(${e.code.slice(0,2)}) ${e.name}`:e.name,code:e.code,type:e.label,locationType:e.type,departement:e.departement,data:{code:e.code,type:e.type}})));return i.abort=t.abort,i}function Rr(){return Oo("/departements")}var Br={components:{Autocompleter:Nr},props:{value:{type:Object,required:!1,default(){return null}},disabled:{type:Boolean,required:!1,default:!1},specificProps:{type:Object,required:!1,default(){return{}}}},data(){return{data:null!==this.value?[this.value]:[],options:{...this.specificProps,autocompleter:Fr}}},watch:{value(){this.data=null!==this.value?[this.value]:[]},data(){this.$emit("input",this.data.length>0?this.data[0]:null)}}},Vr=Br,Ur=Vr,Hr=(i("f909"),Object(u["a"])(Ur,qr,Dr,!1,null,null,null)),Gr=Hr.exports,Wr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"location"},[i("div",{ref:"map",staticClass:"location-map"}),e.showTutorial?i("div",{staticClass:"location-tutorial"},[i("div",{staticClass:"location-tutorialWrapper"},[i("h1",{staticClass:"location-tutorialTitle"},[e._v(e._s(e.tutorialWording.title))]),i("br"),i("p",{staticClass:"location-tutorialDescription"},[e._v(e._s(e.tutorialWording.description))]),e.showCloseTutorial?i("p",{staticClass:"location-tutorialButton"},[i("button",{staticClass:"button",on:{click:e.closeTutorial}},[e._v("J'ai compris")])]):e._e()])]):e._e()])},Qr=[];const Jr=6,Yr={coordinates:[46.7755829,2.0497727],zoom:Jr};var Zr={props:{value:{type:Object,required:!1,default(){return Yr}},tutorial:{type:String,required:!1,default:"auto"},autoHideMarker:{type:Boolean,required:!1,default:!1},wording:{type:Object,required:!1,default(){return{tutorialTitle:"Sélectionner une position géographique",tutorialDescription:"Positionnez le marqueur en vous déplaçant sur la carte, puis en cliquant sur la localisation désirée."}}},disabled:{type:Boolean,required:!1,default:!1}},data(){return{map:null,marker:null,clickTimeout:null,showTutorial:this.shouldShowTutorial(this.tutorial),tutorialHasBeenClosed:!1}},computed:{view(){const{lat:e,lng:t}=this.marker.getLatLng();return{coordinates:[e,t],zoom:this.map.getZoom()||Jr}},tutorialWording(){return!0===this.disabled?{title:"",description:""}:{title:this.wording.tutorialTitle,description:this.wording.tutorialDescription}},showCloseTutorial(){return!this.disabled&&"auto"===this.tutorial}},watch:{value(){this.syncMap(this.value,!1)},tutorial(){this.showTutorial=this.shouldShowTutorial(this.tutorial)},showTutorial(){this.syncMarker()},autoHideMarker(){this.syncMarker()},disabled(){!0===this.disabled?this.showTutorial=!0:this.showTutorial=this.shouldShowTutorial(this.tutorial)}},mounted(){this.$nextTick(this.initialize)},methods:{initialize(){this.map=ha.a.map(this.$refs.map),this.setTileLayers(),this.createMarker(),this.syncMap(this.value,!1)},setTileLayers(){const e={Satellite:ha.a.tileLayer.provider("Esri.WorldImagery"),Dessin:ha.a.tileLayer.provider("OpenStreetMap.Mapnik")};e.Dessin.addTo(this.map),ha.a.control.layers(e).addTo(this.map)},createMarker(){this.marker=ha.a.marker(this.value.coordinates,{draggable:!0}),this.map.addEventListener("click",e=>{clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(this.handleClick.bind(this,e),200)}),this.map.addEventListener("dblclick",()=>{clearTimeout(this.clickTimeout),this.clickTimeout=null}),this.marker.addEventListener("dragend",()=>{this.syncMap(this.view,!0)}),this.shouldShowMarker()&&this.marker.addTo(this.map)},syncMap(e,t=!1){this.marker.setLatLng(e.coordinates),this.map.setView(e.coordinates,e.zoom),!0===t&&this.$emit("input",e),clearTimeout(this.clickTimeout),this.clickTimeout=null},handleClick({latlng:{lat:e,lng:t}}){this.marker.setLatLng([e,t]),this.syncMap(this.view,!0),this.clickTimeout=null},closeTutorial(){this.showTutorial=!1,this.tutorialHasBeenClosed=!0},shouldShowMarker(){return!1===this.autoHideMarker||!0!==this.showTutorial},syncMarker(){null!==this.marker&&(this.shouldShowMarker()?this.marker.addTo(this.map):this.marker.remove())},shouldShowTutorial(e){return"no"!==e&&("yes"===e||!this.tutorialHasBeenClosed)}}},Kr=Zr,Xr=Kr,el=(i("8950"),Object(u["a"])(Xr,Wr,Qr,!1,null,null,null)),tl=el.exports,il=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Address",e._b({attrs:{disabled:e.disabled},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},"Address",e.addressOptions,!1)),i("Location",e._b({ref:"location",attrs:{disabled:e.disabled},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}},"Location",e.locationOptions,!1))],1)},al=[],sl={components:{Address:Gr,Location:tl},props:{value:{type:Object,required:!1,default(){return null}},specificProps:{type:Object,required:!1,default(){return{address:{},location:{}}}},disabled:{type:Boolean,required:!1,default:!1}},data(){return{address:null!==this.value?this.value.address:void 0,location:null!==this.value?this.value.location:void 0}},computed:{addressOptions(){return{...this.specificProps.address}},locationOptions(){return{...this.specificProps.location,tutorial:this.address?"auto":"yes",autoHideMarker:!this.address,wording:this.address?{tutorialTitle:"Adresse détectée",tutorialDescription:"Vous pouvez déplacer le marqueur en cliquant à l'endroit souhaité sur la carte"}:{tutorialTitle:"Saisir une adresse",tutorialDescription:"Veuillez saisir une adresse dans le champ de texte ci-dessus avant d'accéder à la carte"}}},data(){return this.address?{address:this.address,location:this.location}:null}},watch:{value(){this.address=null!==this.value?this.value.address:void 0,this.location=null!==this.value?this.value.location:void 0},address(){if(this.address){const[e,t]=this.address.coordinates;this.location={coordinates:[t,e],zoom:15}}this.$emit("input",this.data)},location(){this.$emit("input",this.data)}}},nl=sl,ol=nl,rl=(i("c789"),Object(u["a"])(ol,il,al,!1,null,null,null)),ll=rl.exports,cl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["loading"===e.status||null===e.status?i("div",[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),e._v(" Chargement de la liste des sites en cours... ")]):e._e(),"error"===e.status?i("div",{staticClass:"error"},[i("img",{staticClass:"spinner",attrs:{src:"/img/warning.svg",width:"20"}}),e._v(" Le chargement de la liste des sites a échoué : "+e._s(e.loadingError)+" ")]):e._e(),"loaded"===e.status?i("div",[i("p",{staticClass:"selectionInfo"},[e._v("Nombre total de sites sélectionnés : "+e._s(e.selectedTowns.length))]),i("div",{staticClass:"switch"},[i("button",{class:{active:"open"===e.statusOfVisibleTowns},on:{click:function(t){return e.showTowns("open")}}},[e._v("Sites existants")]),i("button",{class:{active:"closed"===e.statusOfVisibleTowns},on:{click:function(t){return e.showTowns("closed")}}},[e._v("Sites fermés")])]),i("CollectivityInput",{staticClass:"townList-search",model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),i("Table",{attrs:{columns:e.columns,content:e.pageContent,emptyLabel:"Aucun site"},on:{click:e.toggleTown},scopedSlots:e._u([{key:"checkbox",fn:function(t){return[i("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.selectedTowns.some((function(e){return e===t.row.id}))},on:{change:function(i){return e.toggleTown(t.row)}}})]}},{key:"city",fn:function(t){return[e._v(e._s(t.row.city.name))]}},{key:"address",fn:function(t){return[e._v(e._s(t.row.usename))]}},{key:"fieldType",fn:function(t){return[i("span",{staticClass:"fieldType"},[i("i",{style:"background-color: "+e.fieldTypes[t.row.fieldType.id].color}),e._v(" "),i("span",[e._v(e._s(t.row.fieldType.label))])])]}},{key:"people",fn:function(t){return[null===t.row.populationTotal?i("span",{staticClass:"secondary"},[e._v("NC")]):i("span",[e._v(e._s(t.row.populationTotal))])]}}],null,!1,2250559664)})],1):e._e()])},ul=[];function dl(e={},t=[]){const i=[];return Object.keys(e).forEach(t=>{i.push(`${t}=${encodeURIComponent(e[t])}`)}),t.length>0&&i.push("order="+t.map(e=>encodeURIComponent(e)).join(",")),Oo("/towns"+(i.length>0?"?"+i.join("&"):""))}function pl(e){return Oo("/towns/"+e)}function ml(e){return Ao("/towns",e)}function hl(e,t){return Ao("/towns/"+e,t)}function vl(e,t){return Ao(`/towns/${e}/close`,t)}function fl(e){return Eo("/towns/"+e)}function gl(e,t){return Ao(`/towns/${e}/comments`,t)}function bl(e,t){return Ao(`/towns/${e}/covidComments`,t)}function _l(e,t,i){return Eo(`/towns/${e}/comments/${t}`,{message:i})}var yl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rb-table"},[i("aside",{staticClass:"rb-table-aside"},[e._t("aside",[i("p")]),i("div",{staticClass:"rb-pagination"},[i("span",{staticClass:"link",class:{"link--disabled":0===e.currentPage},on:{click:e.previousPage}},[i("font-awesome-icon",{attrs:{icon:"caret-square-left"}}),e._v(" Précédent")],1),i("span",{staticClass:"pagination-pages"},[e._v(e._s(e.indexOfFirstRowInCurrentPage)+" - "+e._s(e.indexOfLastRowInCurrentPage)+" sur "+e._s(e.filteredContent.length))]),i("span",{staticClass:"link",class:{"link--disabled":e.currentPage===e.indexOfLastPage},on:{click:e.nextPage}},[e._v("Suivant "),i("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])],2),i("table",{staticClass:"table"},[i("thead",[i("tr",e._l(e.parsedColumns,(function(t){var a;return i("th",{class:(a={"table-col--filterable":t.isFilterable,"table-col--active":[t.id].length>0},a["table-col--"+t.id]=!0,a)},[t.isFilterable?i("TableFilter",{attrs:{visible:e.currentFilter===t.id},on:{"outside-click":e.hideFilter,clean:e.hideFilter},model:{value:e.parsedFilters[t.id],callback:function(i){e.$set(e.parsedFilters,t.id,i)},expression:"parsedFilters[column.id]"}}):e._e(),t.isFilterable?i("span",{on:{click:function(i){return e.toggleFilter(t.id)}}},[e._v(e._s(t.label)+" "),e.checkedFilters[t.id].length>0?i("span",{staticClass:"badge"},[e._v(e._s(e.checkedFilters[t.id].length))]):e._e(),i("font-awesome-icon",{attrs:{icon:"sort-down",size:"2x"}})],1):i("span",[e._v(e._s(t.label))])],1)})),0)]),i("tbody",[0===e.filteredContent.length?i("tr",{staticClass:"table-row--empty"},[i("td",{attrs:{colspan:e.parsedColumns.length}},[e._v(e._s(e.emptyLabel))])]):e._e(),e._l(e.currentPageContent,(function(t,a){return i("tr",{class:a%2===0?"table-row--odd":"",on:{click:function(i){return e.click(i,t)}}},e._l(e.parsedColumns,(function(a){return i("td",{class:"table-col--"+a.id},[e._t(a.id,[i("span",{domProps:{innerHTML:e._s(t[a.id])}})],{row:t})],2)})),0)}))],2)]),i("aside",{staticClass:"rb-table-aside"},[e._t("aside",[i("p")]),i("div",{staticClass:"rb-pagination"},[i("span",{staticClass:"link",class:{"link--disabled":0===e.currentPage},on:{click:e.previousPage}},[i("font-awesome-icon",{attrs:{icon:"caret-square-left"}}),e._v(" Précédent")],1),i("span",{staticClass:"pagination-pages"},[e._v(e._s(e.indexOfFirstRowInCurrentPage)+" - "+e._s(e.indexOfLastRowInCurrentPage)+" sur "+e._s(e.filteredContent.length))]),i("span",{staticClass:"link",class:{"link--disabled":e.currentPage===e.indexOfLastPage},on:{click:e.nextPage}},[e._v("Suivant "),i("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])],2)])},wl=[],Cl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"tableFilter",style:{display:!0===e.visible?"block":"none"}},[i("ul",e._l(e.items,(function(t,a){return i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{type:"checkbox",id:"tableFilter-"+e.id+"-"+a},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(i){var a=t.checked,s=i.target,n=!!s.checked;if(Array.isArray(a)){var o=null,r=e._i(a,o);s.checked?r<0&&e.$set(t,"checked",a.concat([o])):r>-1&&e.$set(t,"checked",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(t,"checked",n)}}}),i("label",{attrs:{for:"tableFilter-"+e.id+"-"+a}},[e._t("default",[e._v(e._s(t.label))],{item:t})],2)])})),0),i("footer",[i("span",{staticClass:"link link--secondary",on:{click:e.clean}},[e._v("Effacer")])])])},kl=[],xl={props:{value:{required:!0,type:Array},visible:{required:!1,type:Boolean,default:!1}},data(){return{items:this.value,timeout:null,id:null}},watch:{value(){this.items=this.value},items(){this.$emit("input",this.items)},visible(){!0===this.visible?this.timeout=setTimeout(()=>document.addEventListener("click",this.checkOutsideClick),500):(clearTimeout(this.timeout),document.removeEventListener("click",this.checkOutsideClick))}},mounted(){this.id=this._uid},methods:{clean(){for(let e=0;e<this.items.length;e+=1)this.items[e].checked=!1;this.$emit("clean")},checkOutsideClick(e){this.$refs.container&&this.$refs.container.contains(e.target)||this.$emit("outside-click",e)}}},Sl=xl,Pl=Sl,$l=(i("cb23"),Object(u["a"])(Pl,Cl,kl,!1,null,"cdbe4124",null)),Tl=$l.exports;const Il=10;var Ol={components:{TableFilter:Tl},props:{columns:{type:Array,required:!0},content:{type:Array,required:!1,default(){return[]}},emptyLabel:{type:String,required:!1,default:"Aucune donnée disponible pour les filtres sélectionnés"},itemsPerPage:{type:Number,required:!1,default:Il}},data(){return{parsedFilters:this.parseFilters(),currentFilter:null,currentPage:0}},computed:{parsedColumns(){return this.columns.map(e=>({...e,isFilterable:void 0!==e.filters}))},checkedFilters(){return Object.keys(this.parsedFilters).reduce((e,t)=>({...e,[t]:this.parsedFilters[t].filter(({checked:e})=>!0===e)}),{})},filteredContent(){return this.currentPage=0,this.content.filter(e=>this.columns.every(({id:t,filterFn:i})=>0===this.checkedFilters[t].length||i(e,this.checkedFilters[t])))},currentPageContent(){return this.filteredContent.slice(this.currentPage*this.itemsPerPage,this.currentPage*this.itemsPerPage+this.itemsPerPage)},indexOfLastPage(){return Math.max(0,Math.ceil(this.filteredContent.length/this.itemsPerPage)-1)},indexOfFirstRowInCurrentPage(){return this.filteredContent.length>0?this.currentPage*this.itemsPerPage+1:0},indexOfLastRowInCurrentPage(){return Math.min(this.indexOfFirstRowInCurrentPage+this.itemsPerPage-1,this.filteredContent.length)}},watch:{columns(){this.parsedFilters=this.parseFilters(),this.currentPage=0},content(){this.parsedFilters=this.parseFilters(),this.currentFilter=null,this.currentPage=0}},methods:{click(e,t){this.$emit("click",t,e)},parseFilters(){return this.columns.reduce((e,t)=>void 0===t.filters?{...e,[t.id]:[]}:{...e,[t.id]:t.filters.map(e=>void 0!==e.checked?e:{...e,checked:!1})},{})},toggleFilter(e){this.currentFilter===e?this.currentFilter=null:this.currentFilter=e},hideFilter(){this.currentFilter=null},previousPage(){this.currentPage=Math.max(0,this.currentPage-1)},nextPage(){this.currentPage=Math.min(this.indexOfLastPage,this.currentPage+1)}}},Al=Ol,El=Al,Nl=Object(u["a"])(El,yl,wl,!1,null,null,null),ql=Nl.exports,Dl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.options,!1))},jl=[],Ml={components:{Autocompleter:Nr},props:{value:{type:Object,required:!1,default(){return null}},disabled:{type:Boolean,required:!1,default:!1},specificProps:{type:Object,required:!1,default(){return{}}}},data(){return{data:null!==this.value?[this.value]:[],options:{...this.specificProps,showCategory:!0,autocompleter:(...e)=>{const t=zr(...e),i=t.then(e=>e.map(({label:e,code:t,type:i,locationType:a})=>({id:t,label:e,category:i,data:{code:t,type:a}})));return i.abort=t.abort,i}}}},watch:{value(){this.data=null!==this.value?[this.value]:[]},data(){this.$emit("input",this.data.length>0?this.data[0]:null)}}},Ll=Ml,Fl=Ll,zl=(i("373f"),Object(u["a"])(Fl,Dl,jl,!1,null,null,null)),Rl=zl.exports,Bl={components:{Table:ql,CollectivityInput:Rl},props:{value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1},filter:{type:Function,required:!1,default:null}},data(){const{field_types:e,user:t}=zo(),i=Bo("shantytown.list"),a={id:"nation"===t.organization.location.type?null:t.organization.location[t.organization.location.type].code,label:"nation"===t.organization.location.type?"France":t.organization.location[t.organization.location.type].name,category:t.organization.location.type,data:{code:"nation"===t.organization.location.type?null:t.organization.location[t.organization.location.type].code,type:t.organization.location.type}},s="nation"===i.geographic_level;let n,o;return!0!==s||"nation"===t.organization.location.type?(o={...a},n=null):(o={id:null,label:"France",category:"Pays",data:{code:null,type:"nation"}},n={...a}),{location:n,defaultLocation:o,columns:[{id:"checkbox",label:""},{id:"city",label:"Commune"},{id:"address",label:"Adresse"},{id:"fieldType",label:"Type de site"},{id:"people",label:"Nombre de personnes"}],fieldTypes:e.reduce((e,t)=>({...e,[t.id]:t}),{}),status:null,loadingError:null,towns:[],selectedTowns:this.value,statusOfVisibleTowns:"open"}},computed:{currentLocation(){return this.location||this.defaultLocation},pageContent(){return this.towns.filter(({closedAt:e})=>"open"===this.statusOfVisibleTowns?null===e:null!==e).filter(e=>{if("nation"===this.currentLocation.data.type)return!0;const t=e[this.currentLocation.data.type];return t&&""+t.code===""+this.currentLocation.data.code})}},watch:{value(){this.selectedTowns=this.value},selectedTowns(){this.$emit("input",this.selectedTowns)}},mounted(){this.load()},methods:{load(){"loaded"!==this.status&&"loading"!==this.status&&(this.status="loading",this.loadingError=null,dl({},["city.asc","population.desc"]).then(e=>{this.status="loaded",this.towns=e}).catch(({user_message:e})=>{this.status="error",this.loadingError=e}))},showTowns(e){this.statusOfVisibleTowns=e},toggleTown({id:e},t){if(t&&t.target&&"checkbox"===t.target.type)return;if(this.disabled)return;const i=this.selectedTowns.findIndex(t=>t===e);-1!==i?this.selectedTowns.splice(i,1):this.selectedTowns.push(e)}}},Vl=Bl,Ul=Vl,Hl=(i("3b5a"),Object(u["a"])(Ul,cl,ul,!1,null,null,null)),Gl=Hl.exports,Wl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"planFunding"},[i("header",{staticClass:"planFunding-header"},[i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":this.focusedYear===this.minYear},attrs:{icon:"caret-square-left"},on:{click:e.showPreviousYear}}),i("span",[e._v(e._s(e.focusedYear)+" ")]),i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":this.focusedYear===this.maxYear},attrs:{icon:"caret-square-right"},on:{click:e.showNextYear}})],1),i("table",{staticClass:"table"},[e._m(0),i("tbody",[e._l(e.currentFundings,(function(t,a){return i("PlanFundingRow",{key:a,attrs:{index:a,inputMode:e.inputMode,relatedYear:e.focusedYear,disabled:e.disabled},on:{onremove:function(t){return e.removeRow(a)},input:e.onRowChange},model:{value:t.data,callback:function(i){e.$set(t,"data",i)},expression:"funding.data"}})})),"default"===e.inputMode?i("tr",[i("td",{staticClass:"planFunding-addRow",class:{"planFunding-addRow--disabled":e.disabled},attrs:{colspan:"5"},on:{click:e.addRow}},[e._v("Ajouter une ligne de financement")])]):e._e()],2)])])},Ql=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"planFunding-type"},[e._v("Type de financements")]),i("th",{staticClass:"planFunding-amount"},[e._v("Montants"),i("br"),e._v("Prévus")]),i("th",{staticClass:"planFunding-details"},[e._v("Précision")]),i("th",{staticClass:"planFunding-details"},[e._v("Dépenses"),i("br"),e._v("exécutées")]),i("th")])])}],Jl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",{staticClass:"planFundingRow",class:{"planFundingRow--disabled":e.disabled}},[i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{disabled:e.disabled||"closing"===e.inputMode||!e.allowEdition},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.type=t.target.multiple?i:i[0]}}},e._l(e.financeTypes,(function(t){return i("option",{domProps:{value:t.uid}},[e._v(e._s(t.name))])})),0)]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{type:"text",readonly:e.disabled||"closing"===e.inputMode||!e.allowEdition,disabled:e.disabled||"closing"===e.inputMode||!e.allowEdition},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.details,expression:"details"}],attrs:{type:"text",readonly:e.disabled||"closing"===e.inputMode||!e.allowEdition,disabled:e.disabled||"closing"===e.inputMode||!e.allowEdition},domProps:{value:e.details},on:{input:function(t){t.target.composing||(e.details=t.target.value)}}})]),e.showRealAmount?i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.realAmount,expression:"realAmount"}],attrs:{type:"text",readonly:e.disabled||!e.allowEdition,disabled:e.disabled||!e.allowEdition},domProps:{value:e.realAmount},on:{input:function(t){t.target.composing||(e.realAmount=t.target.value)}}})]):i("td",[0===e.index?i("span",[e._v("À remplir entre janvier et mars de l'année prochaine")]):e._e()]),i("td",[i("img",{attrs:{src:"/img/remove.svg"},on:{click:e.remove}})])])},Yl=[],Zl={props:{value:{type:Object,required:!1,default(){return{type:null,amount:0,realAmount:null,details:""}}},disabled:{type:Boolean,required:!1,default:!1},index:{type:Number,required:!0},relatedYear:{type:Number,required:!0},inputMode:{type:String,required:!1,default:"default"}},data(){const e="default"!==this.inputMode||!this.isCurrentYear(),t=!Number.isFinite(this.value.realAmount);return{financeTypes:zo().finance_types||[],showRealAmount:e,allowEdition:t,type:this.value.type,amount:this.value.amount,realAmount:e?this.value.realAmount:null,details:this.value.details}},watch:{value(){this.showRealAmount="default"!==this.inputMode||!this.isCurrentYear(),this.allowEdition=!Number.isFinite(this.value.realAmount),this.type=this.value.type,this.amount=this.value.amount,this.realAmount=this.showRealAmount?this.value.realAmount:null,this.details=this.value.details},type(){this.emitInput()},amount(){this.emitInput()},realAmount(){this.emitInput()},details(){this.emitInput()}},methods:{isCurrentYear(){return(new Date).getFullYear()===this.relatedYear},emitInput(){this.$emit("input",{type:this.type,amount:this.amount,realAmount:this.realAmount,details:this.details})},remove(){this.$emit("onremove")}}},Kl=Zl,Xl=Kl,ec=(i("5449"),Object(u["a"])(Xl,Jl,Yl,!1,null,null,null)),tc=ec.exports,ic={components:{PlanFundingRow:tc},props:{value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1},minYear:{type:Number,required:!1,default:null},inputMode:{type:String,required:!1,default:"default"}},data(){return{maxYear:(new Date).getFullYear(),focusedYear:(new Date).getFullYear(),fundings:this.value.map(({year:e,data:t})=>({year:e,data:t.map(e=>({data:e}))}))}},computed:{allowRealAmount(){return"closing"===this.inputMode||this.focusedYear<(new Date).getFullYear()},currentFundings(){const e=this.getCurrentFundings();return void 0===e?[]:e.data}},watch:{value(){this.fundings=this.value.map(({year:e,data:t})=>({year:e,data:t.map(e=>({data:e}))}))}},methods:{getCurrentFundings(){return this.fundings.find(({year:e})=>e===this.focusedYear)},addRow(){if(this.disabled)return;let e=this.getCurrentFundings();void 0===e&&(e={year:this.focusedYear,data:[]},this.fundings.push(e)),e.data.push({data:{type:null,amount:0,realAmount:null,details:""}}),this.emitInput()},removeRow(e){if(this.disabled)return;const t=this.getCurrentFundings();void 0!==t&&(t.data.splice(e,1),this.emitInput())},onRowChange(){this.emitInput()},emitInput(){this.$emit("input",this.fundings.map(({year:e,data:t})=>({year:e,data:t.map(({data:e})=>e)})))},showNextYear(){this.focusedYear=Math.min(this.maxYear,this.focusedYear+1)},showPreviousYear(){null===this.minYear?this.focusedYear-=1:this.focusedYear=Math.max(this.minYear,this.focusedYear-1)}}},ac=ic,sc=ac,nc=(i("30c2"),Object(u["a"])(sc,Wl,Ql,!1,null,null,null)),oc=nc.exports,rc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rb-table"},[i("table",{staticClass:"table"},[e._m(0),i("tbody",[i("tr",[i("th",[e._v("SIAO")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.siao.families,expression:"data.siao.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.siao.families},on:{input:function(t){t.target.composing||e.$set(e.data.siao,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.siao.people,expression:"data.siao.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.siao.people},on:{input:function(t){t.target.composing||e.$set(e.data.siao,"people",t.target.value)}}})])]),i("tr",[i("th",[e._v("Logement social")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.logement_social.families,expression:"data.logement_social.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.logement_social.families},on:{input:function(t){t.target.composing||e.$set(e.data.logement_social,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.logement_social.people,expression:"data.logement_social.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.logement_social.people},on:{input:function(t){t.target.composing||e.$set(e.data.logement_social,"people",t.target.value)}}})])]),i("tr",[i("th",[e._v("DALO")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.dalo.families,expression:"data.dalo.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.dalo.families},on:{input:function(t){t.target.composing||e.$set(e.data.dalo,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.dalo.people,expression:"data.dalo.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.dalo.people},on:{input:function(t){t.target.composing||e.$set(e.data.dalo,"people",t.target.value)}}})])])])]),i("table",{staticClass:"table"},[e._m(1),i("tbody",[i("tr",[i("th",[e._v("Logement accompagné / adapté")]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.accompagnes.families,expression:"data.accompagnes.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.accompagnes.families},on:{input:function(t){t.target.composing||e.$set(e.data.accompagnes,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.accompagnes.people,expression:"data.accompagnes.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.accompagnes.people},on:{input:function(t){t.target.composing||e.$set(e.data.accompagnes,"people",t.target.value)}}})])]),i("tr",[e._m(2),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.non_accompagnes.families,expression:"data.non_accompagnes.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.non_accompagnes.families},on:{input:function(t){t.target.composing||e.$set(e.data.non_accompagnes,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.non_accompagnes.people,expression:"data.non_accompagnes.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.non_accompagnes.people},on:{input:function(t){t.target.composing||e.$set(e.data.non_accompagnes,"people",t.target.value)}}})])]),i("tr",[e._m(3),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.heberges.families,expression:"data.heberges.families"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.heberges.families},on:{input:function(t){t.target.composing||e.$set(e.data.heberges,"families",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.heberges.people,expression:"data.heberges.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.heberges.people},on:{input:function(t){t.target.composing||e.$set(e.data.heberges,"people",t.target.value)}}})])])])])])},lc=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("Demandes de logement")]),i("th",[e._v("Ménages")]),i("th",[e._v("Personnes")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("Accès à un logement ou hébergement")]),i("th",[e._v("Ménages")]),i("th",[e._v("Personnes")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",[e._v(" Logement sans accompagnement "),i("br"),i("span",[e._v("(social ou privé)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",[e._v(" Hébergement "),i("span",[e._v("(hors mise à l'abri ou hébergement d'urgence)")])])}],cc={props:{value:{type:Object,required:!1,default(){return{siao:{people:"",families:""},logement_social:{people:"",families:""},dalo:{people:"",families:""},accompagnes:{people:"",families:""},non_accompagnes:{people:"",families:""},heberges:{people:"",families:""}}}},disabled:{type:Boolean,required:!1,default:!1}},data(){return{data:this.value}},watch:{data:{handler(){this.emitInput()},deep:!0}},mounted(){this.emitInput()},methods:{emitInput(){this.$emit("input",this.data)}}},uc=cc,dc=(i("e1d3"),Object(u["a"])(uc,rc,lc,!1,null,"0c9f54ed",null)),pc=dc.exports,mc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Autocompleter",e._b({attrs:{disabled:e.disabled},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},"Autocompleter",e.options,!1))},hc=[],vc={components:{Autocompleter:Nr},props:{value:{type:Object,required:!1,default(){return null}},disabled:{type:Boolean,required:!1,default:!1},specificProps:{type:Object,required:!1,default(){return{}}}},data(){return{data:null!==this.value?[this.value]:[],options:{...this.specificProps,showCategory:!0,autocompleter:(...e)=>{const t=mr(...e),i=t.then(e=>e.map(e=>({id:e.id,label:e.label,category:e.type.label,data:e})));return i.abort=t.abort,i}}}},watch:{value(){this.data=null!==this.value?[this.value]:[]},data(){this.$emit("input",this.data.length>0?this.data[0]:null)}}},fc=vc,gc=fc,bc=Object(u["a"])(gc,mc,hc,!1,null,null,null),_c=bc.exports,yc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._l(e.rows,(function(t,a){return e.rows.length>0?i("p",{staticClass:"etp-row dataSection-line"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"row.type"}],staticClass:"etp-type",attrs:{disabled:e.disabled},on:{change:function(i){var a=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"type",i.target.multiple?a:a[0])}}},e._l(e.types,(function(t){return i("option",{domProps:{value:t.uid}},[e._v(e._s(t.name))])})),0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.total,expression:"row.total"}],staticClass:"etp-total",attrs:{type:"number",disabled:e.disabled,step:"0.1"},domProps:{value:t.total},on:{input:function(i){i.target.composing||e.$set(t,"total",i.target.value)}}}),e._v(" ETP "),i("font-awesome-icon",{staticClass:"etp-removeButton",attrs:{icon:"trash-alt"},on:{click:function(t){return e.removeRow(a)}}})],1):e._e()})),0===e.rows.length?i("p",[e._v("Aucun ETP enregistré pour le moment")]):e._e(),i("p",{staticClass:"etp-addButton",on:{click:e.addRow}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}}),i("span",[e._v("Ajouter")])],1)],2)},wc=[],Cc={props:{value:{type:Array,required:!1,default(){return[]}},disabled:{type:Boolean,required:!1,default:!1}},data(){const{etp_types:e}=zo();return{rows:this.value,types:e}},computed:{parsedRows(){return this.rows.map(e=>({type:e.type?e.type:null,total:parseFloat(e.total)}))}},watch:{parsedRows(){this.emitInput()}},methods:{addRow(){this.disabled||(this.rows.push({type:void 0,total:0}),this.emitInput())},removeRow(e){this.disabled||e>=this.rows.length||(this.rows.splice(e,1),this.emitInput())},emitInput(){this.$emit("input",this.parsedRows)}}},kc=Cc,xc=kc,Sc=(i("d416"),Object(u["a"])(xc,yc,wc,!1,null,null,null)),Pc=Sc.exports,$c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rb-table"},[i("table",{staticClass:"table"},[e._m(0),i("tbody",[e.outOnly?e._e():i("tr",[e.inOnly?e._e():i("td",[i("strong",[e._v("Entrées")]),e._v(" dans le dispositif")]),e.inOnly?i("td",[e._v("Publics intégrés au dispositif")]):e._e(),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.households,expression:"data.in.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.households},on:{input:function(t){t.target.composing||e.$set(e.data.in,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.people,expression:"data.in.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.people},on:{input:function(t){t.target.composing||e.$set(e.data.in,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.women,expression:"data.in.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.women},on:{input:function(t){t.target.composing||e.$set(e.data.in,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.in.minors,expression:"data.in.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.in.minors},on:{input:function(t){t.target.composing||e.$set(e.data.in,"minors",t.target.value)}}})])]),e.inOnly?e._e():i("tr",[e._m(1),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.households,expression:"data.out_positive.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.households},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.people,expression:"data.out_positive.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.people},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.women,expression:"data.out_positive.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.women},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_positive.minors,expression:"data.out_positive.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_positive.minors},on:{input:function(t){t.target.composing||e.$set(e.data.out_positive,"minors",t.target.value)}}})])]),e.inOnly?e._e():i("tr",[e._m(2),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.households,expression:"data.out_abandoned.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.households},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.people,expression:"data.out_abandoned.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.people},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.women,expression:"data.out_abandoned.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.women},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_abandoned.minors,expression:"data.out_abandoned.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_abandoned.minors},on:{input:function(t){t.target.composing||e.$set(e.data.out_abandoned,"minors",t.target.value)}}})])]),e.inOnly?e._e():i("tr",[e._m(3),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.households,expression:"data.out_excluded.households"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.households},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"households",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.people,expression:"data.out_excluded.people"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.people},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"people",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.women,expression:"data.out_excluded.women"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.women},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"women",t.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data.out_excluded.minors,expression:"data.out_excluded.minors"}],attrs:{type:"number",disabled:e.disabled},domProps:{value:e.data.out_excluded.minors},on:{input:function(t){t.target.composing||e.$set(e.data.out_excluded,"minors",t.target.value)}}})])])])])])},Tc=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"table-col"}),i("th",{staticClass:"table-col"},[e._v("Ménages")]),i("th",{staticClass:"table-col"},[e._v("Personnes")]),i("th",{staticClass:"table-col"},[e._v("dont femmes"),i("br"),e._v("(facultatif)")]),i("th",{staticClass:"table-col"},[e._v("dont mineurs"),i("br"),e._v("(facultatif)")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Sorties positivement")]),i("br"),e._v("fin accompagnement social et/ou"),i("br"),e._v("prise en charge dans un autre dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Exclusion")]),e._v(" du dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Abandon / départ volontaire")])])}],Ic={props:{value:{type:Object,required:!1,default(){return{in:{households:0,people:0,women:0,minors:0},out_positive:{households:0,people:0,women:0,minors:0},out_abandoned:{households:0,people:0,women:0,minors:0},out_excluded:{households:0,people:0,women:0,minors:0}}}},inOnly:{type:Boolean,required:!1,default:!1},outOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},data(){return{data:this.value}},watch:{"data.in.households"(){this.emitInput()},"data.in.people"(){this.emitInput()},"data.in.women"(){this.emitInput()},"data.in.minors"(){this.emitInput()},"data.out_positive.households"(){this.emitInput()},"data.out_positive.people"(){this.emitInput()},"data.out_positive.women"(){this.emitInput()},"data.out_positive.minors"(){this.emitInput()},"data.out_abandoned.households"(){this.emitInput()},"data.out_abandoned.people"(){this.emitInput()},"data.out_abandoned.women"(){this.emitInput()},"data.out_abandoned.minors"(){this.emitInput()},"data.out_excluded.households"(){this.emitInput()},"data.out_excluded.people"(){this.emitInput()},"data.out_excluded.women"(){this.emitInput()},"data.out_excluded.minors"(){this.emitInput()}},mounted(){this.emitInput()},methods:{emitInput(){this.$emit("input",this.data)}}},Oc=Ic,Ac=Oc,Ec=(i("2283"),Object(u["a"])(Ac,$c,Tc,!1,null,null,null)),Nc=Ec.exports;const qc=["selectMultiple","checkbox","autocompleter","townList","planFunding","etp"];var Dc={components:{Datepicker:Sr["default"],Autocompleter:Nr,Address:Gr,Location:tl,AddressWithLocation:ll,TownList:Gl,PlanFunding:oc,Collectivity:Rl,Organization:_c,Etp:Pc,Audience:Nc,PlanHousing:pc},props:{id:{type:String,required:!0},mandatory:{type:Boolean,required:!0},type:{type:String,required:!1,default:"text"},label:{type:String,required:!0},description:{type:String,required:!1},options:{type:Array,required:!1,default(){return[]}},specificProps:{type:Object,required:!1,default(){return{}}},value:{required:!1,default(){if(-1!==qc.indexOf(this.type))return[]}},disabled:{type:Boolean,required:!1,default:!1},errors:{type:Array,required:!1,default(){return[]}},alertMessage:{type:String,required:!1,default:null}},data(){return{data:this.value,showPassword:!1}},computed:{props(){let e={};return"date"===this.type&&(e={language:Vi["fr"],mondayFirst:!0,fullMonthName:!0,format:"dd MMMM yyyy",calendarButton:!0,calendarButtonIconContent:"",clearButton:!0}),Object.assign(e,this.specificProps)},optionsAreGrouped(){return this.options&&Object.prototype.hasOwnProperty.call(this.options[0],"options")}},mounted(){this.$nextTick(()=>{this.$emit("input",this.data)})},watch:{value(){this.data=this.value},data(){this.$emit("input",this.data),this.$emit("change")},options(){Array.isArray(this.data)?this.data=this.data.filter(e=>-1!==this.options.indexOf(e)):-1===this.options.indexOf(this.data)&&(this.data=void 0)}}},jc=Dc,Mc=jc,Lc=(i("8aa6"),Object(u["a"])(Mc,kr,xr,!1,null,null,null)),Fc=Lc.exports,zc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{slideNote:!0,"slideNote--visible":e.visible}},[i("header",{staticClass:"slideNote-header"},[i("h1",{staticClass:"slideNote-title"},[i("font-awesome-icon",{attrs:{icon:e.iconName}}),e._v(" "+e._s(e.title))],1),i("span",{staticClass:"slideNote-toggle",on:{click:e.toggle}},[i("font-awesome-icon",{attrs:{icon:e.caret,size:"2x"}})],1)]),i("div",{ref:"body",staticClass:"slideNote-body"},[e._t("content",[i("p",{ref:"content",staticClass:"slideNote-content",domProps:{innerHTML:e._s(e.content)}})])],2)])},Rc=[],Bc={props:{title:{required:!0,type:String},content:{required:!1,type:String},opened:{required:!1,type:Boolean,default:!0},icon:{required:!1,type:String,default:"info-circle"}},data(){return{iconName:this.icon,maxHeight:null,visible:!1!==this.opened}},computed:{caret(){return"caret-"+(!0===this.visible?"up":"down")}},mounted(){this.maxHeight=this.$refs.body.offsetHeight,this.refreshHeight()},methods:{toggle(){this.visible=!this.visible,this.refreshHeight()},refreshHeight(){!0===this.visible?this.$refs.body.style.maxHeight=this.maxHeight+"px":this.$refs.body.style.maxHeight="0"}}},Vc=Bc,Uc=Vc,Hc=(i("2d21"),Object(u["a"])(Uc,zc,Rc,!1,null,"569f8548",null)),Gc=Hc.exports;const Wc=6e3;function Qc(e){return a["default"].notify(Object.prototype.hasOwnProperty.call(e,"duration")?e:{...e,duration:Wc})}var Jc={components:{Input:Fc,SlideNote:Gc},props:{title:{type:String,required:!1},descriptionTitle:{type:String,required:!1},description:{type:String,required:!1},steps:{type:Array,required:!0},value:{type:Object,required:!1,default(){return{}}}},data(){return{refreshId:0,currentStepIndex:0,data:this.value,pending:!1,errors:null,responses:[]}},computed:{breadcrumbItems(){return this.steps.reduce((e,t,i)=>[...e,{...t,classNames:{"form-breadcrumbItem":!0,"form-breadcrumbItem--current":i===this.currentStepIndex,"form-breadcrumbItem--done":i<this.currentStepIndex},isSeparator:!1,stepIndex:i},{classNames:{"form-breadcrumbSeparator":!0},isSeparator:!0}],[]).slice(0,-1)},currentStep(){return this.steps[this.currentStepIndex]||null},sections(){return this.currentStep?this.currentStep.sections:[]},fullSections(){return this.sections.filter(({inputs:e})=>Object.values(e).some(e=>this.isInputVisible(e)))},inputs(){return this.currentStep.sections.reduce((e,t)=>({...e,...t.inputs}),{})},wording(){return{submit:"Étape suivante",error:"Certaines données saisies sont incorrectes",success:null,...this.currentStep.wording||{}}},filteredData(){const e=Object.keys(this.inputs);return e.filter(e=>this.isInputActive(this.inputs[e])).reduce((e,t)=>({...e,[t]:this.data[t]}),{})},filteredErrors(){return this.errors?Object.keys(this.errors.fields||{}).filter(e=>void 0!==this.inputs[e]).reduce((e,t)=>({...e,[t]:this.errors.fields[t]}),{}):null},numberOfFilteredErrors(){return this.filteredErrors?Object.keys(this.filteredErrors).length:0},submitPrefix(){return this.currentStep&&this.currentStep.submitPrefix}},watch:{value(){this.data=this.value},data(){this.onDataChange()}},methods:{submit(){this.currentStep.submit?!0!==this.pending&&(this.pending=!0,this.errors=null,this.currentStep.submit(this.filteredData,this.responses).then(e=>{null!==this.wording.success&&Qc({group:"notifications",type:"success",title:"Succès",text:this.wording.success}),this.$emit("stepcomplete",this.currentStepIndex,e),this.goToNextStep(e),this.pending=!1,this.errors=null}).catch(e=>{this.pending=!1,this.errors={main:e&&e.user_message||"erreur inconnue",fields:e&&e.fields||{}}})):this.goToNextStep(null)},goToNextStep(e){this.responses.push(e),this.currentStepIndex>=this.steps.length-1?this.$emit("complete",e,this.responses):this.currentStepIndex+=1},getInputById(e){return null===this.currentStep?null:this.inputs[e]||null},onDataChange(){this.refreshId+=1,this.$emit("input",this.data)},isInputActive(e){return!e.condition||e.condition(this.data)},isInputVisible(e){return this.isInputActive(e)||e.inactiveMessage},isInputDisabled(e){return!0===this.pending||!0===e.disabled||e.inactiveMessage&&!this.isInputActive(e)},getInputAlert(e){return e.inactiveMessage&&!this.isInputActive(e)?e.inactiveMessage:null}}},Yc=Jc,Zc=Yc,Kc=(i("f6ce"),Object(u["a"])(Zc,wr,Cr,!1,null,null,null)),Xc=Kc.exports,eu={components:{NavBar:yr,Form:Xc},data(){return{formData:{},formDefinition:{title:"Connexion à la plateforme",steps:[{sections:[{inputs:{email:{type:"text",label:"Votre courriel",mandatory:!0},password:{type:"password",label:"Votre mot de passe",mandatory:!0}}}],wording:{submit:"Me connecter",succes:"Vous êtes désormais connecté",error:"La tentative de connexion a échoué"},submitPrefix:'<a href="/#/nouveau-mot-de-passe">J\'ai perdu mon mot de passe</a>',submit:({email:e,password:t})=>Go(e,t)}]}}},methods:{onComplete(){window.localStorage.setItem("logged_once",!0),this.$router.push({path:"/"})}}},tu=eu,iu=tu,au=(i("f276"),Object(u["a"])(iu,_o,yo,!1,null,null,null)),su=au.exports,nu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PublicLayout",{staticClass:"contact",attrs:{stickyHeader:!1,displayLanguagePicker:!0}},[i("div",{staticClass:"bg-corail full-width text-center py-8"},[i("div",{staticClass:"max-w-3xl mx-auto"},[i("h1",{staticClass:"text-display-lg  text-white "},[e._v(" "+e._s(e.$t("contactPage.title"))+" ")])])]),i("PublicContainer",{staticClass:"py-16"},[i("div",{staticClass:"max-w-xl mx-auto"},[i("h2",{staticClass:"text-display-lg mb-4"},[e._v(" "+e._s(e.$t("contactPage.contactUs"))+" ")]),i("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit,s=t.errors;return[i("form",{staticClass:"max-w-xl mt-12",on:{submit:function(t){return t.preventDefault(),a(e.submitForm)}}},[i("InputGroup",[i("TextInput",{attrs:{label:e.$t("contactPage.email"),id:"email",validationName:"Email",rules:"required|email"},model:{value:e.commonFields.email,callback:function(t){e.$set(e.commonFields,"email",t)},expression:"commonFields.email"}}),i("TextInput",{attrs:{label:e.$t("contactPage.firstname"),id:"first_name",name:"Prénom",rules:"required"},model:{value:e.commonFields.first_name,callback:function(t){e.$set(e.commonFields,"first_name",t)},expression:"commonFields.first_name"}}),i("TextInput",{attrs:{label:e.$t("contactPage.lastname"),id:"last_name",name:"Nom de famille",rules:"required"},model:{value:e.commonFields.last_name,callback:function(t){e.$set(e.commonFields,"last_name",t)},expression:"commonFields.last_name"}})],1),i("CheckableGroup",{attrs:{label:e.$t("contactPage.requestType"),name:e.$t("contactPage.requestType"),id:"request_type",direction:"row"}},[i("Checkbox",{attrs:{checkValue:"help",label:e.$t("contactPage.help"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"report",label:e.$t("contactPage.report"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"help-request",label:e.$t("contactPage.requestHelp"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"info-request",label:e.$t("contactPage.requestInfo"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}}),i("Checkbox",{attrs:{checkValue:"access-request",label:e.$t("contactPage.requestAccess"),variant:"card"},model:{value:e.commonFields.request_type,callback:function(t){e.$set(e.commonFields,"request_type",t)},expression:"commonFields.request_type"}})],1),e.isRequestAccess?i("CheckableGroup",{attrs:{label:e.$t("contactPage.isActor"),info:e.$t("contactPage.actorExample"),rules:"required",id:"access_request",direction:"row"}},[i("Radio",{attrs:{checkValue:!0,label:e.$t("contactPage.yes"),variant:"card"},model:{value:e.commonFields.is_actor,callback:function(t){e.$set(e.commonFields,"is_actor",t)},expression:"commonFields.is_actor"}}),i("Radio",{attrs:{checkValue:!1,label:e.$t("contactPage.no"),variant:"card"},model:{value:e.commonFields.is_actor,callback:function(t){e.$set(e.commonFields,"is_actor",t)},expression:"commonFields.is_actor"}})],1):e._e(),e.isRequestAccessAndActor?i("CheckableGroup",{attrs:{label:e.$t("contactPage.whichEstablishment"),rules:"required",id:"is_actor"}},[i("Radio",{attrs:{checkValue:"public_establishment",label:e.$t("contactPage.public"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}}),i("Radio",{attrs:{checkValue:"territorial_collectivity",label:e.$t("contactPage.territorialCollectivity"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}}),i("Radio",{attrs:{checkValue:"association",label:e.$t("contactPage.association"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}}),i("Radio",{attrs:{checkValue:"administration",label:e.$t("contactPage.administration"),variant:"card"},model:{value:e.requestAccessFields.organization_category,callback:function(t){e.$set(e.requestAccessFields,"organization_category",t)},expression:"\n                                requestAccessFields.organization_category\n                            "}})],1):e._e(),e.isPublicEstablishmentRequest?i("PublicEstablishmentForm",{attrs:{organizationType:e.publicEstablishmentFields.organization_type,organizationTerritory:e.publicEstablishmentFields.organization_public,organizationFunction:e.requestAccessFields.position},on:{"update:organizationType":function(t){return e.$set(e.publicEstablishmentFields,"organization_type",t)},"update:organization-type":function(t){return e.$set(e.publicEstablishmentFields,"organization_type",t)},"update:organizationTerritory":function(t){return e.$set(e.publicEstablishmentFields,"organization_public",t)},"update:organization-territory":function(t){return e.$set(e.publicEstablishmentFields,"organization_public",t)},"update:organizationFunction":function(t){return e.$set(e.requestAccessFields,"position",t)},"update:organization-function":function(t){return e.$set(e.requestAccessFields,"position",t)}}}):e._e(),e.isTerritorialCollectivityRequest?i("TerritorialCollectivityForm",{attrs:{collectivityName:e.territorialCollectivityFields.territorial_collectivity,collectivityFunction:e.requestAccessFields.position},on:{"update:collectivityName":function(t){return e.$set(e.territorialCollectivityFields,"territorial_collectivity",t)},"update:collectivity-name":function(t){return e.$set(e.territorialCollectivityFields,"territorial_collectivity",t)},"update:collectivityFunction":function(t){return e.$set(e.requestAccessFields,"position",t)},"update:collectivity-function":function(t){return e.$set(e.requestAccessFields,"position",t)}}}):e._e(),e.isAssociationRequest?i("AssociationForm",{attrs:{associationName:e.associationFields.association,associationTerritory:e.associationFields.departement,associationFunction:e.associationFields.position,newAssociationName:e.associationFields.new_association_name,newAssociationAcronym:e.associationFields.new_association_abbreviation},on:{"update:associationName":function(t){return e.$set(e.associationFields,"association",t)},"update:association-name":function(t){return e.$set(e.associationFields,"association",t)},"update:associationTerritory":function(t){return e.$set(e.associationFields,"departement",t)},"update:association-territory":function(t){return e.$set(e.associationFields,"departement",t)},"update:associationFunction":function(t){return e.$set(e.associationFields,"position",t)},"update:association-function":function(t){return e.$set(e.associationFields,"position",t)},"update:newAssociationName":function(t){return e.$set(e.associationFields,"new_association_name",t)},"update:new-association-name":function(t){return e.$set(e.associationFields,"new_association_name",t)},"update:newAssociationAcronym":function(t){return e.$set(e.associationFields,"new_association_abbreviation",t)},"update:new-association-acronym":function(t){return e.$set(e.associationFields,"new_association_abbreviation",t)}}}):e._e(),e.isAdministrationRequest?i("AdministrationForm",{attrs:{administrationName:e.administrationFields.organization_administration,administrationFunction:e.requestAccessFields.position},on:{"update:administrationName":function(t){return e.$set(e.administrationFields,"organization_administration",t)},"update:administration-name":function(t){return e.$set(e.administrationFields,"organization_administration",t)},"update:administrationFunction":function(t){return e.$set(e.requestAccessFields,"position",t)},"update:administration-function":function(t){return e.$set(e.requestAccessFields,"position",t)}}}):e._e(),i("TextArea",{attrs:{rows:8,label:e.$t("contactPage.message"),id:"access_request_message"},model:{value:e.commonFields.access_request_message,callback:function(t){e.$set(e.commonFields,"access_request_message",t)},expression:"commonFields.access_request_message"}}),e._v(" "),i("CheckableGroup",{attrs:{validationName:"Accord",rules:"required",id:"legal"}},[i("Checkbox",{attrs:{checkValue:"confirm",label:e.$t("contactPage.legal")},model:{value:e.commonFields.legal,callback:function(t){e.$set(e.commonFields,"legal",t)},expression:"commonFields.legal"}})],1),Object.values(s).filter((function(e){return e.length})).length?i("div",{staticClass:"bg-red-200 p-3 mb-8"},[e._v(" "+e._s(e.$t("contactPage.error"))+" "),i("ul",{staticClass:"mt-4"},e._l(s,(function(t,a){return i("li",{directives:[{name:"show",rawName:"v-show",value:t.length,expression:"error.length"}],key:a},[i("router-link",{staticClass:"link",attrs:{to:{hash:a}}},[e._v(e._s(t[0]))])],1)})),0)]):e._e(),i("div",{staticClass:"flex justify-between mt-8"},[i("router-link",{attrs:{to:"/"}},[i("Button",{attrs:{variant:"primaryText"}},[e._v(e._s(e.$t("contactPage.cancel")))])],1),i("Button",{attrs:{type:"submit",variant:"primary",loading:e.loading}},[e._v(e._s(e.$t("contactPage.send")))])],1)],1)]}}])}),i("div",{staticClass:"text-display-md mt-32 mb-2"},[e._v(" "+e._s(e.$t("contactPage.share"))+" ")]),i("SocialShare",{staticClass:"mb-8"})],1)])],1)},ou=[];function ru(e){return Ao("/contact",e)}var lu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Select",{attrs:{label:"Précisez le type de structure",value:e.organizationType,rules:"required",id:"organization_type"},on:{input:function(t){return e.$emit("update:organizationType",t)}}},[i("SelectOption",{attrs:{value:"none"}},[e._v("- Selectionner un choix -")]),e._l(e.orgTypesOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],2),i("Select",{attrs:{label:"Territoire de rattachement",value:e.organizationTerritory,rules:"required",id:"organization_public"},on:{input:function(t){return e.$emit("update:organizationTerritory",t)}}},[i("SelectOption",[e._v("- Selectionner un choix -")]),e._l(e.orgTerritoryOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])}))],2),i("TextInput",{attrs:{label:"Votre fonction",value:e.organizationFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:organizationFunction",t)}}})],1)},cu=[];function uu(){return Oo("/organization-categories")}function du(e){return Oo(`/organization-categories/${e}/organization-types`)}function pu(e,t=null){return Oo(`/organization-categories/${e}/organizations${null!==t?"?search="+t:""}`)}function mu(e){return Oo(`/organization-types/${e}/organizations`)}function hu(e){return Oo(`/organizations/${e}/users`)}function vu(e,t,i){let a="";return void 0!==i?a="departementId="+encodeURIComponent(i):void 0!==t&&(a="regionId="+encodeURIComponent(t)),Oo(`/organization-categories/${e}/users?${a}`)}var fu={props:{organizationType:{required:!0},organizationTerritory:{required:!0},organizationFunction:{required:!0}},data(){return{orgTypesOptions:[],orgTerritoryOptions:[]}},async mounted(){const{types:e}=await du("public_establishment");this.orgTypesOptions=e.filter(({numberOfOrganizations:e})=>e>0).filter(({name_singular:e})=>"Gendarmerie nationale"!==e).map(({id:e,name_singular:t,abbreviation:i})=>({value:e,label:i||t}))},watch:{async organizationType(e){if("none"===e)return void(this.orgTerritoryOptions=[]);const{organizations:t}=await mu(e);this.orgTerritoryOptions=t.map(e=>{const t=e.location_type;let i=e[t+"_name"];return"nation"===t?i="France":"departement"===t&&(i=`${e[t+"_code"]} - ${e[t+"_name"]}`),{value:e.id,label:i}})}}},gu=fu,bu=Object(u["a"])(gu,lu,cu,!1,null,null,null),_u=bu.exports,yu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("InputWrapper",[i("InputLabel",{attrs:{label:"Nom de la structure"}}),i("ValidationProvider",{attrs:{rules:"required",name:"Nom de la structure",vid:"territorial_collectivity"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("div",{staticClass:"v1"},[i("Collectivity",{attrs:{value:e.collectivityName},on:{input:function(t){return e.$emit("update:collectivityName",t)}}})],1),i("InputError",[e._v(e._s(a[0]))])]}}])})],1),i("TextInput",{attrs:{label:"Votre fonction",value:e.collectivityFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:collectivityFunction",t)}}})],1)},wu=[],Cu={components:{InputLabel:ce,Collectivity:Ml,InputWrapper:ve,InputError:ye},props:{collectivityName:{required:!0},collectivityFunction:{required:!0}}},ku=Cu,xu=Object(u["a"])(ku,yu,wu,!1,null,null,null),Su=xu.exports,Pu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Select",{attrs:{label:"Précisez le type de structure",value:e.associationName,rules:"required",id:"association"},on:{input:function(t){return e.$emit("update:associationName",t)}}},[i("optgroup",{attrs:{label:"Autre"}},[i("option",{attrs:{value:"Autre"}},[e._v("Mon association n'est pas dans cette liste")])]),i("optgroup",{attrs:{label:"Associations connues"}},e._l(e.associationNameOptions,(function(t){return i("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])})),0)]),"Autre"===e.associationName?i("div",[i("TextInput",{attrs:{label:"Précisez le nom complet",value:e.newAssociationName,rules:"required",id:"new_association_name"},on:{input:function(t){return e.$emit("update:newAssociationName",t)}}}),i("TextInput",{attrs:{label:"Précisez l'acronyme, si besoin",value:e.newAssociationAcronym,id:"new_association_abbreviation"},on:{input:function(t){return e.$emit("update:newAssociationAcronym",t)}}})],1):e._e(),i("div",[i("Select",{attrs:{label:"Territoire de rattachement",value:e.associationTerritory,rules:"required",id:"departement"},on:{input:function(t){return e.$emit("update:associationTerritory",t)}}},[i("SelectOption",[e._v("- Selectionner un choix -")]),e._l(e.associationTerritoryOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])}))],2)],1),i("TextInput",{attrs:{label:"Votre fonction",value:e.associationFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:associationFunction",t)}}})],1)},$u=[],Tu={props:{associationName:{required:!0},associationTerritory:{required:!0},associationFunction:{required:!0},newAssociationName:{required:!0},newAssociationAcronym:{required:!0}},data(){return{associationNameOptions:[],associationTerritoryOptions:[]}},async mounted(){const[{organizations:e},{departements:t}]=await Promise.all([pu("association"),Rr()]),i=[];this.associationNameOptions=e.filter(e=>-1===i.indexOf(e.name)&&(i.push(e.name),!0)).map(({name:e,abbreviation:t})=>({value:e,label:null!==t?`${t} (${e})`:e})),this.associationTerritoryOptions=t.map(({code:e,name:t})=>({value:e,label:`${e} - ${t}`}))}},Iu=Tu,Ou=Object(u["a"])(Iu,Pu,$u,!1,null,null,null),Au=Ou.exports,Eu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Select",{attrs:{label:"Nom de la structure",value:e.administrationName,rules:"required",id:"organization_administration"},on:{input:function(t){return e.$emit("update:administrationName",t)}}},[i("SelectOption",{attrs:{value:"none"}},[e._v("- Selectionner un choix -")]),e._l(e.administrationNameOptions,(function(t){return i("SelectOption",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],2),i("TextInput",{attrs:{label:"Votre fonction",value:e.administrationFunction,rules:"required",id:"position"},on:{input:function(t){return e.$emit("update:administrationFunction",t)}}})],1)},Nu=[],qu={props:{administrationName:{required:!0},administrationFunction:{required:!0}},data(){return{administrationNameOptions:[]}},async mounted(){const{organizations:e}=await pu("administration");this.administrationNameOptions=e.map(({id:e,name:t})=>({value:e,label:t}))}},Du=qu,ju=Object(u["a"])(Du,Eu,Nu,!1,null,null,null),Mu=ju.exports,Lu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a",{attrs:{href:"https://www.facebook.com/sharer/sharer.php?u="+e.url,target:"_blank"}},[i("Icon",{staticClass:"text-display-lg",attrs:{icon:["fab","facebook-square"]}})],1),e._v(" "+e._s(" ")+" "),i("a",{attrs:{href:"http://www.twitter.com/share?url="+e.url,target:"_blank"}},[i("Icon",{staticClass:"text-display-lg",attrs:{icon:["fab","twitter-square"]}})],1)])},Fu=[],zu={computed:{url(){return encodeURIComponent("https://resorption-bidonvilles.beta.gouv.fr/#/contact")}}},Ru=zu,Bu=Object(u["a"])(Ru,Lu,Fu,!1,null,null,null),Vu=Bu.exports,Uu={components:{SocialShare:Vu,Checkbox:tt,CheckableGroup:zi,PublicContainer:es,PublicLayout:Os,PublicEstablishmentForm:_u,TerritorialCollectivityForm:Su,AdministrationForm:Mu,AssociationForm:Au},computed:{isFrenchLocale(){return"fr"===this.$i18n.locale},isRequestAccess(){return this.commonFields.request_type.includes("access-request")&&this.isFrenchLocale},isRequestAccessAndActor(){return this.isRequestAccess&&this.commonFields.is_actor},isPublicEstablishmentRequest(){return this.isRequestAccessAndActor&&"public_establishment"===this.requestAccessFields.organization_category},isTerritorialCollectivityRequest(){return this.isRequestAccessAndActor&&"territorial_collectivity"===this.requestAccessFields.organization_category},isAssociationRequest(){return this.isRequestAccessAndActor&&"association"===this.requestAccessFields.organization_category},isAdministrationRequest(){return this.isRequestAccessAndActor&&"administration"===this.requestAccessFields.organization_category}},methods:{async submitForm(){const e={...this.commonFields,legal:this.commonFields.legal.length>0,is_actor:!!this.commonFields.is_actor,...this.isRequestAccessAndActor?this.requestAccessFields:{},...this.isPublicEstablishmentRequest?this.publicEstablishmentFields:{},...this.isTerritorialCollectivityRequest?this.territorialCollectivityFields:{},...this.isAssociationRequest?this.associationFields:{},...this.isAdministrationRequest?this.administrationFields:{}};this.loading=!0;try{await ru(e),this.loading=!1,this.$router.push("/"),Qc({group:"notifications",type:"success",title:"Succès",text:this.isRequestAccessAndActor?"Votre demande d'accès a été envoyée":"Votre message a bien été envoyé"})}catch(t){this.loading=!1,this.error=t,this.$refs.form.setErrors(t.fields)}}},data(){return{loading:!1,error:null,commonFields:{email:this.$route.query.email||"",first_name:"",last_name:"",request_type:[],legal:[],is_actor:null,access_request_message:""},requestAccessFields:{organization_category:null,position:""},publicEstablishmentFields:{organization_type:null,organization_public:null},territorialCollectivityFields:{territorial_collectivity:null},associationFields:{association:"",departement:"",new_association_name:"",new_association_abbreviation:""},administrationFields:{organization_administration:""}}}},Hu=Uu,Gu=(i("65a2"),Object(u["a"])(Hu,nu,ou,!1,null,null,null)),Wu=Gu.exports,Qu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--dashboard"},[i("Quickview",{attrs:{town:e.quickview.town,origin:e.quickview.originEvent},on:{"outside-click":e.hideQuickview}}),i("POIView",{attrs:{poi:e.poiview.poi,origin:e.poiview.originEvent},on:{"outside-click":e.hidePOIView}}),i("NavBar"),i("section",{staticClass:"dashboard"},[i("simplebar",{ref:"filters",staticClass:"filters",attrs:{"data-simplebar-auto-hide":"false"}},e._l(e.allowedFilters,(function(e){return i("FilterGroup",{key:e.id,attrs:{id:e.id,faIcon:e.faIcon,icon:e.icon,label:e.label,options:e.options,opened:e.opened}})})),1),i("div",{ref:"main",staticClass:"content",style:{width:e.loading||e.error?0:"auto"}},[i("Map",e._b({ref:"map",on:{"town-click":e.showQuickview,"poi-click":e.showPOIView,"on-row-click":e.routeToTown}},"Map",e.rendererProps,!1))],1),e.loading?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),e.error?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.fetchData}},[e._v("Réessayer ?")])])]):e._e()],1)],1)])},Ju=[],Yu=i("8d3b"),Zu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filterGroup"},[i("aside",[null!==e.faIcon?i("font-awesome-icon",{attrs:{icon:e.faIcon}}):i("img",{attrs:{src:e.icon,alt:""}})],1),i("main",[i("h1",{on:{click:e.toggle}},[e._v(e._s(e.label)+" "),i("span",{staticClass:"filterGroup-toggle"},[e._v("( "+e._s(e.toggler)+" )")])]),e._l(e.options,(function(t,a){return"open"===e.status?i("div",{key:a},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"option.checked"}],attrs:{type:"checkbox",id:e.id+"-"+(t.id||a)},domProps:{value:t.value,checked:Array.isArray(t.checked)?e._i(t.checked,t.value)>-1:t.checked},on:{change:function(i){var a=t.checked,s=i.target,n=!!s.checked;if(Array.isArray(a)){var o=t.value,r=e._i(a,o);s.checked?r<0&&e.$set(t,"checked",a.concat([o])):r>-1&&e.$set(t,"checked",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(t,"checked",n)}}}),i("label",{staticClass:"label-inline",attrs:{for:e.id+"-"+(t.id||a)}},[void 0!==t.icon?i("font-awesome-icon",{style:{color:"#"+t.icon.color},attrs:{icon:t.icon.id,"fixed-width":""}}):e._e(),i("span",[e._v(e._s(t.label))])],1),i("br")]):e._e()}))],2)])},Ku=[],Xu={props:{id:String,icon:{type:String,required:!1,default:null},faIcon:{type:String,required:!1,default:null},label:String,options:Array,opened:{type:Boolean,default:!1}},data(){return{status:!0===this.opened?"open":"closed"}},computed:{toggler(){return"open"===this.status?"-":"+"}},methods:{toggle(){this.status="open"===this.status?"closed":"open"}}},ed=Xu,td=ed,id=(i("77c2"),Object(u["a"])(td,Zu,Ku,!1,null,null,null)),ad=id.exports,sd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"map"},[e.displaySearchbar?i("Address",{attrs:{placeholder:e.placeholder},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}):e._e(),i("div",{attrs:{id:"map"}},[i("div",{ref:"adressToggler",staticClass:"leaflet-address-toggler"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.showAddresses,expression:"showAddresses"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showAddresses)?e._i(e.showAddresses,null)>-1:e.showAddresses},on:{change:function(t){var i=e.showAddresses,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);a.checked?o<0&&(e.showAddresses=i.concat([n])):o>-1&&(e.showAddresses=i.slice(0,o).concat(i.slice(o+1)))}else e.showAddresses=s}}}),e._v(" Voir les adresses des sites ")]),i("div",{ref:"legends",staticClass:"leaflet-legend"},[i("h1",[e._v("Légende")]),e._l(e.fieldTypes,(function(t){return i("p",[i("span",{style:{"background-color":t.color}}),e._v(" "+e._s(t.label)+" ")])}))],2)])],1)},nd=[],od=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search__group"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.query,expression:"query",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:e.placeholder,autofocus:e.autofocus},domProps:{value:e.query},on:{keyup:e.onTyping,keydown:e.onNavigation,focus:e.onFocus,blur:[e.onBlur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.query=t.target.value.trim())}}}),e.suggestions.length?i("div",{staticClass:"autocomplete"},e._l(e.suggestions,(function(t,a){return i("p",{staticClass:"autocomplete-result",class:{active:a===e.indexOfHighlightedSuggestion},domProps:{innerHTML:e._s((t.type?"<span>"+t.type+"</span><br/>":"")+t.label)},on:{mousedown:function(i){return e.onSuggestionClick(t)}}})})),0):e._e(),e.showMagnifier?i("button",{staticClass:"overlay-button",attrs:{"aria-label":"Recherche"}},[i("svg",{staticClass:"icon icon-search"},[i("use",{attrs:{"xlink:href":"#magnifier"}})])]):e._e()])},rd=[];const ld=200,cd=3;var ud={props:{value:Object,autofocus:Boolean,placeholder:String,autocompleteFunction:{type:Function,default:Fr},showMagnifier:{type:Boolean,default:!0},typingMin:{type:Number,default:cd}},data(){return{pendingRequest:null,typingTimeout:null,suggestions:[],filled:null!==this.value,query:null!==this.value&&this.value.label||"",previousQuery:null!==this.value?this.value.label:"",focused:!1,indexOfHighlightedSuggestion:null}},mounted(){document.addEventListener("click",this.checkOutsideClick)},beforeDestroy(){null!==this.typingTimeout&&(clearTimeout(this.typingTimeout),this.typingTimeout=null)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{onTyping(){this.previousQuery!==this.query&&(this.previousQuery=this.query,null!==this.typingTimeout&&clearTimeout(this.typingTimeout),this.filled=!1,this.$emit("input",null),this.setSuggestions([]),this.indexOfHighlightedSuggestion=null,this.typingTimeout=setTimeout(this.autocomplete,ld))},onFocus(){this.focused=!0},onBlur(){this.focused=!1,null!==this.pendingRequest&&this.pendingRequest.abort(),!1===this.filled&&(this.query="",this.previousQuery=""),this.setSuggestions([])},onNavigation(e){38===e.keyCode?this.indexOfHighlightedSuggestion-1<0?this.indexOfHighlightedSuggestion=null:this.indexOfHighlightedSuggestion-=1:40===e.keyCode?this.suggestions.length>0&&(null===this.indexOfHighlightedSuggestion?this.indexOfHighlightedSuggestion=0:this.indexOfHighlightedSuggestion=Math.min(this.suggestions.length-1,this.indexOfHighlightedSuggestion+1)):13===e.keyCode?null!==this.indexOfHighlightedSuggestion&&this.onSelect(this.suggestions[this.indexOfHighlightedSuggestion]):this.indexOfHighlightedSuggestion=null},onSuggestionClick(e){this.onSelect(e)},onSelect(e){const{label:t}=e;this.$emit("input",e),this.setSuggestions([]),this.filled=!0,this.query=t,this.previousQuery=t},autocomplete(){null!==this.pendingRequest&&this.pendingRequest.abort(),this.query.length<this.typingMin||!0!==this.focused||(this.pendingRequest=this.autocompleteFunction(this.query),this.pendingRequest.then(e=>{!0===this.focused&&this.setSuggestions(e)}).catch(()=>{this.pendingRequest=null}))},checkOutsideClick(e){this.$el.contains(e.target)||this.setSuggestions([])},setSuggestions(e){this.suggestions=e,this.suggestions.length>0?this.indexOfHighlightedSuggestion=0:this.indexOfHighlightedSuggestion=null}}},dd=ud,pd=dd,md=(i("e072"),Object(u["a"])(pd,od,rd,!1,null,"6b423108",null)),hd=md.exports,vd=(i("8243"),i("3ac1"),i("7319"),i("67e3")),fd=i.n(vd),gd=i("71ee"),bd=i.n(gd),_d=i("64e1"),yd=i.n(_d),wd=i("0eac"),Cd=i.n(wd);const kd=[46.7755829,2.0497727],xd=13;var Sd={components:{Address:hd},props:{towns:{type:Array,required:!1,default(){return[]}},pois:{type:Array,required:!1,default(){return[]}},displaySearchbar:{type:Boolean,required:!1,default:!0},placeholder:{type:String,required:!1,default:"Recherchez un lieu en saisissant une adresse"},defaultView:{type:Object,default:()=>({center:kd,zoom:6})}},data(){return{map:null,markersGroup:{towns:ha.a.markerClusterGroup(),search:ha.a.markerClusterGroup(),pois:ha.a.markerClusterGroup({disableClusteringAtZoom:xd})},searchMarker:this.createSearchMarker(),townSearchMarker:null,townMarkers:[],poiMarkers:[],poiMarkersVisible:!1,hashedTownMarkers:{},address:null,showAddresses:!1,fieldTypes:zo().field_types}},computed:{fieldTypeColors(){return this.fieldTypes?this.fieldTypes.reduce((e,t)=>Object.assign(e,{[t.id]:t.color}),{}):{}},mapLayers(){return{Satellite:ha.a.tileLayer.provider("Esri.WorldImagery"),Dessin:ha.a.tileLayer.provider("OpenStreetMap.Mapnik")}}},watch:{towns(){this.syncTownMarkers()},pois(){this.syncPOIMarkers()},showAddresses(){!0===this.showAddresses?document.body.setAttribute("class","leaflet-show-addresses"):document.body.setAttribute("class","")},address(){if(null===this.address)return void this.clearSearchMarker();const{coordinates:[e,t],label:i,addressType:a}=this.address;this.centerMap([t,e],20),this.$nextTick(()=>{this.setSearchMarker(a,i,[t,e])})}},mounted(){this.createMap(),this.syncTownMarkers()},methods:{setupMapControls(){this.setupZoomControl(),this.setupLayersControl(),this.setupAddressTogglerControl(),this.setupFieldTypesLegendControl()},setupZoomControl(){this.map.zoomControl.setPosition("bottomright")},setupLayersControl(){const e=ha.a.control.layers(this.mapLayers,void 0,{collapsed:!1});this.map.addControl(e)},setupAddressTogglerControl(){const{adressToggler:e}=this.$refs,t=ha.a.Control.extend({options:{position:"bottomleft"},onAdd(){return e}});this.map.addControl(new t)},setupFieldTypesLegendControl(){const{legends:e}=this.$refs,t=ha.a.Control.extend({options:{position:"bottomleft"},onAdd(){return e}});this.map.addControl(new t)},setupMarkerGroups(){this.map.addLayer(this.markersGroup.towns),this.map.addLayer(this.markersGroup.search),this.map.addLayer(this.markersGroup.pois)},setupView(){const{center:e,zoom:t}=this.defaultView;this.centerMap(e,t)},createMap(){this.map=ha.a.map("map",{layers:this.mapLayers.Dessin,scrollWheelZoom:!1}),this.map.on("zoomend",this.onZoomEnd),this.setupMapControls(),this.setupMarkerGroups(),this.setupView()},onZoomEnd(){const e=this.map.getZoom();!this.poiMarkersVisible&&e>xd&&(this.poiMarkersVisible=!0,this.pois.forEach(this.createPOIMarker)),this.poiMarkersVisible&&e<=xd&&(this.poiMarkersVisible=!1,this.removeAllPOIMarkers())},syncTownMarkers(){this.removeAllTownMarkers(),this.towns.forEach(this.createTownMarker)},syncPOIMarkers(){this.removeAllPOIMarkers(),this.poiMarkersVisible&&this.pois.forEach(this.createPOIMarker)},removeAllTownMarkers(){this.markersGroup.towns.clearLayers(),this.townMarkers=[],this.hashedTownMarkers={}},removeAllPOIMarkers(){this.markersGroup.pois.clearLayers(),this.poiMarkers=[]},getTownAddress(e){return e.usename},getTownCoordinates(e){const{latitude:t,longitude:i}=e;return[t,i]},getTownColor(e){return void 0!==e.fieldType?this.fieldTypeColors[e.fieldType.id]:"#cccccc"},getTownWaterImage(e){return!0===e.accessToWater?fd.a:!1===e.accessToWater?yd.a:Cd.a},createSearchMarker(){return ha.a.marker(kd,{title:"A",icon:ha.a.divIcon({className:"leaflet-marker",html:'<span class="mapPin mapPin--result">\n                        <span class="mapPin-wrapper">\n                            <span class="mapPin-marker" style="background-color: red"></span>\n                        </span>\n                        <span class="mapPin-address"></span>\n                    </span>',iconAnchor:[13,28]})})},createTownMarker(e){const t=this.getTownAddress(e),i=this.getTownCoordinates(e),a=this.getTownColor(e),s=this.getTownWaterImage(e),n=ha.a.marker(i,{title:e.address,icon:ha.a.divIcon({className:"leaflet-marker",html:`<span class="mapPin mapPin--shantytown">\n                        <span class="mapPin-wrapper">\n                            <span class="mapPin-water"><img src="${s}" /></span>\n                            <span class="mapPin-marker" style="background-color: ${a}"></span>\n                        </span>\n                        <span class="mapPin-address">${t}</span>\n                    </span>`,iconAnchor:[13,28]})});n.on("click",this.handleTownMarkerClick.bind(this,e)),n.on("add",()=>{!0===n.searchResult&&this.markTownAsSearchResult(n)}),n.addTo(this.markersGroup.towns),this.townMarkers.push(n),this.hashedTownMarkers[i.join(";")]=n},createPOIMarker(e){const{latitude:t,longitude:i}=e,a=[t,i],s=ha.a.marker(a,{title:e.address,icon:ha.a.divIcon({className:"leaflet-marker",html:`<span class="mapPin mapPin--poi" >\n                        <span class="mapPin-wrapper">\n                            <img src="${bd.a}" width="12" height="12"/>\n                        </span>\n                        <span class="mapPin-address">${e.address}</span>\n                    </span>`,iconAnchor:[13,28]})});s.on("click",this.handlePOIMarkerClick.bind(this,e)),s.addTo(this.markersGroup.pois),this.poiMarkers.push(s)},handleTownMarkerClick(e,t){this.$emit("town-click",e,t)},handlePOIMarkerClick(e,t){this.$emit("poi-click",e,t)},centerMap(e,t){this.map.setView(e,t)},resize(){null!==this.map&&this.map.invalidateSize(!0)},clearSearchMarker(){if(null!==this.townSearchMarker)return this.townSearchMarker._icon&&this.townSearchMarker._icon.querySelector(".mapPin").classList.remove("mapPin--result"),this.townSearchMarker.searchResult=!1,void(this.townSearchMarker=null);this.searchMarker.remove()},getMatchingTownMarker(e){return this.hashedTownMarkers[e.join(";")]||null},markTownAsSearchResult(e){this.townSearchMarker=e,this.townSearchMarker.searchResult=!0,e._icon.querySelector(".mapPin").classList.add("mapPin--result")},setSearchMarker(e,t,i){this.clearSearchMarker();const a=this.getMatchingTownMarker(i);if(null!==a)return void this.markTownAsSearchResult(a);this.searchMarker.addTo(this.markersGroup.search),this.searchMarker.setLatLng(i),this.searchMarker._icon.querySelector(".mapPin-address").innerHTML=t;let s="add";"housenumber"!==e&&(s="remove"),this.searchMarker._icon.querySelector(".mapPin").classList[s]("mapPin--street")}}},Pd=Sd,$d=Pd,Td=(i("6613"),Object(u["a"])($d,sd,nd,!1,null,"055bfb64",null)),Id=Td.exports,Od=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{active:e.active}},[i("div",{staticClass:"shadow"}),i("simplebar",{ref:"quickviewPanel",staticClass:"quickview",attrs:{"data-simplebar-auto-hide":"false"}},[e.town?i("header",{staticClass:"quickview-header"},[i("div",{staticClass:"quickview-actions"},[i("button",{staticClass:"actionButton",attrs:{type:"button"},on:{click:e.showTown}},[e._v("Voir le site")]),i("a",{attrs:{href:"#"},on:{click:function(t){return e.$emit("outside-click")}}},[i("svg",{staticClass:"icon icon-cross"},[i("use",{attrs:{"xlink:href":"#round-cross"}})])])]),i("h1",{staticClass:"quickview-title"},[i("a",{on:{click:e.showTown}},[e._v(e._s(e.town.address.split(/[0-9]{5}/)[0].replace(/[0-9]/g,"").replace(/,/g," ").replace(/\s{2,}/g," ")))])]),i("h2",{staticClass:"quickview-subtitle"},[e._v("Site de "+e._s(e.town.city.name))]),e.town.name?i("h2",{staticClass:"quickview-name"},[e._v(e._s(e.town.name))]):e._e(),void 0!==e.town.updatedAt?i("h2",{staticClass:"quickview-time"},[e._v("(Dernière modification le "),i("time",[e._v(e._s(e.formatDate(e.town.updatedAt)))]),e._v(")")]):e._e()]):e._e(),e._l(e.sections,(function(t,a){return i("section",{class:{even:a%2!==0}},[i("header",[i("h1",[e._v(e._s(t.title))])]),i("table",[i("tbody",e._l(t.rows,(function(t){return i("tr",[t.label?i("th",[e._v(e._s(t.label)+" :")]):e._e(),i("td",{attrs:{colspan:t.label?1:2}},[e._v(e._s(t.value))])])})),0)])])}))],2)],1)},Ad=[],Ed={components:{simplebar:Yu["a"]},props:{town:Object,origin:Event},computed:{active(){return!!this.town},caracteristicSection(){if(!this.town)return null;const e=[];return void 0!==this.town.fieldType&&e.push({label:"Type de site",value:this.town.fieldType.label}),void 0!==this.town.ownerType&&e.push({label:"Type de propriétaire",value:this.town.ownerType.label}),void 0!==this.town.builtAt&&e.push({label:"Date d'installation",value:this.town.builtAt?App.formatDate(this.town.builtAt):"Inconnue"}),0===e.length?null:{title:"Caractéristiques",rows:e}},demographySection(){if(!this.town)return null;const e=[];return void 0!==this.town.populationTotal&&e.push({label:"Nombre de personnes",value:null!==this.town.populationTotal?this.town.populationTotal:"inconnu"}),void 0!==this.town.populationCouples&&e.push({label:"Nombre de ménages",value:null!==this.town.populationCouples?this.town.populationCouples:"inconnu"}),void 0!==this.town.populationMinors&&e.push({label:"Nombre de mineurs",value:null!==this.town.populationMinors?this.town.populationMinors:"inconnu"}),void 0!==this.town.populationMinors0To3&&e.push({label:"Nombre de mineurs (0-3 ans)",value:null!==this.town.populationMinors0To3?this.town.populationMinors0To3:"inconnu"}),void 0!==this.town.populationMinors3To6&&e.push({label:"Nombre de mineurs (3-6 ans)",value:null!==this.town.populationMinors3To6?this.town.populationMinors3To6:"inconnu"}),void 0!==this.town.populationMinors6To12&&e.push({label:"Nombre de mineurs (6-12 ans)",value:null!==this.town.populationMinors6To12?this.town.populationMinors6To12:"inconnu"}),void 0!==this.town.populationMinors12To16&&e.push({label:"Nombre de mineurs (12-16 ans)",value:null!==this.town.populationMinors12To16?this.town.populationMinors12To16:"inconnu"}),void 0!==this.town.populationMinors16To18&&e.push({label:"Nombre de mineurs (16-18 ans)",value:null!==this.town.populationMinors16To18?this.town.populationMinors16To18:"inconnu"}),void 0!==this.town.minorsInSchool&&e.push({label:"Nombre d'enfants inscrits dans un établissement scolaire",value:null!==this.town.minorsInSchool?this.town.minorsInSchool:"inconnu"}),void 0!==this.town.socialOrigins&&(e.push({label:"Origines",value:this.town.socialOrigins.length>0?"":"inconnu"}),this.town.socialOrigins.forEach(t=>{e.push({value:t.label})})),0===e.length?null:{title:"Habitants",rows:e}},justiceSection(){if(!this.town)return null;const e=[],t={[!0]:"oui",[!1]:"non"};if(void 0!==this.town.justiceProcedure&&e.push({label:"Existence d'une procédure judiciaire",value:t[this.town.justiceProcedure]||"inconnu"}),void 0!==this.town.justiceRendered&&e.push({label:"Décision de justice rendue",value:t[this.town.justiceRendered]||"inconnu"}),void 0!==this.town.policeStatus){const t={none:"non demandé",requested:"demandé",granted:"obtenu"};e.push({label:"Concours de la force publique demandé",value:t[this.town.policeStatus]||"inconnu"})}return 0===e.length?null:{title:"Procédure judiciaire d'expulsion",rows:e}},sections(){return[this.caracteristicSection,this.demographySection,this.justiceSection].filter(e=>null!==e)}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{hasPermission:Vo,formatDate:e=>App.formatDate(e),checkOutsideClick(e){this.town&&e!==this.origin&&(this.$refs.quickviewPanel.$el.contains(e.target)||this.$emit("outside-click",e))},showTown(){const e=this.$router.resolve("/site/"+this.town.id);xo(e.href)}}},Nd=Ed,qd=Nd,Dd=(i("e119"),Object(u["a"])(qd,Od,Ad,!1,null,"12c43bda",null)),jd=Dd.exports,Md=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{active:e.active}},[i("div",{staticClass:"shadow"}),i("simplebar",{ref:"quickviewPanel",staticClass:"quickview",attrs:{"data-simplebar-auto-hide":"false"}},[e.poi?i("header",{staticClass:"quickview-header"},[i("div",{staticClass:"px-4"},[i("div",{staticClass:"text-right"},[i("a",{attrs:{href:"#"},on:{click:function(t){return e.$emit("outside-click")}}},[i("svg",{staticClass:"icon icon-cross"},[i("use",{attrs:{"xlink:href":"#round-cross"}})])])]),i("h1",{staticClass:"quickview-title"},[e._v(" Point de distribution alimentaire ")]),i("div",{staticClass:"text-G600 uppercase text-sm my-2 "},[e._v(" source: soliguide.fr ")]),e.poi.name?i("h4",{staticClass:"my-4"},[e._v(" "+e._s(e.poi.name)+" ")]):e._e(),e.poi.address?i("div",[e._v(" "+e._s(e.poi.address)+" ")]):e._e(),e.poi.phone?i("div",{staticClass:"my-2"},[e._v(" Tel: "+e._s(e.poi.phone)+" ")]):e._e(),e.poi.email?i("div",{staticClass:"my-2"},[e._v(" Email: "+e._s(e.poi.email)+" ")]):e._e(),e.poi.language?i("div",{staticClass:"my-2"},[e._v(" Langue: "+e._s(e.poi.language)+" ")]):e._e(),e.poi.temporarily_closed?i("div",{staticClass:"my-2"},[e._v(" "+e._s(e.poi.temporarily_closed)+" ")]):e._e(),e.poi.temporary_information?i("div",{staticClass:"my-2"},[e._v(" "+e._s(e.poi.temporary_information)+" ")]):e._e(),e.poi.solinum_id?i("a",{staticClass:"my-2",attrs:{target:"_blank",href:"https://soliguide.fr/fiche/"+e.poi.solinum_id},on:{click:e.trackOpenSoliguide}},[e._v(" Voir plus ")]):e._e()])]):e._e()])],1)},Ld=[],Fd={components:{simplebar:Yu["a"]},props:{poi:Object,origin:Event},computed:{active(){return!!this.poi}},mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},watch:{active:function(e){e&&this.trackOpenPOI()}},methods:{trackOpenPOI(){this.$piwik.trackEvent("POI","Open POI",this.poi.solinum_id)},trackOpenSoliguide(){this.$piwik.trackEvent("POI","Click See More",this.poi.solinum_id)},checkOutsideClick(e){this.poi&&e!==this.origin&&(this.$refs.quickviewPanel.$el.contains(e.target)||this.$emit("outside-click",e))}}},zd=Fd,Rd=(i("1c7c"),Object(u["a"])(zd,Md,Ld,!1,null,"263a7bb8",null)),Bd=Rd.exports;function Vd(){return Oo("/pois")}var Ud=i("6ecd"),Hd=i.n(Ud),Gd=i("9934"),Wd=i.n(Gd),Qd=i("597c"),Jd=i.n(Qd),Yd=i("d89d"),Zd=i.n(Yd);function Kd(e){switch(e){case"nation":case"region":return 6;default:case"departement":case"epci":case"city":return 10}}var Xd={components:{NavBar:yr,FilterGroup:ad,Map:Id,Quickview:jd,POIView:Bd,simplebar:Yu["a"]},data(){const{user:e}=zo();return{error:void 0,loading:!1,defaultMapView:{center:[e.organization.location.latitude,e.organization.location.longitude],zoom:Kd(e.organization.location.type)},towns:[],pois:[],quickview:{town:null,originEvent:null},poiview:{poi:null,originEvent:null},permission:Bo("shantytown.list"),filters:[{faIcon:"tint",label:"Accès à l'eau",id:"accessToWater",options:[{value:!0,label:"Oui",checked:!0,icon:{id:"tint",color:"00a0e3"}},{value:!1,label:"Non",checked:!0,icon:{id:"tint-slash",color:"ADB9C9"}},{value:null,label:"Inconnu",checked:!0,icon:{id:"question",color:"ADB9C9"}}],opened:!0},{icon:Hd.a,label:"Types de site",id:"fieldType",options:[],opened:!0},{icon:Wd.a,label:"Nombre de personnes",id:"population",options:[{value:null,label:"Inconnu",checked:!0},{value:"-9",label:"Moins de 10 personnes",checked:!0},{value:"10-99",label:"Entre 10 et 99 personnes",checked:!0},{value:"100-",label:"100 personnes et plus",checked:!0}]},{icon:Jd.a,label:"Statut des sites",id:"status",options:[{value:"closed",label:"Disparus",checked:!1},{value:"opened",label:"Existants",checked:!0}]},{icon:Wd.a,label:"Type de propriétaire",id:"ownerType",options:zo().owner_types.map(e=>({value:e.id,label:e.label,checked:!0}))},{icon:Zd.a,label:"Points d'intérêts",id:"poi",options:[{value:"food_bank",label:"Distribution alimentaire",checked:!0}],opened:!0}]}},computed:{allowedFilters(){return this.permission?this.filters.filter(e=>!e.permissions||e.permissions.every(e=>this.permission[e])):[]},rendererProps(){return{towns:this.visibleTowns,pois:this.visiblePOIs,defaultView:this.defaultMapView}},visiblePOIs(){let e=this.pois;return this.allowedFilters.forEach(t=>{switch(t.id){case"poi":e=e.filter(()=>t.options[0].checked);break;default:}}),e},visibleTowns(){let e=this.towns;return this.allowedFilters.forEach(t=>{switch(t.id){case"accessToWater":{const i=t.options.filter(e=>e.checked).map(e=>e.value);e=e.filter(e=>-1!==i.indexOf(e.accessToWater))}break;case"fieldType":{const i=t.options.filter(e=>e.checked).map(e=>e.value);e=e.filter(e=>e.fieldType&&-1!==i.indexOf(e.fieldType.id))}break;case"population":{const i=t.options.filter(e=>!e.checked).map(e=>e.value);i.forEach(t=>{if(null===t)return void(e=e.filter(e=>null!==e.populationTotal));let[i,a]=t.split("-");i=parseInt(i,10),a=parseInt(a,10),e=e.filter(e=>null===e.populationTotal||(Number.isNaN(i)||Number.isNaN(a)?Number.isNaN(i)?!!Number.isNaN(a)||e.populationTotal>a:e.populationTotal<i:e.populationTotal<i||e.populationTotal>a))})}break;case"status":{const i=t.options.filter(e=>!e.checked).map(e=>e.value);i.forEach(t=>{"closed"===t?e=e.filter(e=>"open"===e.status):"opened"===t&&(e=e.filter(e=>"open"!==e.status))})}break;case"ownerType":{const i=t.options.filter(e=>e.checked).map(e=>e.value);e=e.filter(e=>e.ownerType&&-1!==i.indexOf(e.ownerType.id))}break;default:}}),e}},created(){this.fetchData()},mounted(){window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)},methods:{sortNumber(e,t){return"inconnu"===e&&"inconnu"===t?0:"inconnu"===e?-1:"inconnu"===t?1:e<t?-1:e>t?1:0},showQuickview(e,t){this.quickview={town:e,originEvent:t.originalEvent}},showPOIView(e,t){this.poiview={poi:e,originEvent:t.originalEvent}},hideQuickview(){this.quickview={town:null,originEvent:null}},hidePOIView(){this.poiview={town:null,originEvent:null}},routeToTown(e){const t=this.$router.resolve("/site/"+e.row.id);xo(t.href)},resize(){this.$refs.main&&(this.stretchToBottom(this.$refs.main),this.stretchToBottom(this.$refs.filters.$el))},stretchToBottom(e){const t=e.offsetHeight,i=t+(document.body.offsetHeight-(this.absoluteOffsetTop(e)+t));e.style.height=i+"px"},absoluteOffsetTop(e){let t=0,i=e;do{t+=i.offsetTop||0,i=i.offsetParent}while(i);return t},fetchData(){!0!==this.loading&&(this.loading=!0,this.error=void 0,Promise.all([dl(),Vd()]).then(([e,t])=>{const{field_types:i}=zo();this.loading=!1;const a=this.filters.filter(({id:e})=>"fieldType"===e)[0];a.options=[...i.map(e=>({id:e.id,value:e.id,label:e.label,checked:!0}))],this.towns=e,this.pois=t,this.$nextTick(()=>{this.resize(),this.$refs.map.resize()})}).catch(e=>{this.error=e.user_message,this.loading=!1}))}}},ep=Xd,tp=ep,ip=(i("669e"),Object(u["a"])(tp,Qu,Ju,!1,null,null,null)),ap=ip.exports,sp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[e.error?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.loadConfig}},[e._v("Réessayer ?")])])]):i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Initialisation de la plateforme en cours...")])])])])],1)},np=[],op={data(){return{error:null}},components:{NavBar:yr},mounted(){this.loadConfig()},methods:{loadConfig(){!0!==Mo()?(this.error=null,Lo().then(()=>{this.redirect()}).catch(e=>{this.error=e.user_message})):this.redirect()},redirect(){const{user:e}=zo();this.track(e),this.$router.push(w$())},track(e){this.$piwik&&(this.$piwik.setUserId(e.id),this.$piwik.setCustomVariable(1,"superuser",e.is_superuser),this.$piwik.setCustomVariable(2,"structure",e.organization.type.abbreviation||e.organization.type.name_singular),this.$piwik.setCustomVariable(3,"niveau_geo",e.organization.location.type),this.$piwik.setCustomVariable(4,"geo_nom",e.organization.location[e.organization.location.type]?e.organization.location[e.organization.location.type].name:null))}}},rp=op,lp=rp,cp=Object(u["a"])(lp,sp,np,!1,null,null,null),up=cp.exports,dp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PrivateLayout",[e.exportIsVisible?i("Export",{attrs:{towns:[],location:e.currentLocation,closedTowns:"open"!==e.filters.status},on:{close:e.hideExport}}):e._e(),i("div",{staticClass:"bg-G100 print:hidden"},[i("PrivateContainer",{staticClass:"py-6"},[i("h1",{staticClass:"text-display-md text-center mb-4"},[e._v(" Rechercher une commune, un département... ? ")]),i("TownsListSearchBar",{attrs:{value:e.filters.location},on:{input:function(t){return e.updateFilters("location",t)}}})],1)],1),i("PrivateContainer",{staticClass:"pt-10"},[i("TownsListHeader",{staticClass:"mb-6",attrs:{search:e.filters.location}},[i("template",{slot:"filters"},[i("TownsListHeaderTab",{staticClass:"mr-8",attrs:{active:"open"===e.filters.status},on:{click:e.onClickOpenTab}},[e._v("Sites existants")]),i("TownsListHeaderTab",{attrs:{active:"close"===e.filters.status},on:{click:e.onClickCloseTab}},[e._v("Sites fermés")])],1),i("template",{slot:"title"},[i("div",{staticClass:"text-display-xl mb-2"},[e._v(e._s(e.title))]),e.isLoading?e._e():i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"mr-4"},[i("img",{attrs:{src:e.locationImg,width:"80",height:"80"}})]),i("div",[i("div",[i("div",[e._v(e._s(e.populationTotal)+" personnes")]),i("div",[e._v(" "+e._s(e.filteredShantytowns.length)+" sites ")]),e.hasJusticePermission&&e.justiceTotal?i("div",[e._v(" "+e._s(e.justiceTotal)+" site(s) avec une procédure judiciaire ")]):e._e()])])])]),i("template",{slot:"buttons"},[i("Button",{staticClass:"mr-6 mb-2 md:mb-0",attrs:{icon:"print",iconPosition:"left",variant:"primaryOutline"},on:{click:e.togglePrintModal}},[e._v("Imprimer")]),e.hasPermission("shantytown.export")?i("Button",{staticClass:"mr-6 mb-2 md:mb-0",attrs:{icon:"file-excel",iconPosition:"left",variant:"primary",disabled:0===e.filteredShantytowns.length},on:{click:e.showExport}},[e._v("Exporter")]):e._e(),e.hasPermission("shantytown.create")?i("router-link",{attrs:{to:"/nouveau-site"}},[i("Button",{staticClass:"whitespace-no-wrap",attrs:{icon:"plus",iconPosition:"left",variant:"secondary"}},[e._v(" Déclarer un nouveau site")])],1):e._e()],1)],2),e.isLoading?i("div",{staticClass:"text-center text-primary text-display-lg mt-16"},[i("Spinner")],1):i("div",[i("div",{staticClass:"md:flex items-end mb-4 justify-between print:hidden"},[i("TownsListFilters",[i("TownsListFilter",{staticClass:"mr-2 mb-2",attrs:{title:"Type de sites",value:e.filters.fieldType,options:e.fieldTypes.map((function(e){return{label:e.label,value:e.id}}))},on:{input:function(t){return e.updateFilters("fieldType",t)}}}),i("TownsListFilter",{staticClass:"mr-2 mb-2",attrs:{title:"Nombre de personnes",value:e.filters.population,options:[{value:null,label:"Inconnu"},{value:"-9",label:"Moins de 10 personnes"},{value:"10-99",label:"Entre 10 et 99 personnes"},{value:"100-",label:"Plus de 100 personnes"}]},on:{input:function(t){return e.updateFilters("population",t)}}}),i("TownsListFilter",{staticClass:"mr-2 mb-2",attrs:{title:"Origines",value:e.filters.origin,options:[{value:1,label:"Français"},{value:2,label:"Union européenne"},{value:3,label:"Hors Union européenne"},{value:null,label:"Inconnue"}]},on:{input:function(t){return e.updateFilters("origin",t)}}}),i("TownsListFilter",{staticClass:"mr-2 mb-2",attrs:{title:"Conditions de vie",value:e.filters.conditions,options:[{value:"accessToWater",label:"eau"},{value:"accessToSanitary",label:"toilettes"},{value:"accessToElectricity",label:"électricité"},{value:"accessToTrash",label:"évac. des déchets"},{value:"vermin",label:"pres. de nuisibles"},{value:"firePreventionMeasures",label:"prev. incendie"}]},on:{input:function(t){return e.updateFilters("conditions",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.label;return[i("div",{staticClass:"text-red flex items-center"},[i("div",{staticClass:"mr-2"},[i("Icon",{attrs:{icon:"times"}}),e._v("/"),i("Icon",{staticClass:"text-xs",attrs:{icon:"question"}})],1),e._v(" "+e._s(a)+" ")])]}}],null,!1,1485956960)}),e.hasJusticePermission?i("TownsListFilter",{staticClass:"mr-2 mb-2",attrs:{title:"Procédure judiciaire",value:e.filters.justice,options:[{value:null,label:"Inconnu"},{value:"none",label:"Aucune"},{value:"ownerComplaint",label:"Plainte déposée"},{value:"justiceProcedure",label:"Procédure en cours"},{value:"justiceRendered",label:"Décision rendue"}]},on:{input:function(t){return e.updateFilters("justice",t)}}}):e._e()],1),i("TownsListSort",{staticClass:"mb-2",attrs:{value:e.sort,status:e.filters.status},on:{input:e.updateSort}})],1),i("div",[e._l(e.printMode?e.filteredShantytowns:e.filteredShantytownsByPage,(function(t){return i("TownCard",{key:t.id,staticClass:"mb-6",attrs:{shantytown:t,hasJusticePermission:e.hasJusticePermission}})})),i("div",{staticClass:"flex flex-end mb-12 print:hidden"},[e.nbPages>1?i("Pagination",{staticClass:"mt-2 md:mt-0 ml-auto ",attrs:{currentPage:e.currentPage,nbPages:e.nbPages,onChangePage:e.onChangePage}}):e._e()],1)],2),e.filteredShantytowns.length?e._e():i("div",{staticClass:"text-center text-G600 italic pt-4"},[e._v(" Aucun site ne correspond à votre recherche, essayez d'autres filtres ou périmètre géographique ")])])],1)],1)},pp=[],mp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container px-10 mx-auto print:px-0 print:max-w-none"},[e._t("default")],2)},hp=[],vp={},fp=Object(u["a"])(vp,mp,hp,!1,null,null,null),gp=fp.exports,bp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"v1 print:hidden"},[i("NavBar")],1),e._t("default")],2)},_p=[],yp={components:{NavBar:yr}},wp=yp,Cp=Object(u["a"])(wp,bp,_p,!1,null,null,null),kp=Cp.exports,xp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["rounded-sm cursor-pointer border preventPrintBreak",e.isHover?"bg-blue100 border-transparent":""],on:{mouseenter:function(t){e.isHover=!0},mouseleave:function(t){e.isHover=!1}}},[i("router-link",{attrs:{to:"site/"+e.shantytown.id}},[i("div",{staticClass:"pt-6"},[i("div",{staticClass:"text-md px-6"},[i("div",{staticClass:"text-primary text-display-md "},[i("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.shantytown.addressSimple)+" "),e.shantytown.name?i("span",[e._v("« "+e._s(e.shantytown.name)+" »")]):e._e()]),i("span",{staticClass:"font-normal"},[e._v(" "+e._s(e.shantytown.city.name)+" ")])])]),i("div",{staticClass:"md:grid print:grid cardGridTemplateColumns gap-10 px-6 py-4"},[i("div",[i("div",{staticClass:"flex items-center customAlign"},[i("Icon",{staticClass:"text-lg",style:"color: "+e.shantytown.fieldType.color,attrs:{icon:"map-marker-alt"}}),i("div",{staticClass:"font-bold ml-2"},[e._v(" "+e._s(e.shantytown.fieldType.label)+" ")])],1),i("div",{staticClass:"ml-5"},[i("div",[e._v(" "+e._s(e.shantytown.statusName)+" depuis "),i("br"),i("span",{staticClass:"font-bold"},[e._v(e._s(e.shantytown.statusSince))])])])]),i("div",[null===e.shantytown.populationTotal?i("div",{staticClass:"font-bold"},[e._v(" Population inconnue ")]):i("div",{staticClass:"text-lg font-bold flex items-center"},[i("div",{staticClass:"mr-2"},[e._v(" "+e._s(e.shantytown.populationTotal)+" ")]),i("div",[i("Icon",{attrs:{icon:"male"}}),e._v(e._s(" ")+" "),e.shantytown.populationTotal>=25?i("span",[i("Icon",{attrs:{icon:"male"}}),e._v(e._s(" "))],1):e._e(),e.shantytown.populationTotal>=75?i("span",[i("Icon",{attrs:{icon:"male"}}),e._v(e._s(" "))],1):e._e(),e.shantytown.populationTotal>=100?i("span",[i("Icon",{attrs:{icon:"male"}})],1):e._e()],1)]),i("div",[e.shantytown.socialOrigins.length?e._l(e.shantytown.socialOrigins,(function(t){return i("div",{key:t.id,staticClass:"flex"},[i("img",{staticClass:" w-6 h-4 mr-2 mt-1",attrs:{src:e.socialOrigin(t).img}}),i("div",[e._v(e._s(e.socialOrigin(t).label))])])})):i("div",{staticClass:"text-G600"},[e._v(" Origine : inconnue ")])],2)]),i("div",[i("div",[i("TownCardIcon",{attrs:{value:e.shantytown.accessToWater,details:e.details.water}},[e._v("eau")]),i("TownCardIcon",{attrs:{value:e.shantytown.accessToSanitary,details:e.details.sanitary}},[e._v("toilettes")]),i("TownCardIcon",{attrs:{value:e.shantytown.electricityType.value}},[e._v("électricité")]),i("TownCardIcon",{attrs:{value:e.shantytown.trashEvacuation,details:e.details.trash}},[e._v("évac. des déchets")]),i("TownCardIcon",{attrs:{value:e.shantytown.vermin,details:e.details.vermin,inverted:""}},[e._v("pres. de nuisibles")]),i("TownCardIcon",{attrs:{value:e.shantytown.firePreventionMeasures,details:e.details.firePrevention}},[e._v("prev. incendie")])],1)]),e.hasJusticePermission?i("div",[e.shantytown.justiceStatuses&&e.shantytown.justiceStatuses.length?i("div",e._l(e.shantytown.justiceStatuses,(function(t){return i("div",{key:t.label,staticClass:"flex "},[t.icon?i("Icon",{attrs:{icon:t.icon}}):e._e(),t.img?i("img",{staticClass:"w-5 h-4 mt-1",attrs:{src:t.img}}):e._e(),i("div",{staticClass:"ml-2"},[i("span",{staticClass:"font-bold"},[e._v(e._s(t.label))]),t.date?i("span",{staticClass:"secondary"},[e._v(" le "+e._s(e.formatDate(t.date,"d/m/y")))]):e._e()])],1)})),0):i("div",{staticClass:"text-G600"},[i("Icon",{attrs:{icon:"ban"}}),e._v(" Aucune procédure judiciaire en cours ")],1)]):e._e()]),i("div",{staticClass:"flex justify-between items-center px-4 pt-4 print:hidden"},[i("Tag",{staticClass:"text-xs"},[e._v(" "+e._s(e.lastUpdate)+" ")]),i("div",{staticClass:"print:hidden"},[i("transition",{attrs:{name:"fade"}},[e.isHover?i("router-link",{attrs:{to:"site/"+e.shantytown.id}},[i("Button",{staticClass:"text-display-sm hover:underline -mb-1",attrs:{variant:"secondaryText",icon:"pen",iconPosition:"left"}},[e._v("Mettre à jour")])],1):e._e()],1),i("Button",{staticClass:"text-display-sm hover:underline -mb-1",attrs:{variant:"primaryText",icon:"arrow-right"}},[e._v("Voir la fiche du site")])],1)],1)])])],1)},Sp=[],Pp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["flex items-center",e.colorClass]},[i("div",{staticClass:"mr-2 w-4"},[i("Icon",{attrs:{icon:e.icon}})],1),e._t("default")],2)},$p=[],Tp={props:{value:{validator:e=>"boolean"===typeof e||null===e},details:{type:Array},inverted:{type:Boolean}},computed:{colorClass(){return this.value&&this.details&&this.details.negative.length>0?"text-secondary":!0===this.value&&!this.inverted||!1===this.value&&this.inverted?"text-green":"text-red"},icon(){return this.value&&this.details&&this.details.negative.length>0?"exclamation-triangle":{null:"question",false:this.inverted?"check":"times",true:this.inverted?"times":"check"}[this.value]}}},Ip=Tp,Op=Object(u["a"])(Ip,Pp,$p,!1,null,null,null),Ap=Op.exports,Ep=i("2416"),Np=i.n(Ep),qp=i("2b50"),Dp=i.n(qp),jp=i("08c7"),Mp=i.n(jp);function Lp(e){const t=new Date,i=new Date(1e3*e),a=Math.floor(Math.abs(t.getTime()-i.getTime())/864e5),s=Math.floor(a/7),n=Math.floor(a/30),o=Math.floor(a/365);return{days:a,weeks:s,months:n,years:o}}function Fp(e){const t={water:{negative:[],positive:[],unknown:[]},sanitary:{negative:[],positive:[],unknown:[]},trash:{negative:[],positive:[],unknown:[]},firePrevention:{negative:[],positive:[],unknown:[]}};null!==e.waterPotable?e.waterPotable?t.water.positive.push("Eau potable"):t.water.negative.push("Eau non potable"):t.water.unknown.push("Eau potable"),null!==e.waterContinuousAccess?e.waterContinuousAccess?t.water.positive.push("Accès continu, c’est-à-dire qu’il ne varie pas en qualité et quantité dans la journée et les saisons, sans limite dans le temps"):t.water.negative.push("Accès non continu, c’est-à-dire qu’il varie en qualité et quantité dans la journée et les saisons, sans limite dans le temps"):t.water.unknown.push("Accès à l'eau continu"),null!==e.waterPotable?e.waterPublicPoint&&t.water.negative.push("Point d'eau public"):t.water.unknown.push("Point d'eau public"),null!==e.waterDistance?e.waterDistance<=20?t.water.positive.push("Accès situé sur site ou à moins de 20 mètres"):t.water.negative.push("Accès situé à plus de 20 mètres"):t.water.unknown.push("Accès situé sur site"),null!==e.waterRoadsToCross?e.waterRoadsToCross?t.water.negative.push("Franchissement de rue ou route nécessaire"):t.water.positive.push("Pas de franchissement de rue ou route pour accéder aux points d’eau"):t.water.unknown.push("Franchissement de rue ou route nécessaire"),null!==e.waterEveryoneHasAccess?e.waterEveryoneHasAccess?t.water.positive.push("Accès pour tous les habitants"):t.water.negative.push("Pas d’accès pour tous les habitants"):t.water.unknown.push("Accès pour tous les habitants"),null!==e.waterStagnantWater?e.waterStagnantWater?t.water.negative.push("Eaux stagnantes autour du point de distribution"):t.water.positive.push("Pas d’eaux stagnantes autour du point de distribution"):t.water.unknown.push("Eaux stagnantes autour du point de distribution"),e.waterHandWashAccess?e.waterHandWashAccess?t.water.positive.push((e.waterHandWashAccessNumber||"Présence de")+" bacs de lavage des mains"):t.water.negative.push("Pas de de bacs de lavage des mains"):t.water.unknown.push("Présence de bacs de lavage des mains"),null!==e.sanitaryOnSite?e.sanitaryOnSite?t.sanitary.positive.push("Accès sur site"):t.sanitary.negative.push("Accès aux abords du site"):t.sanitary.unknown.push("Accès sur site");const i=Math.floor(Number(e.populationTotal)/Number(e.sanitaryOnSite));if(null!==e.sanitaryNumber&&i>0){const a=`${e.sanitaryNumber} toilettes - soit 1 toilette pour ${e.populationTotal} personnes - il est conseillé au moins 1 toilette pour 20 personnes`;i<20?t.sanitary.positive.push(a):t.sanitary.negative.push(a)}return null!==e.sanitaryInsalubrious?e.sanitaryInsalubrious?t.sanitary.negative.push("Marques de défecation à l’air libre"):t.sanitary.positive.push("Pas de marques de défécation à l’air libre"):t.sanitary.unknown.push("Marques de défecation à l’air libre"),null!==e.trashEvacuationRegular?e.trashEvacuationRegular?t.trash.positive.push("Collecte régulière des poubelles / bennes. C’est-à-dire au moins une fois par semaine, à partir d’un point de dépôt spécialement aménagé sur le site ou à proximité immédiate"):t.trash.negative.push("Pas de collecte régulière des poubelles / bennes"):t.trash.unknown.push("Collecte régulière des poubelles / bennes"),null!==e.trashAccumulation?e.trashAccumulation?t.trash.negative.push("Accumulation de déchets sur le site ou aux abords"):t.trash.positive.push("Pas d’accumulation de déchets sur le site ou aux abords"):t.trash.unknown.push("Accumulation de déchets sur le site ou aux abords"),null!==e.firePreventionDiagnostic?e.firePreventionDiagnostic?t.firePrevention.positive.push("Diagnostic prévention incendie par le SDIS réalisé"):t.firePrevention.negative.push("Pas de diagnostic prévention incendie réalisé par le SDIS"):t.firePrevention.unknown.push("Diagnostic prévention incendie par le SDIS réalisé"),null!==e.firePreventionDevices?e.firePreventionDevices?t.firePrevention.positive.push("Mesures spécifiques en place"):t.firePrevention.negative.push("Pas de mesure spécifiques (formation, extincteurs...) en place"):t.firePrevention.unknown.push("Mesures spécifiques en place (formation, extincteurs...)"),null!==e.firePreventionSiteAccessible?e.firePreventionSiteAccessible?t.firePrevention.positive.push("Site accessible aux pompiers"):t.firePrevention.negative.push("Site pas accessible aux pompiers"):t.firePrevention.unknown.push("Site accessible aux pompiers"),t}var zp={props:{shantytown:{type:Object},hasJusticePermission:{type:Boolean}},data(){return{isHover:!1,details:Fp(this.shantytown)}},components:{TownCardIcon:Ap},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)},dateDiff(...e){return window.App.dateDiff.apply(window,e)},socialOrigin(e){return 1===e.id?{id:1,label:"Français",img:Dp.a}:2===e.id?{id:2,label:"Union européenne",img:Np.a}:3===e.id?{id:3,label:"Hors Union européenne",img:Mp.a}:e}},computed:{lastUpdate(){const{days:e,months:t,weeks:i}=Lp(this.shantytown.updatedAt);if(0===t){if(0===e)return"Dernière actualisation aujourd'hui";if(e>0&&e<7)return`Dernière actualisation il y a ${e} jour${e>1?"s":""}`;if(i>0&&0===t)return`Dernière actualisation il y a ${i} semaine${i>1?"s":""}`}return t<12?`Dernière actualisation il y a ${t} mois`:"Dernière actualisation il y a plus d'un an"}}},Rp=zp,Bp=(i("a782"),Object(u["a"])(Rp,xp,Sp,!1,null,"2caebd9c",null)),Vp=Bp.exports,Up=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mx-auto searchbox -mb-6"},[i("AutocompleteV2",{attrs:{defaultValue:this.$props.value,search:e.search,getResultValue:e.resultValue,loading:e.loading,prefixIcon:"search",inputClasses:["rounded-full shadow-sm"]},on:{submit:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"extra",fn:function(t){var a=t.removeItem;return[i("div",{staticClass:"py-1 px-2 text-right"},[i("Button",{staticClass:"font-bold",attrs:{variant:"primaryText",size:"sm"},on:{click:a}},[e._v("Voir tous les sites de France")])],1)]}},{key:"default",fn:function(t){var a=t.results,s=t.resultListProps,n=t.resultListListeners,o=t.resultProps,r=t.getResultValue;return[a.length?e._e():i("Menu",[i("MenuItem",[e._v(" Aucun résultats ")])],1),i("Menu",e._g(e._b({},"Menu",s,!1),n),e._l(e.getCategories(a),(function(t){return i("div",{key:t.label,staticClass:"flex flex-row border-b-2 border-G100"},[i("div",{staticClass:"px-4 py-2 w-48 text-G600 border-r-2 border-G100 text-sm text-right pr-4"},[e._v(" "+e._s(t.label)+" ")]),i("div",{staticClass:"flex-1"},e._l(a,(function(a,s){return i("MenuItem",e._b({key:o[s].id,class:["flex flex-col cursor-pointer hover:bg-G100",a.type===t.label?"block":"hidden",o[s]["aria-selected"]&&"bg-G100"]},"MenuItem",o[s],!1),[e._v(" "+e._s(r(a))+" ")])})),1)])})),0)]}}]),model:{value:e.result,callback:function(t){e.result=t},expression:"result"}})],1)},Hp=[],Gp={props:{value:{type:Object}},data(){return{input:"",result:"",results:[],loading:!1}},methods:{resultValue(e){return e.label},getCategories(e){const t=(e,t)=>e.reduce((e,i)=>({...e,[i[t]]:[...e[i[t]]||[],i]}),{});return Object.values(t(e,"type")).map(e=>({label:e[0].type,items:e}))},async search(e){return this.input=e,e?(this.loading=!0,this.results=await zr(e),this.loading=!1,this.results):[]}}},Wp=Gp,Qp=(i("c35a4"),Object(u["a"])(Wp,Up,Hp,!1,null,"6ab96d95",null)),Jp=Qp.exports,Yp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"block md:flex justify-between items-baseline"},[i("div",[i("div",{staticClass:"flex items-center mb-4 print:hidden"},[e._t("filters")],2),i("div",[e._t("title")],2)]),i("div",{staticClass:"block md:flex items-center print:hidden"},[e._t("buttons")],2)])},Zp=[],Kp={props:{search:{type:Object},showExport:{type:Function}}},Xp=Kp,em=Object(u["a"])(Xp,Yp,Zp,!1,null,null,null),tm=em.exports,im=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({class:["border-b-2 pb-1",e.active?"text-primary font-bold border-primary":"cursor-pointer border-transparent"]},e.$listeners),[e._t("default")],2)},am=[],sm={props:{active:{type:Boolean}}},nm=sm,om=Object(u["a"])(nm,im,am,!1,null,null,null),rm=om.exports,lm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"mb-2"},[e._v("Filtrer par")]),i("div",{staticClass:"flex items-center flex-wrap"},[e._t("default")],2)])},cm=[],um={},dm=Object(u["a"])(um,lm,cm,!1,null,null,null),pm=dm.exports,mm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Dropdown",{scopedSlots:e._u([{key:"button",fn:function(t){var a=t.isOpen;return[i("Button",{class:["px-4 rounded focus:outline-none border border-primary whitespace-nowrap",a?"bg-primary text-white hover:text-white focus:text-white":"hover:bg-blue200 hover:text-primary text-primary"],attrs:{variant:"custom",size:"sm",icon:a?"chevron-up":"chevron-down",iconPosition:"right"}},[e._v(e._s(e.titleWithActiveFilters))])]}},{key:"menu",fn:function(){return[i("Menu",{attrs:{containerClasses:"py-0"}},[e._l(e.options,(function(t){return i("div",{key:t.id,staticClass:"flex items-center whitespace-no-wrap text-sm menuWidth"},[i("Checkbox",{attrs:{checkValue:t.value,value:e.value,variant:"invisible",containerClasses:"w-full",labelClasses:"w-full block"},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.isChecked;return[i("div",{staticClass:"flex items-center justify-between w-full  hover:bg-blue200 py-2 px-3 text-primary"},[e._t("default",[i("div",{staticClass:"flex-1"},[e._v(e._s(t.label))])],{label:t.label}),s?i("div",{staticClass:"ml-4"},[i("Icon",{attrs:{icon:"check"}})],1):e._e()],2)]}}],null,!0)})],1)})),i("div",{staticClass:"px-1 py-1 border-t "},[i("Button",{staticClass:"hover:underline",attrs:{size:"sm",variant:"primaryText"},on:{click:function(t){return e.$emit("input",[])}}},[e._v(" Effacer ")])],1)],2)]},proxy:!0}])})},hm=[],vm={props:{title:{type:String},options:{type:Array},value:{type:Array}},computed:{titleWithActiveFilters(){return this.value.length?`${this.title} (${this.value.length})`:this.title}}},fm=vm,gm=(i("30a5"),Object(u["a"])(fm,mm,hm,!1,null,"defa5cd8",null)),bm=gm.exports;function _m(e,t){return e.filter(e=>("open"!==t.status||"open"===e.status)&&(("close"!==t.status||"open"!==e.status)&&(!(t.location&&!Cm(e,t))&&(!(t.fieldType.length>0&&!km(e,t.fieldType))&&(!(t.population.length>0&&!xm(e,t.population))&&(!(t.justice.length>0&&!Sm(e,t.justice))&&(!(t.origin.length>0&&!wm(e,t.origin))&&!(t.conditions.length>0&&!ym(e,t.conditions)))))))))}function ym(e,t){return t.some(t=>"accessToSanitary"===t?!e.accessToSanitary:"accessToWater"===t?!e.accessToWater:"accessToTrash"===t?!e.trashEvacuation:"accessToElectricity"===t?!e.electricityType.value:"vermin"===t?e.vermin:"firePreventionMeasures"!==t||!e.firePreventionMeasures)}function wm(e,t){if(!e.socialOrigins)return!1;if(!e.socialOrigins.length&&t.includes(null))return!0;const i=e.socialOrigins.map(e=>e.id),a=i.filter(e=>t.includes(e));return a.length}function Cm(e,t){if("nation"===t.location.type)return!0;const i=e[t.location.locationType];return!i||(i.code===""+t.location.code||i.main===""+t.location.code)}function km(e,t){return-1!==t.indexOf(e.fieldType.id)}function xm(e,t){return t.some(t=>{if(null===t)return null===e.populationTotal;if(null===e.populationTotal)return!1;const[i,a]=t.split("-");return!(""!==i&&parseInt(i,10)>e.populationTotal)&&!(""!==a&&parseInt(a,10)<e.populationTotal)})}function Sm(e,t){return t.some(t=>"ownerComplaint"===t?!0===e.ownerComplaint:!0===e.justiceRendered?"justiceRendered"===t:!0===e.justiceProcedure?"justiceProcedure"===t:null===t)}var Pm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{staticClass:"modalContainer",attrs:{isOpen:!0,closeModal:e.close,closeClickOutside:""},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"pt-10 px-10 pb-4 flex justify-between border-b border-G200"},[i("div",{staticClass:"text-primary"},[i("div",{staticClass:"text-display-md text-primary"},[e._v(" Exporter les sites existants ")]),i("div",{staticClass:"font-bold mt-2"},[e._v(e._s(e.location.label))])]),i("div",{staticClass:"ml-16"},[i("Button",{attrs:{variant:"primaryOutline"},on:{click:e.close}},[e._v(" Annuler")]),i("Button",{staticClass:"ml-6",on:{click:e.download}},[e._v("Exporter")])],1)])]},proxy:!0},{key:"body",fn:function(){return[i("div",[i("div",{staticClass:"font-bold mb-1"},[e._v(" Les données exportées par défaut ")]),i("ul",[i("li",[e._v("- Localisation : département, commune, adresse")]),i("li",[e._v(" - Site : type de site (terrain / bâti), date d’installation, date de signalement ")]),i("li",[e._v(" - Habitants : nombre de personnes, mineurs, ménages et origines ")]),e.closedTowns?i("li",[e._v(" - Orientations des ménages après la fermeture ")]):e._e(),i("li",[e._v("- Date de la dernière mise à jour")])])]),i("div",{staticClass:"mt-4"},[i("p",{staticClass:"font-bold mb-1"},[e._v(" Cochez les informations supplémentaires que vous souhaitez exporter ")]),e._l(e.availableOptions,(function(t){return i("Checkbox",{key:t.id,attrs:{checkValue:t.id,label:t.label+" "+(t.description||"")},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}})}))],2)]},proxy:!0}])})},$m=[],Tm={components:{Checkbox:tt},props:{location:Object,closedTowns:Boolean},data(){return{existingOptions:[{id:"priority",label:"Priorité",description:"(1, 2, 3)",closedTowns:!1},{id:"address_details",label:"Informations d'accès au site et coordonnées GPS",closedTowns:!1},{id:"owner",label:"Propriétaire",description:": type et identité"},{id:"life_conditions",label:"Conditions de vie",description:": accès à l'électricité, l'eau, toilettes, évacuation des déchets"},{id:"demographics",label:"Diagnostic",description:": statut, date, et service en charge"},{id:"justice",label:"Procédures judiciaires",description:": statut et date des étapes",permission:{entity:"shantytown",feature:"export",data:"justice"}},{id:"comments",label:"Commentaires",description:": les 5 derniers",permission:{entity:"shantytown_comment",feature:"list",data:null}},{id:"covid_comments",label:"Commentaires Covid-19",permission:{entity:"covid_comment",feature:"list",data:null}}],options:[]}},computed:{title(){return this.closedTowns?"fermés":"existants"},availableOptions(){return this.existingOptions.filter(({closedTowns:e})=>void 0===e||this.closedTowns===e).filter(({permission:e})=>{if(void 0===e)return!0;const t=Bo(`${e.entity}.${e.feature}`);return null!==t&&(null===e.data||!0===t["data_"+e.data])})}},methods:{download(){const{code:e,type:t}=this.location.data;let i=`https://api.preprod.resorption-bidonvilles.beta.gouv.fr/towns/export?locationType=${encodeURIComponent(t)}&locationCode=${encodeURIComponent(e)}&closedTowns=${this.closedTowns?"1":"0"}`;this.options.length>0&&(i+="&options="+encodeURIComponent(this.options.join(","))),Do(i)},close(){this.$emit("close")}}},Im=Tm,Om=Object(u["a"])(Im,Pm,$m,!1,null,null,null),Am=Om.exports,Em=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"mb-2"},[e._v("Trier par")]),i("div",{staticClass:"flex items-center"},[i("Dropdown",{scopedSlots:e._u([{key:"button",fn:function(t){var a=t.isOpen;return[i("Button",{class:["px-4 rounded focus:outline-none border border-primary whitespace-nowrap ",a?"bg-primary text-white hover:text-white focus:text-white":"hover:bg-blue200 hover:text-primary text-primary"],attrs:{variant:"custom",size:"sm",icon:a?"chevron-up":"chevron-down",iconPosition:"right"}},[e._v(e._s(e.title)+" ")])]}},{key:"menu",fn:function(){return[i("Menu",{attrs:{containerClasses:"py-0"}},e._l(e.options[e.status],(function(t){return i("div",{key:t.id,staticClass:"flex items-center whitespace-no-wrap text-sm menuWidth"},[i("Radio",{attrs:{checkValue:t.value,value:e.value,variant:"invisible",containerClasses:"w-full",labelClasses:"w-full block"},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.isChecked;return[i("div",{staticClass:"flex items-center justify-between w-full  hover:bg-blue200 py-2 px-3 text-primary"},[i("div",{staticClass:"flex-1"},[e._v(e._s(t.label))]),s?i("div",{staticClass:"ml-4"},[i("Icon",{attrs:{icon:"check"}})],1):e._e()])]}}],null,!0)})],1)})),0)]},proxy:!0}])})],1)])},Nm=[],qm={props:{value:{type:String},status:{type:String}},data(){return{options:{open:[{value:"builtAt",label:"Date d'installation"},{value:"updatedAt",label:"Date d'actualisation"},{value:"declaredAt",label:"Date de signalement"}],close:[{value:"closedAt",label:"Date de fermeture"},{value:"builtAt",label:"Date d'installation"},{value:"updatedAt",label:"Date d'actualisation"},{value:"declaredAt",label:"Date de signalement"}]}}},computed:{title(){const e=this.options[this.status].find(e=>e.value===this.value);return e.label}}},Dm=qm,jm=(i("69c8"),Object(u["a"])(Dm,Em,Nm,!1,null,"07337edc",null)),Mm=jm.exports,Lm=i("2f62"),Fm=i("ccab"),zm=i.n(Fm);function Rm(e){const{days:t,years:i,months:a}=Lp(e);if(i>0){const e=`${i} an${i>1?"s":""}`;return a%12>0?`${e} et ${a%12} mois`:e}return a>0?a+" mois":t>0?t+" jours":"Aujourd'hui"}function Bm(e,t){const i=t.reduce((e,t)=>Object.assign(e,{[t.id]:t.color}),{});let a=!0;"Inconnu"===e.electricityType.label?a=null:"Non"===e.electricityType.label&&(a=!1);const s=[];switch(!0===e.ownerComplaint&&s.push({icon:"scroll",label:"Plainte déposée"}),!e.justiceProcedure||e.justiceChallenged||e.justiceRendered||s.push({icon:"balance-scale",label:"Procédure en cours"}),e.justiceProcedure&&e.justiceRendered&&s.push({icon:"balance-scale",label:"Décision rendue",date:e.justiceRenderedAt}),e.justiceProcedure&&!0===e.justiceChallenged&&s.push({icon:"balance-scale",label:"Contentieux"}),e.policeStatus){case"none":s.push({img:zm.a,label:"Concours de la force publique non demandé"});break;case"requested":s.push({img:zm.a,label:"Concours de la force publique demandé",date:e.policeRequestedAt});break;case"granted":s.push({img:zm.a,label:"Concours de la force publique accordé",date:e.policeGrantedAt});break;default:case null:break}let n,o;"open"===e.status?e.builtAt?(n="Existe",o=e.builtAt):e.declaredAt?(n="Signalé",o=e.declaredAt):(n=null,o=null):(n="Fermé",o=e.closedAt);const r=o?Rm(o):"",l=e.closingSolutions.reduce((e,t)=>t.householdsAffected?(e||0)+t.householdsAffected:e,null);return{...e,statusName:n,statusDate:o,statusSince:r,statusDetails:Vm[e.status],fieldType:{...e.fieldType,color:i[e.fieldType.id]},electricityType:{...e.electricityType,value:a},justiceStatuses:s,totalSolutions:l}}const Vm={closed_by_justice:"Exécution d'une décision de justice",closed_by_admin:"Exécution d'une décision administrative",other:"Autre",unknown:"Raison inconnue"};a["default"].use(Lm["a"]);var Um=new Lm["a"].Store({state:{towns:{data:[],loading:!0,error:null,sort:"updatedAt",filters:{population:[],fieldType:[],justice:[],origin:[],conditions:[],status:"open",location:null},currentPage:1}},mutations:{setLoading(e,t){e.towns.loading=t},setTowns(e,t){e.towns.data=t},setError(e,t){e.towns.error=t},setSort(e,t){e.towns.sort=t},setFilters(e,t){e.towns.filters=t},setLocation(e,t){e.towns.filters.location=t},setCurrentPage(e,t){e.towns.currentPage=t}},actions:{async fetchTowns({commit:e}){e("setLoading",!0);try{const{user:t,field_types:i}=zo();"nation"!==t.organization.location.type&&"national_admin"!==t.role_id&&e("setLocation",{id:t.organization.location[t.organization.location.type].code,label:t.organization.location[t.organization.location.type].name,category:t.organization.location.type,locationType:t.organization.location.type,code:t.organization.location[t.organization.location.type].code,data:{code:t.organization.location[t.organization.location.type].code,type:t.organization.location.type}});const a=await dl(),s=a.map(e=>Bm(e,i));e("setTowns",s),e("setLoading",!1)}catch(t){e("setError",t),e("setLoading",!1)}}},getters:{towns:e=>e.towns.data,townsLoading:e=>e.towns.loading,townsError:e=>e.towns.error,townsFilters:e=>e.towns.filters,townsSort:e=>e.towns.sort,townsCurrentPage:e=>e.towns.currentPage}});const Hm=20;var Gm={components:{TownsListSort:Mm,Spinner:qi,TownCard:Vp,PrivateContainer:gp,PrivateLayout:kp,TownsListSearchBar:Jp,TownsListHeader:tm,TownsListHeaderTab:rm,TownsListFilters:pm,TownsListFilter:bm,Export:Am},mounted(){window.onbeforeprint=()=>{this.printMode=!0},window.onafterprint=()=>{this.printMode=!1}},data(){const{field_types:e}=zo(),t=Bo("shantytown.list");return{hasJusticePermission:!0===t.data_justice,fieldTypes:e,exportIsVisible:!1,printMode:!1}},methods:{onClickCloseTab(){this.updateFilters("status","close"),this.updateSort("closedAt")},onClickOpenTab(){this.updateFilters("status","open"),this.updateSort("updatedAt")},updateSort(e){Um.commit("setSort",e)},updateFilters(e,t){Um.commit("setFilters",{...this.filters,[e]:t}),this.onChangePage(1)},onChangePage(e){Um.commit("setCurrentPage",e)},hasPermission(...e){return Vo(...e)},load(){this.shantytowns.length||Um.dispatch("fetchTowns")},showExport(){setTimeout(()=>{this.exportIsVisible=!0},100)},hideExport(){this.exportIsVisible=!1},togglePrintModal(){this.printMode=!0,setTimeout(()=>{window.print()},100)}},created(){this.load()},computed:{...Object(Lm["b"])({shantytowns:"towns",isLoading:"townsLoading",error:"townsError",filters:"townsFilters",sort:"townsSort",currentPage:"townsCurrentPage"}),locationImg(){const e=["01","02","03","04","06"],t=this.filters.location,i=t&&"Région"===t.type,a=i&&e.includes(t.code),s=!i&&t&&!t.departement;return!t||s||a?"/img/regions/fallback.svg":i?`/img/regions/${this.filters.location.code}.svg`:`/img/departements/${this.filters.location.departement}.svg`},currentLocation(){return this.filters.location||{id:null,label:"France",category:"Pays",data:{code:null,type:"nation"}}},populationTotal(){return this.filteredShantytowns.reduce((e,{populationTotal:t})=>e+(t||0),0)},justiceTotal(){return this.filteredShantytowns.filter(({justiceProcedure:e})=>!0===e).length},filteredShantytowns(){return _m(this.shantytowns,this.filters).sort((e,t)=>t[this.sort]-e[this.sort])},filteredShantytownsByPage(){return this.filteredShantytowns.slice((this.currentPage-1)*Hm,Hm*this.currentPage)},title(){return this.currentLocation.label?""+this.currentLocation.label:"France métropolitaine"},nbPages(){return Math.ceil(this.filteredShantytowns.length/Hm)}}},Wm=Gm,Qm=Object(u["a"])(Wm,dp,pp,!1,null,null,null),Jm=Qm.exports,Ym=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PrivateLayout",[i("TownForm",{attrs:{mode:"create"}})],1)},Zm=[],Km=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationObserver",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submit(t)}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[i("form",[i("div",{staticClass:"bg-G100 py-8"},[i("PrivateContainer",{staticClass:"flex justify-between items-baseline"},[i("div",{staticClass:"text-display-lg"},[e._v(e._s(e.submitWording))]),i("div",[i("Button",{attrs:{variant:"primaryText"},on:{click:e.back}},[e._v("Annuler")]),i("Button",{staticClass:"ml-5",attrs:{loading:e.loading,"data-cy-button":"submit"}},[e._v("Valider")])],1)])],1),i("PrivateContainer",{staticClass:"flex pt-10"},[i("TownFormLeftColumn",{staticClass:"leftColumnWidth"}),i("div",{staticClass:"flex-1"},[e.showInfo?i("TownFormPanelInfo",{on:{close:function(t){return e.closeInfo()}}}):e._e(),i("TownFormErrorLog",{staticClass:"mt-8 mb-8",attrs:{id:"erreurs",errors:a}}),i("TownFormPanelLocation",{staticClass:"mt-10",model:{value:e.town.location,callback:function(t){e.$set(e.town,"location",t)},expression:"town.location"}}),i("TownFormPanelCharacteristics",{staticClass:"mt-10 townPanelShadow",attrs:{id:"characteristics"},model:{value:e.town.characteristics,callback:function(t){e.$set(e.town,"characteristics",t)},expression:"town.characteristics"}}),i("TownFormPanelPeople",{staticClass:"mt-10 townPanelShadow",attrs:{id:"people"},model:{value:e.town.people,callback:function(t){e.$set(e.town,"people",t)},expression:"town.people"}}),i("TownFormPanelLivingConditions",{staticClass:"mt-10 townPanelShadow",attrs:{id:"living_conditions",population:e.town.people.population},model:{value:e.town.living_conditions,callback:function(t){e.$set(e.town,"living_conditions",t)},expression:"town.living_conditions"}}),i("TownFormPanelJudicial",{staticClass:"mt-10 townPanelShadow",attrs:{id:"judicial"},model:{value:e.town.judicial,callback:function(t){e.$set(e.town,"judicial",t)},expression:"town.judicial"}}),i("div",{staticClass:"mt-8 text-right italic text-red font-bold"},[e._v(" * : Réponses obligatoires ")])],1)],1),i("div",{staticClass:"pt-12 pb-16"},[i("PrivateContainer",{staticClass:"flex justify-end items-baseline"},[i("Button",{attrs:{variant:"primaryText"},on:{click:e.back}},[e._v("Annuler")]),i("Button",{staticClass:"ml-5",attrs:{loading:e.loading}},[e._v("Valider")])],1)],1)],1)]}}])})},Xm=[],eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"rounded-full inline-block bg-yellow-400 w-6 h-6 text-center text-xs align-middle leading-6"},[i("Icon",{attrs:{icon:"flag"}})],1),i("span",{staticClass:"ml-2 font-bold"},[e._v("Qu'est-ce qu'un site ?")]),i("span",{staticClass:"ml-2",on:{click:e.toggle}},[i("Icon",{staticClass:"cursor-pointer",attrs:{icon:e.togglerIcon}})],1),i("transition",{attrs:{name:"toggle",mode:"out-in"}},[e.visible?i("div",{staticClass:"bg-yellow-200 text-sm p-6 mt-2 flex"},[e._v(" Un site est un bidonville, squat ou immeuble bâti occupé de manière informelle à des fins d'habitation par plusieurs familles ou personnes. Il se caractérise généralement par l'absence de services de base : eau, électricité, gestion des déchets. La plateforme permet de recenser tous les sites, quelque soit l'origine des personnes et leur nombre. ")]):e._e()])],1)},th=[],ih={data(){return{visible:!0}},computed:{togglerIcon(){return!0===this.visible?"chevron-up":"chevron-down"}},methods:{toggle(){this.visible=!this.visible}}},ah=ih,sh=(i("9b19"),Object(u["a"])(ah,eh,th,!1,null,"8c5b0e4c",null)),nh=sh.exports,oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-gray-200 flex"},[i("div",{staticClass:"p-5 flex-grow"},[i("FormParagraph",{attrs:{title:"Adresse",showMandatoryStar:!0}},[i("InputAddress",{on:{change:e.onAddressChange},model:{value:e.input.address,callback:function(t){e.$set(e.input,"address",t)},expression:"input.address"}})],1),i("FormParagraph",{attrs:{title:"Appellation du site"}},[i("InputName",{model:{value:e.input.name,callback:function(t){e.$set(e.input,"name",t)},expression:"input.name"}})],1)],1),e.input.address.label?i("div",{staticClass:"w-96 h-96"},[i("InputCoordinates",{model:{value:e.input.coordinates,callback:function(t){e.$set(e.input,"coordinates",t)},expression:"input.coordinates"}})],1):e._e()])},rh=[],lh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("AutocompleteV2",{attrs:{id:"address",label:"",prefixIcon:"search",search:e.autocomplete,getResultValue:e.getResultValue,validationName:"Adresse","data-cy-field":"address",defaultValue:e.value},on:{submit:e.submit}})},ch=[],uh={props:{value:{value:Object,required:!1,default(){return{label:void 0,citycode:void 0}}}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}},methods:{autocomplete(e){return e?Fr(e):[]},getResultValue(e){return"string"===typeof e?e:e.label},submit(e){if(!e)return this.input={label:void 0,citycode:void 0},void this.$emit("change",void 0);const{label:t,citycode:i,coordinates:[a,s]}=e;this.input={label:t,citycode:i},this.$emit("change",[s,a])}}},dh=uh,ph=Object(u["a"])(dh,lh,ch,!1,null,null,null),mh=ph.exports,hh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextInput",{attrs:{id:"name",label:"",info:"Exemples : Entrepôt de la Poste, Rond-point du centre...",cypressName:"name"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},vh=[],fh={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},gh=fh,bh=Object(u["a"])(gh,hh,vh,!1,null,null,null),_h=bh.exports,yh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("MapV2",{attrs:{zoom:e.zoom},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},wh=[],Ch={props:{value:{value:Array,required:!1}},data(){return{input:this.value}},computed:{zoom(){return this.input?15:void 0}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},kh=Ch,xh=Object(u["a"])(kh,yh,wh,!1,null,null,null),Sh=xh.exports,Ph={components:{InputAddress:mh,InputName:_h,InputCoordinates:Sh},props:{value:{type:Object,required:!0}},data(){return{input:this.value}},methods:{onAddressChange(e){this.input.coordinates=e}}},$h=Ph,Th=Object(u["a"])($h,oh,rh,!1,null,null,null),Ih=Th.exports,Oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormGroup",{attrs:{title:"Caractéristiques du site"}},[i("FormParagraph",{staticClass:"w-128",attrs:{title:"Quelles sont les dates clés du site ?"}},[i("div",{staticClass:"w-64"},[i("InputBuiltAt",{model:{value:e.input.built_at,callback:function(t){e.$set(e.input,"built_at",t)},expression:"input.built_at"}}),i("InputDeclaredAt",{attrs:{disableBefore:e.input.built_at},model:{value:e.input.declared_at,callback:function(t){e.$set(e.input,"declared_at",t)},expression:"input.declared_at"}})],1),i("InputFieldType",{model:{value:e.input.field_type,callback:function(t){e.$set(e.input,"field_type",t)},expression:"input.field_type"}}),i("InputDetailedAddress",{model:{value:e.input.detailed_address,callback:function(t){e.$set(e.input,"detailed_address",t)},expression:"input.detailed_address"}})],1),i("FormParagraph",{staticClass:"w-128",attrs:{title:"Quel est le propriétaire ?",showMandatoryStar:!0}},[i("InputOwnerType",{ref:"ownerType",model:{value:e.input.owner_type,callback:function(t){e.$set(e.input,"owner_type",t)},expression:"input.owner_type"}}),e.ownerTypeIsUnknown?e._e():i("InputOwner",{model:{value:e.input.owner,callback:function(t){e.$set(e.input,"owner",t)},expression:"input.owner"}})],1)],1)},Ah=[],Eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DatepickerV2",{attrs:{id:"built_at",label:"Date d'installation",rules:"required",showMandatoryStar:!0,"disabled-dates":{from:new Date},cypressName:"built_at"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Nh=[],qh={props:{value:{type:Date,required:!1}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Dh=qh,jh=Object(u["a"])(Dh,Eh,Nh,!1,null,null,null),Mh=jh.exports,Lh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DatepickerV2",{attrs:{id:"declared_at",label:"Date de signalement",rules:"declaredAfterInstallation:@built_at","disabled-dates":{to:this.disableBefore,from:new Date},cypressName:"declared_at"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Fh=[];Object(D["c"])("declaredAfterInstallation",{params:["target"],validate(e,{target:t}){return e>=t},message:"La date de signalement doit être ultérieure à la date d'installation"});var zh={props:{value:{type:Date,required:!1},disableBefore:{type:Date,required:!1}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Rh=zh,Bh=Object(u["a"])(Rh,Lh,Fh,!1,null,null,null),Vh=Bh.exports,Uh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:"Type de site",id:"field_type",showMandatoryStar:!0,rules:"required"}},e._l(e.values,(function(t){return i("Radio",{key:t.id,attrs:{variant:"card",label:t.label,checkValue:t.id,cypressName:"field_type"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})})),1)},Hh=[],Gh={props:{value:{type:Number,required:!1,default:void 0}},data(){const{field_types:e}=zo();return{values:e,checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Wh=Gh,Qh=Object(u["a"])(Wh,Uh,Hh,!1,null,null,null),Jh=Qh.exports,Yh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextInput",{attrs:{label:"Informations d'accès",info:"Saisissez ici toutes les informations qui, en plus de l'adresse, peuvent être utiles pour l'accès au site.",cypressName:"detailed_address"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Zh=[],Kh={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Xh=Kh,ev=Object(u["a"])(Xh,Yh,Zh,!1,null,null,null),tv=ev.exports,iv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",id:"owner_type",validationName:"Type de propriétaire",rules:"required"}},e._l(e.values,(function(t){return i("Radio",{key:t.id,attrs:{variant:"card",label:t.label,checkValue:t.id,cypressName:"owner_type"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})})),1)},av=[],sv={props:{value:{type:Number,required:!1,default:void 0}},data(){const{owner_types:e}=zo();return{values:e,checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}},methods:{isUnknown(e){const t=this.getLabelFor(e);return void 0===t||"Inconnu"===t},getLabelFor(e){const t=this.values.find(({id:t})=>t===e);if(void 0!==t)return t.label}}},nv=sv,ov=Object(u["a"])(nv,iv,av,!1,null,null,null),rv=ov.exports,lv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextInput",{attrs:{id:"owner",label:"Nom",cypressName:"owner"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},cv=[],uv={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},dv=uv,pv=Object(u["a"])(dv,lv,cv,!1,null,null,null),mv=pv.exports,hv={components:{InputBuiltAt:Mh,InputDeclaredAt:Vh,InputFieldType:Jh,InputDetailedAddress:tv,InputOwnerType:rv,InputOwner:mv},props:{value:{type:Object,required:!0}},data(){return{input:this.value}},computed:{ownerTypeIsUnknown(){const e=this.input.owner_type;return void 0===this.$refs.ownerType||this.$refs.ownerType.isUnknown(e)}}},vv=hv,fv=Object(u["a"])(vv,Oh,Ah,!1,null,null,null),gv=fv.exports,bv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormGroup",{attrs:{title:"Habitants"}},[i("FormParagraph",{attrs:{title:"Combien d'habitants vivent sur le site ?"}},[i("InputPopulation",{model:{value:e.input.population,callback:function(t){e.$set(e.input,"population",t)},expression:"input.population"}}),i("InputPopulationMinors",{model:{value:e.input.populationMinors,callback:function(t){e.$set(e.input,"populationMinors",t)},expression:"input.populationMinors"}})],1),i("FormParagraph",{attrs:{title:"Quelle est l'origine des habitants ?"}},[i("InputSocialOrigins",{model:{value:e.input.social_origins,callback:function(t){e.$set(e.input,"social_origins",t)},expression:"input.social_origins"}})],1),i("FormParagraph",{attrs:{title:"Quel est le statut du diagnostic social ?",showMandatoryStar:!0}},[i("InputCensusStatus",{ref:"censusStatus",model:{value:e.input.census_status,callback:function(t){e.$set(e.input,"census_status",t)},expression:"input.census_status"}}),e.censusStatusIsUnknown?e._e():i("div",{staticClass:"w-64"},[i("InputCensusConductedAt",{model:{value:e.input.census_conducted_at,callback:function(t){e.$set(e.input,"census_conducted_at",t)},expression:"input.census_conducted_at"}})],1),e.censusStatusIsUnknown?e._e():i("InputCensusConductedBy",{model:{value:e.input.census_conducted_by,callback:function(t){e.$set(e.input,"census_conducted_by",t)},expression:"input.census_conducted_by"}})],1)],1)},_v=[],yv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"mb-3 text-G600"},[e._v(" Le nombre de personnes sur un site est mouvant, les données fournies par les acteurs - même des estimations - participent à l'amélioration de la connaissance. ")]),i("div",{staticClass:"flex"},[i("TextInput",{staticClass:"w-32",attrs:{id:"population_total",label:"Personnes",rules:"numeric|min_value:0",cypressName:"population_total"},model:{value:e.input.populationTotal,callback:function(t){e.$set(e.input,"populationTotal",t)},expression:"input.populationTotal"}}),i("TextInput",{staticClass:"w-32 ml-5",attrs:{id:"population_couples",label:"Ménages",rules:"numeric|min_value:0|couplesLesserThanTotal:@population_total",cypressName:"population_couples"},model:{value:e.input.populationCouples,callback:function(t){e.$set(e.input,"populationCouples",t)},expression:"input.populationCouples"}}),i("TextInput",{staticClass:"w-32 ml-5",attrs:{id:"population_minors",label:"Mineurs",rules:"numeric|min_value:0|minorsLesserThanTotal:@population_total",cypressName:"population_minors"},model:{value:e.input.populationMinors,callback:function(t){e.$set(e.input,"populationMinors",t)},expression:"input.populationMinors"}})],1)])},wv=[];Object(D["c"])("couplesLesserThanTotal",{params:["target"],validate(e,{target:t}){return parseInt(e,10)<=parseInt(t,10)},message:"Le nombre de ménages doit être inférieur au nombre de personnes"}),Object(D["c"])("minorsLesserThanTotal",{params:["target"],validate(e,{target:t}){return parseInt(e,10)<=parseInt(t,10)},message:"Le nombre de mineurs doit être inférieur au nombre de personnes"});var Cv={props:{value:{type:Object,required:!1,default(){return{populationTotal:void 0,populationCouples:void 0,populationMinors:void 0}}}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},kv=Cv,xv=Object(u["a"])(kv,yv,wv,!1,null,null,null),Sv=xv.exports,Pv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"flex"},[i("TextInput",{staticClass:"w-32",attrs:{id:"population_minors_0_3",label:"0 - 3 ans",rules:"numeric|min_value:0",cypressName:"population_minors_0_3"},model:{value:e.input.populationMinors0To3,callback:function(t){e.$set(e.input,"populationMinors0To3",t)},expression:"input.populationMinors0To3"}}),i("TextInput",{staticClass:"w-32 ml-5",attrs:{id:"population_minors_3_6",label:"3 - 6 ans",rules:"numeric|min_value:0",cypressName:"population_minors_3_6"},model:{value:e.input.populationMinors3To6,callback:function(t){e.$set(e.input,"populationMinors3To6",t)},expression:"input.populationMinors3To6"}}),i("TextInput",{staticClass:"w-32 ml-5",attrs:{id:"population_minors_6_12",label:"6 - 12 ans",rules:"numeric|min_value:0",cypressName:"population_minors_6_12"},model:{value:e.input.populationMinors6To12,callback:function(t){e.$set(e.input,"populationMinors6To12",t)},expression:"input.populationMinors6To12"}}),i("TextInput",{staticClass:"w-32 ml-5",attrs:{id:"population_minors_12_16",label:"12 - 16 ans",rules:"numeric|min_value:0",cypressName:"population_minors_12_16"},model:{value:e.input.populationMinors12To16,callback:function(t){e.$set(e.input,"populationMinors12To16",t)},expression:"input.populationMinors12To16"}}),i("TextInput",{staticClass:"w-32 ml-5",attrs:{id:"population_minors_16_18",label:"16 - 18 ans",rules:"numeric|min_value:0",cypressName:"population_minors_16_18"},model:{value:e.input.populationMinors16To18,callback:function(t){e.$set(e.input,"populationMinors16To18",t)},expression:"input.populationMinors16To18"}})],1),i("div",{staticClass:"flex"},[i("TextInput",{attrs:{id:"minors_in_school",label:"Inscrits en établissement scolaire",width:"w-32",rules:"numeric|min_value:0",cypressName:"minors_in_school"},model:{value:e.input.minorsInSchool,callback:function(t){e.$set(e.input,"minorsInSchool",t)},expression:"input.minorsInSchool"}})],1)])},$v=[],Tv={props:{value:{type:Object,required:!1,default(){return{populationMinors0To3:void 0,populationMinors3To6:void 0,populationMinors6To12:void 0,populationMinors12To16:void 0,populationMinors16To18:void 0,populationMinorsInSchool:void 0}}}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Iv=Tv,Ov=Object(u["a"])(Iv,Pv,$v,!1,null,null,null),Av=Ov.exports,Ev=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" "}},e._l(e.values,(function(t){return i("Checkbox",{key:t.id,attrs:{variant:"card",label:t.label,checkValue:t.id,cypressName:"social_origins"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})})),1)},Nv=[],qv={props:{value:{type:Array,required:!1,default:()=>[]}},data(){const{social_origins:e}=zo();return{values:e,checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Dv=qv,jv=Object(u["a"])(Dv,Ev,Nv,!1,null,null,null),Mv=jv.exports,Lv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",id:"census_status",rules:"required",validationName:"Statut du diagnostic social"}},e._l(e.statuses,(function(t){return i("Radio",{key:t.value,attrs:{variant:"card",label:t.label,checkValue:t.value,cypressName:"census_status"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})})),1)},Fv=[],zv={props:{value:{type:String,required:!1,default:void 0}},data(){return{statuses:[{value:"none",label:"Non prévu"},{value:"scheduled",label:"Prévu"},{value:"done",label:"Réalisé"},{value:"null",label:"Inconnu"}],checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Rv=zv,Bv=Object(u["a"])(Rv,Lv,Fv,!1,null,null,null),Vv=Bv.exports,Uv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("DatepickerV2",{attrs:{id:"census_conducted_at",rules:"required|censusConductedAfterCreation:@built_at",label:"Date du diagnostic","data-cy-field":"census_conducted_at",showMandatoryStar:!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)},Hv=[];Object(D["c"])("censusConductedAfterCreation",{params:["target"],validate(e,{target:t}){return e>=t},message:"La date du diagnostic doit être ultérieure à la date d'installation"});var Gv={props:{value:{type:Date,required:!1}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Wv=Gv,Qv=Object(u["a"])(Wv,Uv,Hv,!1,null,null,null),Jv=Qv.exports,Yv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextInput",{attrs:{id:"census_conducted_by",label:"Intervenant en charge du diagnostic",rules:"required",cypressName:"census_conducted_by",showMandatoryStar:!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Zv=[],Kv={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Xv=Kv,ef=Object(u["a"])(Xv,Yv,Zv,!1,null,null,null),tf=ef.exports,af={components:{InputPopulation:Sv,InputPopulationMinors:Av,InputSocialOrigins:Mv,InputCensusStatus:Vv,InputCensusConductedAt:Jv,InputCensusConductedBy:tf},props:{value:{type:Object,required:!0}},data(){return{input:this.value}},computed:{censusStatusIsUnknown(){const e=this.input.census_status;return"scheduled"!==e&&"done"!==e}}},sf=af,nf=Object(u["a"])(sf,bv,_v,!1,null,null,null),of=nf.exports,rf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormGroup",{attrs:{title:"Conditions de vie et environnement"}},[i("FormParagraph",{attrs:{title:"Les habitants ont-ils accès à l'eau ?",showMandatoryStar:!0}},[i("InputAccessToWater",{model:{value:e.input.access_to_water,callback:function(t){e.$set(e.input,"access_to_water",t)},expression:"input.access_to_water"}}),1===e.input.access_to_water?i("div",{staticClass:"ml-12"},[i("InputWaterPotable",{model:{value:e.input.water_potable,callback:function(t){e.$set(e.input,"water_potable",t)},expression:"input.water_potable"}}),i("InputWaterContinuousAccess",{model:{value:e.input.water_continuous_access,callback:function(t){e.$set(e.input,"water_continuous_access",t)},expression:"input.water_continuous_access"}}),i("InputWaterPublicPoint",{model:{value:e.input.water_public_point,callback:function(t){e.$set(e.input,"water_public_point",t)},expression:"input.water_public_point"}}),i("InputWaterDistance",{model:{value:e.input.water_distance,callback:function(t){e.$set(e.input,"water_distance",t)},expression:"input.water_distance"}}),i("InputWaterRoadsToCross",{model:{value:e.input.water_roads_to_cross,callback:function(t){e.$set(e.input,"water_roads_to_cross",t)},expression:"input.water_roads_to_cross"}}),i("InputWaterEveryoneHasAccess",{model:{value:e.input.water_everyone_has_access,callback:function(t){e.$set(e.input,"water_everyone_has_access",t)},expression:"input.water_everyone_has_access"}}),i("InputWaterStagnantWater",{model:{value:e.input.water_stagnant_water,callback:function(t){e.$set(e.input,"water_stagnant_water",t)},expression:"input.water_stagnant_water"}}),i("div",{},[i("InputWaterHandWashAccess",{attrs:{withoutBorder:""},model:{value:e.input.water_hand_wash_access,callback:function(t){e.$set(e.input,"water_hand_wash_access",t)},expression:"input.water_hand_wash_access"}}),e.input.water_hand_wash_access>0?i("InputWaterHandWashNumber",{attrs:{population:e.population},model:{value:e.input.water_hand_wash_access_number,callback:function(t){e.$set(e.input,"water_hand_wash_access_number",t)},expression:"input.water_hand_wash_access_number"}}):e._e()],1)],1):e._e(),i("div",{staticClass:"ml-12 mt-6"},[i("InputWaterComments",{attrs:{rules:e.input.water_public_point>0?"required":""},model:{value:e.input.water_comments,callback:function(t){e.$set(e.input,"water_comments",t)},expression:"input.water_comments"}})],1)],1),i("FormParagraph",{attrs:{title:"Les habitants ont-ils accès à des toilettes ?",showMandatoryStar:!0}},[i("InputAccessToSanitary",{model:{value:e.input.access_to_sanitary,callback:function(t){e.$set(e.input,"access_to_sanitary",t)},expression:"input.access_to_sanitary"}}),1===e.input.access_to_sanitary?i("div",{staticClass:"ml-12"},[i("InputSanitaryOnSite",{model:{value:e.input.sanitary_on_site,callback:function(t){e.$set(e.input,"sanitary_on_site",t)},expression:"input.sanitary_on_site"}}),i("InputSanitaryNumber",{attrs:{population:e.population},model:{value:e.input.sanitary_number,callback:function(t){e.$set(e.input,"sanitary_number",t)},expression:"input.sanitary_number"}}),i("InputSanitaryInsalubrious",{staticClass:"mb-6",model:{value:e.input.sanitary_insalubrious,callback:function(t){e.$set(e.input,"sanitary_insalubrious",t)},expression:"input.sanitary_insalubrious"}})],1):e._e(),i("div",{staticClass:"ml-12 mt-6"},[i("InputSanitaryComments",{model:{value:e.input.sanitary_comments,callback:function(t){e.$set(e.input,"sanitary_comments",t)},expression:"input.sanitary_comments"}})],1)],1),i("FormParagraph",{attrs:{title:"Les habitants ont-ils accès à l'électricité ?",showMandatoryStar:!0}},[i("InputElectricityType",{model:{value:e.input.electricity_type,callback:function(t){e.$set(e.input,"electricity_type",t)},expression:"input.electricity_type"}}),i("div",{staticClass:"ml-12"},[i("InputElectricityComments",{model:{value:e.input.electricity_comments,callback:function(t){e.$set(e.input,"electricity_comments",t)},expression:"input.electricity_comments"}})],1)],1),i("FormParagraph",{attrs:{title:"Le ramassage des déchets est-il organisé ?",showMandatoryStar:!0}},[i("InputTrashEvacuation",{model:{value:e.input.trash_evacuation,callback:function(t){e.$set(e.input,"trash_evacuation",t)},expression:"input.trash_evacuation"}}),1===e.input.trash_evacuation?i("div",{staticClass:"ml-12"},[i("InputTrashEvacuationRegular",{model:{value:e.input.trash_evacuation_regular,callback:function(t){e.$set(e.input,"trash_evacuation_regular",t)},expression:"input.trash_evacuation_regular"}}),i("InputTrashAccumulation",{model:{value:e.input.trash_accumulation,callback:function(t){e.$set(e.input,"trash_accumulation",t)},expression:"input.trash_accumulation"}}),i("InputTrashCansOnSite",{model:{value:e.input.trash_cans_on_site,callback:function(t){e.$set(e.input,"trash_cans_on_site",t)},expression:"input.trash_cans_on_site"}})],1):e._e()],1),i("FormParagraph",{attrs:{title:"Y a-t-il des nuisibles sur le site ou à proximité ?"}},[i("InputVermin",{model:{value:e.input.vermin,callback:function(t){e.$set(e.input,"vermin",t)},expression:"input.vermin"}}),i("div",{staticClass:"ml-12"},[i("InputVerminComments",{model:{value:e.input.vermin_comments,callback:function(t){e.$set(e.input,"vermin_comments",t)},expression:"input.vermin_comments"}})],1)],1),i("FormParagraph",{attrs:{title:"Y a-t-il des mesures prévention incendie ?"}},[i("InputFirePreventionMeasures",{model:{value:e.input.fire_prevention_measures,callback:function(t){e.$set(e.input,"fire_prevention_measures",t)},expression:"input.fire_prevention_measures"}}),1===e.input.fire_prevention_measures?i("div",{staticClass:"ml-12"},[i("InputFirePreventionDiagnostic",{model:{value:e.input.fire_prevention_diagnostic,callback:function(t){e.$set(e.input,"fire_prevention_diagnostic",t)},expression:"input.fire_prevention_diagnostic"}}),i("InputFirePreventionSiteAccessible",{model:{value:e.input.fire_prevention_site_accessible,callback:function(t){e.$set(e.input,"fire_prevention_site_accessible",t)},expression:"input.fire_prevention_site_accessible"}}),i("InputFirePreventionDevices",{model:{value:e.input.fire_prevention_devices,callback:function(t){e.$set(e.input,"fire_prevention_devices",t)},expression:"input.fire_prevention_devices"}})],1):e._e(),i("div",{staticClass:"ml-12 mt-6"},[i("InputFirePreventionComments",{model:{value:e.input.fire_prevention_comments,callback:function(t){e.$set(e.input,"fire_prevention_comments",t)},expression:"input.fire_prevention_comments"}})],1)],1)],1)},lf=[],cf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"access_to_water",validationName:"Accès à l'eau",rules:"required",withoutMargin:!0}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"access_to_water"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"access_to_water"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"access_to_water"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},uf=[],df={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},pf=df,mf=Object(u["a"])(pf,cf,uf,!1,null,null,null),hf=mf.exports,vf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextArea",{attrs:{id:"water_comments",rules:"required"===e.rules?"waterComments":"",label:"Modalités d'accès",info:"Exemples : citerne remplie par les pompiers tous les jours, 3 robinets raccordés par la collectivité, borne incendie… Champ obligatoire si le point d'eau est public.",placeholder:"Votre message",cypressName:"water_comments"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},ff=[];Object(D["c"])("waterComments",{validate(e){return{required:!0,valid:-1===["",null,void 0].indexOf(e)}},message:"Le champ est obligatoire lorsque le point d'eau est public."});var gf={props:{value:{type:String,required:!1,default:""},rules:{type:String}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},bf=gf,_f=Object(u["a"])(bf,vf,ff,!1,null,null,null),yf=_f.exports,wf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"electricity_type",validationName:"Accès à l'électricité",rules:"required"}},e._l(e.values,(function(t){return i("Radio",{key:t.id,attrs:{variant:"card",label:t.label,checkValue:t.id,cypressName:"electricity_type"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})})),1)},Cf=[],kf={props:{value:{type:Number,required:!1,default:void 0}},data(){const{electricity_types:e}=zo();return{values:e,checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},xf=kf,Sf=Object(u["a"])(xf,wf,Cf,!1,null,null,null),Pf=Sf.exports,$f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextArea",{attrs:{id:"electricity_comments",label:"Modalités d'accès",info:"Exemples : groupe électrogène, raccordement à une usine...",cypressName:"electricity_comments",placeholder:"Votre message"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Tf=[],If={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Of=If,Af=Object(u["a"])(Of,$f,Tf,!1,null,null,null),Ef=Af.exports,Nf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"access_to_sanitary",validationName:"Accès à des toilettes",rules:"required",withoutMargin:!0}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"access_to_sanitary"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"access_to_sanitary"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"access_to_sanitary"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},qf=[],Df={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},jf=Df,Mf=Object(u["a"])(jf,Nf,qf,!1,null,null,null),Lf=Mf.exports,Ff=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextArea",{attrs:{id:"sanitary_comments",label:"Modalités d'accès",info:"Exemples : toilettes sèches avec fosse / sèches sans fosse, chimiques, raccordées au réseau des eaux usées ",cypressName:"sanitary_comments",placeholder:"Votre message"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},zf=[],Rf={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Bf=Rf,Vf=Object(u["a"])(Bf,Ff,zf,!1,null,null,null),Uf=Vf.exports,Hf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"trash_evacuation",validationName:"Évacuation des déchets",rules:"required"}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"trash_evacuation"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"trash_evacuation"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"trash_evacuation"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},Gf=[],Wf={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Qf=Wf,Jf=Object(u["a"])(Qf,Hf,Gf,!1,null,null,null),Yf=Jf.exports,Zf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"L'eau est-elle potable ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{type:"checkbox",label:"Oui",checkValue:1,cypressName:"water_potable"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{type:"checkbox",label:"Non",checkValue:0,cypressName:"water_potable"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},Kf=[],Xf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["flex flex-row items-center  py-1",e.spaceBetween?"justify-between":"",e.withoutBorder?"":"border-b border-color-G600"]},[i("div",{class:["max-w-2xl",!e.spaceBetween&&"mr-4"]},[e._v(e._s(e.label))]),i("div",{staticClass:"flex-shrink-0"},[e._t("default")],2)])},eg=[],tg={props:{label:{type:String},spaceBetween:{type:Boolean,default:!0},withoutBorder:{type:Boolean,default:!1}}},ig=tg,ag=Object(u["a"])(ig,Xf,eg,!1,null,null,null),sg=ag.exports,ng={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},og=ng,rg=Object(u["a"])(og,Zf,Kf,!1,null,null,null),lg=rg.exports,cg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"L'accès est-il continu ? c'est-à-dire qu'il ne varie pas en qualité et en quantité dans la journée et les saisons, sans limite dans le temps."}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",checkValue:1,type:"checkbox",cypressName:"water_continuous_access"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",checkValue:0,type:"checkbox",cypressName:"water_continuous_access"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},ug=[],dg={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},pg=dg,mg=Object(u["a"])(pg,cg,ug,!1,null,null,null),hg=mg.exports,vg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Est-ce un point d'eau public ? (robinet, fontaine publique...)"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"water_public_point"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"water_public_point"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},fg=[],gg={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},bg=gg,_g=Object(u["a"])(bg,vg,fg,!1,null,null,null),yg=_g.exports,wg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Où se situe l'accès ?"}},[i("CheckableGroup",{attrs:{direction:"vertical",withoutMargin:""}},[i("Radio",{attrs:{label:"sur site ou à moins de 20 mètres",checkValue:0,type:"checkbox",cypressName:"water_distance"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"entre 20 et 50 mètres du site",checkValue:20,type:"checkbox",cypressName:"water_distance"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"entre 50 et 100 mètres du site",checkValue:50,type:"checkbox",cypressName:"water_distance"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"à plus de 100 mètres du site",checkValue:100,type:"checkbox",cypressName:"water_distance"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},Cg=[],kg={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},xg=kg,Sg=Object(u["a"])(xg,wg,Cg,!1,null,null,null),Pg=Sg.exports,$g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"L'accès nécessite-t-il un franchissement de rue ou de route ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"water_roads_to_cross"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"water_roads_to_cross"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},Tg=[],Ig={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Og=Ig,Ag=Object(u["a"])(Og,$g,Tg,!1,null,null,null),Eg=Ag.exports,Ng=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Tous les habitants ont-ils accès aux points d'eau ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"water_everyone_has_access"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"water_everyone_has_access"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},qg=[],Dg={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},jg=Dg,Mg=Object(u["a"])(jg,Ng,qg,!1,null,null,null),Lg=Mg.exports,Fg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Existe-t-il des eaux stagnantes autour du point de distribution ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"water_stagnant_water"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"water_stagnant_water"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},zg=[],Rg={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Bg=Rg,Vg=Object(u["a"])(Bg,Fg,zg,!1,null,null,null),Ug=Vg.exports,Hg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Est-ce qu'il y a des bacs de lavage des mains ?",withoutBorder:e.withoutBorder}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"water_hand_wash_access"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"water_hand_wash_access"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},Gg=[],Wg={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0},withoutBorder:{type:Boolean}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Qg=Wg,Jg=Object(u["a"])(Qg,Hg,Gg,!1,null,null,null),Yg=Jg.exports,Zg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex items-center text-sm"},[i("div",{staticClass:"mr-4"},[e._v("Nombre de bacs")]),i("InlineTextInput",{staticClass:"w-16",attrs:{cypressName:"water_hand_wash_access_number",size:"sm"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),Number(e.input)>0&&e.ratio&&e.population.populationTotal?i("div",{staticClass:"ml-4"},[e._v(" Soit 1 bac pour "+e._s(e.ratio)+" personnes ")]):e._e()],1)},Kg=[],Xg={components:{InlineTextInput:Me},props:{value:{type:String,required:!1,default:""},population:{type:Object}},data(){return{input:this.value}},computed:{ratio(){return Math.floor(Number(this.population.populationTotal)/Number(this.input))}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},eb=Xg,tb=Object(u["a"])(eb,Zg,Kg,!1,null,null,null),ib=tb.exports,ab=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Nombre de toilettes","space-between":!1}},[i("div",{staticClass:"flex items-center"},[i("InlineTextInput",{staticClass:"w-16",attrs:{cypressName:"sanitary_number",size:"sm",type:"number"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),Number(e.input)>0&&e.ratio&&e.population.populationTotal?i("div",{staticClass:"ml-4"},[e._v(" Soit 1 toilette pour "+e._s(e.ratio)+" personnes ")]):e._e()],1)])},sb=[],nb={components:{InlineTextInput:Me,SubQuestionWrapper:sg},props:{value:{type:String,required:!1,default:""},population:{type:Object}},data(){return{input:this.value}},computed:{ratio(){return Math.floor(Number(this.population.populationTotal)/Number(this.input))}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},ob=nb,rb=Object(u["a"])(ob,ab,sb,!1,null,null,null),lb=rb.exports,cb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Constate-t-on des marques de défécation à l'air libre ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{type:"checkbox",label:"Oui",checkValue:1,cypressName:"sanitary_insalubrious"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{type:"checkbox",label:"Non",checkValue:0,cypressName:"sanitary_insalubrious"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},ub=[],db={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},pb=db,mb=Object(u["a"])(pb,cb,ub,!1,null,null,null),hb=mb.exports,vb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Les toilettes se situent-elles sur le site ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{type:"checkbox",label:"Oui",checkValue:1,cypressName:"sanitary_on_site"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{type:"checkbox",label:"Non",checkValue:0,cypressName:"sanitary_on_site"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},fb=[],gb={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},bb=gb,_b=Object(u["a"])(bb,vb,fb,!1,null,null,null),yb=_b.exports,wb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Combien de poubelles / benes sont à proximité immédiate du site (moins de 100 mètres) ?",withoutMargin:""}},[i("InlineTextInput",{staticClass:"w-16",attrs:{size:"sm",cypressName:"trash_cans_on_site"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)},Cb=[],kb={components:{InlineTextInput:Me,SubQuestionWrapper:sg},props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},xb=kb,Sb=Object(u["a"])(xb,wb,Cb,!1,null,null,null),Pb=Sb.exports,$b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Constate-t-on une accumulation de déchets sur le site ou aux abords ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"trash_accumulation"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"trash_accumulation"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},Tb=[],Ib={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Ob=Ib,Ab=Object(u["a"])(Ob,$b,Tb,!1,null,null,null),Eb=Ab.exports,Nb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"La collecte des poubelles / bennes est-elle réalisée de manière régulière ? (C'est-à-dire au moins une fois par semaine, à partir d'un point de dépôt spécialement aménagé sur le site ou à proximité immédiate)"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"trash_evacuation_regular"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"trash_evacuation_regular"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},qb=[],Db={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},jb=Db,Mb=Object(u["a"])(jb,Nb,qb,!1,null,null,null),Lb=Mb.exports,Fb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"vermin",validationName:"Y a-t-il des nuisibles sur le site ou à proximité",rules:"required"}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"vermin"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"vermin"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"vermin"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},zb=[],Rb={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Bb=Rb,Vb=Object(u["a"])(Bb,Fb,zb,!1,null,null,null),Ub=Vb.exports,Hb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextArea",{attrs:{id:"vermin_comments",placeholder:"Votre message",label:"Précisions (rats, punaises de lits...)",cypressName:"vermin_comments"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Gb=[],Wb={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Qb=Wb,Jb=Object(u["a"])(Qb,Hb,Gb,!1,null,null,null),Yb=Jb.exports,Zb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"fire_prevention_measures",validationName:"Mesures de prévention incendie",rules:"required"}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"fire_prevention_measures"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"fire_prevention_measures"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"fire_prevention_measures"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},Kb=[],Xb={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},e_=Xb,t_=Object(u["a"])(e_,Zb,Kb,!1,null,null,null),i_=t_.exports,a_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Est-ce qu’un diagnostic prévention incendie par le SDIS (Service départemental d'incendie et de secours) a été réalisé ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"fire_prevention_diagnostic"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"fire_prevention_diagnostic"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},s_=[],n_={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},o_=n_,r_=Object(u["a"])(o_,a_,s_,!1,null,null,null),l_=r_.exports,c_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Est-ce que le site est accessible aux pompiers ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"fire_prevention_site_accessible"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"fire_prevention_site_accessible"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},u_=[],d_={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},p_=d_,m_=Object(u["a"])(p_,c_,u_,!1,null,null,null),h_=m_.exports,v_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextArea",{attrs:{id:"fire_prevention_comments",label:"Précisions",placeholder:"Votre message",cypressName:"fire_prevention_comments"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},f_=[],g_={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},b_=g_,__=Object(u["a"])(b_,v_,f_,!1,null,null,null),y_=__.exports,w_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SubQuestionWrapper",{attrs:{label:"Est-ce que des dispositifs spécifiques (formation, extincteurs...) ont été mises en place ?"}},[i("CheckableGroup",{attrs:{direction:"row",withoutMargin:""}},[i("Radio",{attrs:{label:"Oui",type:"checkbox",checkValue:1,cypressName:"fire_prevention_devices"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{label:"Non",type:"checkbox",checkValue:0,cypressName:"fire_prevention_devices"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)],1)},C_=[],k_={components:{SubQuestionWrapper:sg},props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},x_=k_,S_=Object(u["a"])(x_,w_,C_,!1,null,null,null),P_=S_.exports,$_={components:{InputFirePreventionSiteAccessible:h_,InputTrashEvacuationRegular:Lb,InputTrashAccumulation:Eb,InputTrashCansOnSite:Pb,InputAccessToWater:hf,InputWaterComments:yf,InputElectricityType:Pf,InputElectricityComments:Ef,InputAccessToSanitary:Lf,InputSanitaryComments:Uf,InputTrashEvacuation:Yf,InputWaterPotable:lg,InputWaterContinuousAccess:hg,InputWaterPublicPoint:yg,InputWaterDistance:Pg,InputWaterRoadsToCross:Eg,InputWaterEveryoneHasAccess:Lg,InputWaterStagnantWater:Ug,InputWaterHandWashAccess:Yg,InputWaterHandWashNumber:ib,InputSanitaryNumber:lb,InputSanitaryInsalubrious:hb,InputSanitaryOnSite:yb,InputVermin:Ub,InputVerminComments:Yb,InputFirePreventionMeasures:i_,InputFirePreventionDiagnostic:l_,InputFirePreventionComments:y_,InputFirePreventionDevices:P_},props:{value:{type:Object,required:!0},population:{type:Object}},data(){return{input:this.value}}},T_=$_,I_=Object(u["a"])(T_,rf,lf,!1,null,null,null),O_=I_.exports,A_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormGroup",{attrs:{title:"Procédure judiciaire"}},[i("FormParagraph",{attrs:{title:"Une plainte a-t-elle été déposée par le propriétaire ?",showMandatoryStar:!0}},[i("InputOwnerComplaint",{model:{value:e.input.owner_complaint,callback:function(t){e.$set(e.input,"owner_complaint",t)},expression:"input.owner_complaint"}})],1),i("FormParagraph",{attrs:{title:"Une procédure judiciaire est-elle en cours ?"}},[i("InputJusticeProcedure",{model:{value:e.input.justice_procedure,callback:function(t){e.$set(e.input,"justice_procedure",t)},expression:"input.justice_procedure"}}),1===e.input.justice_procedure?i("InputJusticeRendered",{model:{value:e.input.justice_rendered,callback:function(t){e.$set(e.input,"justice_rendered",t)},expression:"input.justice_rendered"}}):e._e(),i("div",{staticClass:"w-64"},[1===e.input.justice_rendered?i("InputJusticeRenderedAt",{model:{value:e.input.justice_rendered_at,callback:function(t){e.$set(e.input,"justice_rendered_at",t)},expression:"input.justice_rendered_at"}}):e._e()],1),i("div",{staticClass:"w-128"},[1===e.input.justice_rendered?i("InputJusticeRenderedBy",{model:{value:e.input.justice_rendered_by,callback:function(t){e.$set(e.input,"justice_rendered_by",t)},expression:"input.justice_rendered_by"}}):e._e()],1),1===e.input.justice_rendered?i("InputJusticeChallenged",{model:{value:e.input.justice_challenged,callback:function(t){e.$set(e.input,"justice_challenged",t)},expression:"input.justice_challenged"}}):e._e(),i("InputPoliceStatus",{ref:"policeStatus",model:{value:e.input.police_status,callback:function(t){e.$set(e.input,"police_status",t)},expression:"input.police_status"}}),i("div",{staticClass:"w-64"},[e.policeWasRequested?i("InputPoliceRequestedAt",{model:{value:e.input.police_requested_at,callback:function(t){e.$set(e.input,"police_requested_at",t)},expression:"input.police_requested_at"}}):e._e()],1),i("div",{staticClass:"w-64"},[e.policeWasGranted?i("InputPoliceGrantedAt",{model:{value:e.input.police_granted_at,callback:function(t){e.$set(e.input,"police_granted_at",t)},expression:"input.police_granted_at"}}):e._e()],1),i("div",{staticClass:"w-128"},[i("InputBailiff",{model:{value:e.input.bailiff,callback:function(t){e.$set(e.input,"bailiff",t)},expression:"input.bailiff"}})],1)],1)],1)},E_=[],N_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:" ",direction:"horizontal",id:"owner_complaint",validationName:"Plainte de propriétaire",rules:"required"}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"owner_complaint"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"owner_complaint"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"owner_complaint"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},q_=[],D_={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},j_=D_,M_=Object(u["a"])(j_,N_,q_,!1,null,null,null),L_=M_.exports,F_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:"Existence d'une procédure judiciaire",direction:"horizontal",id:"justice_procedure",rules:"required",showMandatoryStar:!0}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"justice_procedure"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"justice_procedure"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"justice_procedure"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},z_=[],R_={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},B_=R_,V_=Object(u["a"])(B_,F_,z_,!1,null,null,null),U_=V_.exports,H_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:"Décision de justice rendue",direction:"horizontal",id:"justice_rendered",rules:"required",showMandatoryStar:!0}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"justice_rendered"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"justice_rendered"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"justice_rendered"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},G_=[],W_={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},Q_=W_,J_=Object(u["a"])(Q_,H_,G_,!1,null,null,null),Y_=J_.exports,Z_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DatepickerV2",{attrs:{label:"Date de la décision",id:"justice_rendered_at",rules:"required|renderedAfterInstallation:@built_at","data-cy-field":"justice_rendered_at",showMandatoryStar:!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},K_=[];Object(D["c"])("renderedAfterInstallation",{params:["target"],validate(e,{target:t}){return e>=t},message:"La date de la décision doit être ultérieure à la date d'installation"});var X_={props:{value:{type:Date,required:!1}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},ey=X_,ty=Object(u["a"])(ey,Z_,K_,!1,null,null,null),iy=ty.exports,ay=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextInput",{attrs:{id:"justice_rendered_by",label:"Origine de la décision",info:"Exemple : tribunal de grande instance",rules:"required",cypressName:"justice_rendered_by",showMandatoryStar:!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},sy=[],ny={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},oy=ny,ry=Object(u["a"])(oy,ay,sy,!1,null,null,null),ly=ry.exports,cy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:"Existence d'un contentieux",direction:"horizontal",id:"justice_challenged",rules:"required",showMandatoryStar:!0}},[i("Radio",{attrs:{variant:"card",label:"Oui",checkValue:1,cypressName:"justice_challenged"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Non",checkValue:0,cypressName:"justice_challenged"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),i("Radio",{attrs:{variant:"card",label:"Inconnu",checkValue:-1,cypressName:"justice_challenged"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},uy=[],dy={props:{value:{type:Number,required:!1,default:void 0}},data(){return{checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},py=dy,my=Object(u["a"])(py,cy,uy,!1,null,null,null),hy=my.exports,vy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("CheckableGroup",{attrs:{label:"Statut du concours de la force publique",id:"police_status",rules:"required",showMandatoryStar:!0}},e._l(e.statuses,(function(t){return i("Radio",{key:t.value,attrs:{variant:"card",label:t.label,checkValue:t.value,cypressName:"police_status"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})})),1)},fy=[],gy={props:{value:{type:String,required:!1,default:void 0}},data(){return{statuses:[{value:"none",label:"Non demandé"},{value:"requested",label:"Demandé"},{value:"granted",label:"Obtenu"},{value:"null",label:"Inconnu"}],checked:this.value}},watch:{value(){this.checked=this.value},checked(){this.$emit("input",this.checked)}}},by=gy,_y=Object(u["a"])(by,vy,fy,!1,null,null,null),yy=_y.exports,wy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DatepickerV2",{attrs:{id:"police_requested_at",label:"Date de la demande du CFP",rules:"required|requestedAfterCreation:@built_at","data-cy-field":"police_requested_at",showMandatoryStar:!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Cy=[];Object(D["c"])("requestedAfterCreation",{params:["target"],validate(e,{target:t}){return e>=t},message:"La date de la demande doit être ultérieure à la date d'installation"});var ky={props:{value:{type:Date,required:!1}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},xy=ky,Sy=Object(u["a"])(xy,wy,Cy,!1,null,null,null),Py=Sy.exports,$y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DatepickerV2",{attrs:{label:"Date d'octroi du CFP",id:"police_granted_at",rules:"required|grantedAfterCreation:@built_at|grantedAfterRequest:@police_requested_at","data-cy-field":"police_granted_at",showMandatoryStar:!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},Ty=[];Object(D["c"])("grantedAfterCreation",{params:["target"],validate(e,{target:t}){return e>=t},message:"La date d'octroi doit être ultérieure à la date d'installation"}),Object(D["c"])("grantedAfterRequest",{params:["target"],validate(e,{target:t}){return e>=t},message:"La date d'octroi doit être ultérieure à la date de la demande"});var Iy={props:{value:{type:Date,required:!1}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},Oy=Iy,Ay=Object(u["a"])(Oy,$y,Ty,!1,null,null,null),Ey=Ay.exports,Ny=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TextInput",{attrs:{label:"Nom de l'étude de l'huissier",id:"bailiff",cypressName:"bailiff"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},qy=[],Dy={props:{value:{type:String,required:!1,default:""}},data(){return{input:this.value}},watch:{value(){this.input=this.value},input(){this.$emit("input",this.input)}}},jy=Dy,My=Object(u["a"])(jy,Ny,qy,!1,null,null,null),Ly=My.exports,Fy={components:{InputOwnerComplaint:L_,InputJusticeProcedure:U_,InputJusticeRendered:Y_,InputJusticeRenderedAt:iy,InputJusticeRenderedBy:ly,InputJusticeChallenged:hy,InputPoliceStatus:yy,InputPoliceRequestedAt:Py,InputPoliceGrantedAt:Ey,InputBailiff:Ly},props:{value:{type:Object,required:!0}},data(){return{input:this.value}},computed:{policeWasRequested(){const e=this.input.police_status;return"requested"===e||"granted"===e},policeWasGranted(){const e=this.input.police_status;return"granted"===e}}},zy=Fy,Ry=Object(u["a"])(zy,A_,E_,!1,null,null,null),By=Ry.exports,Vy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"sticky stickyColumn"},[i("div",{staticClass:"font-bold"},[e._v("Rubriques")]),i("LeftColumnNavLink",{attrs:{to:"#characteristics",activeSection:"characteristics"===e.activeSection}},[e._v("Caractéristiques du site")]),i("LeftColumnNavLink",{attrs:{to:"#people",activeSection:"people"===e.activeSection}},[e._v("Habitants")]),i("LeftColumnNavLink",{attrs:{to:"#living_conditions",activeSection:"living_conditions"===e.activeSection}},[e._v("Conditions de vie et environnement")]),i("LeftColumnNavLink",{attrs:{to:"#judicial",activeSection:"judicial"===e.activeSection}},[e._v("Procédure judiciaire")])],1)])},Uy=[],Hy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["pl-2 border-l-4 my-2",e.activeSection?"text-primary  border-primary":"border-transparent"]},[i("router-link",{attrs:{to:e.to}},[e._t("default")],2)],1)},Gy=[],Wy={props:{to:{type:String},activeSection:{type:Boolean}}},Qy=Wy,Jy=Object(u["a"])(Qy,Hy,Gy,!1,null,null,null),Yy=Jy.exports,Zy={components:{LeftColumnNavLink:Yy},data(){return{activeSection:"characteristics"}},mounted(){const e=e=>{e.forEach(e=>{e.isIntersecting&&(this.activeSection=e.target.id)})};let t=new IntersectionObserver(e,{rootMargin:"0px",threshold:.2});t.observe(document.querySelector("#judicial")),t.observe(document.querySelector("#living_conditions")),t.observe(document.querySelector("#people")),t.observe(document.querySelector("#characteristics"))}},Ky=Zy,Xy=(i("ad7a"),Object(u["a"])(Ky,Vy,Uy,!1,null,"3c84c0c2",null)),ew=Xy.exports,tw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return Object.values(e.errors).filter((function(e){return e.length})).length?i("div",{staticClass:"bg-red200 p-6"},[e._v(" Le formulaire comprend des erreurs : "),i("ul",{staticClass:"mt-4"},e._l(e.errors,(function(t,a){return i("li",{directives:[{name:"show",rawName:"v-show",value:t.length,expression:"error.length"}],key:a},[i("router-link",{staticClass:"link",attrs:{to:{hash:a}}},[e._v(e._s(t[0]))])],1)})),0)]):e._e()},iw=[],aw={props:{errors:{type:Object,required:!1,default(){return{}}}}},sw=aw,nw=Object(u["a"])(sw,tw,iw,!1,null,null,null),ow=nw.exports,rw={props:{mode:{type:String},data:{type:Object,default(){return{}}}},components:{PrivateContainer:gp,TownFormLeftColumn:ew,TownFormErrorLog:ow,TownFormPanelInfo:nh,TownFormPanelLocation:Ih,TownFormPanelCharacteristics:gv,TownFormPanelPeople:of,TownFormPanelLivingConditions:O_,TownFormPanelJudicial:By},data(){const{field_types:e,user:t}=zo();return{error:null,loading:!1,showInfo:!0,town:{location:{address:{label:this.data.address?this.data.address:void 0,citycode:this.data.city?this.data.city.code:void 0},name:this.data.name||void 0,coordinates:this.data.latitude?[this.data.latitude,this.data.longitude]:void 0},characteristics:{built_at:this.data.builtAt?new Date(1e3*this.data.builtAt):void 0,declared_at:this.data.declaredAt?new Date(1e3*this.data.declaredAt):void 0,field_type:this.data.fieldType?this.data.fieldType.id:void 0,detailed_address:this.data.addressDetails,owner_type:this.data.ownerType?this.data.ownerType.id:void 0,owner:this.data.owner},people:{population:{populationTotal:this.intToStr(this.data.populationTotal),populationCouples:this.intToStr(this.data.populationCouples),populationMinors:this.intToStr(this.data.populationMinors)},populationMinors:{populationMinors0To3:this.intToStr(this.data.populationMinors0To3),populationMinors3To6:this.intToStr(this.data.populationMinors3To6),populationMinors6To12:this.intToStr(this.data.populationMinors6To12),populationMinors12To16:this.intToStr(this.data.populationMinors12To16),populationMinors16To18:this.intToStr(this.data.populationMinors16To18),minorsInSchool:this.intToStr(this.data.minorsInSchool)},social_origins:this.data.socialOrigins?this.data.socialOrigins.map(({id:e})=>e):[],census_status:this.toNullableStr(this.data.censusStatus),census_conducted_at:this.data.censusConductedAt?new Date(1e3*this.data.censusConductedAt):void 0,census_conducted_by:this.data.censusConductedBy},living_conditions:{access_to_water:this.boolToInt(this.data.accessToWater),water_comments:this.data.waterComments||void 0,electricity_type:this.data.electricityType?this.data.electricityType.id:void 0,electricity_comments:this.data.electricityComments||void 0,access_to_sanitary:this.boolToInt(this.data.accessToSanitary),sanitary_comments:this.data.sanitaryComments||void 0,trash_evacuation:this.boolToInt(this.data.trashEvacuation),water_potable:this.boolToInt(this.data.waterPotable),water_public_point:this.boolToInt(this.data.waterPublicPoint),water_continuous_access:this.boolToInt(this.data.waterContinuousAccess),water_distance:this.data.waterDistance,water_roads_to_cross:this.boolToInt(this.data.waterRoadsToCross),water_everyone_has_access:this.boolToInt(this.data.waterEveryoneHasAccess),water_stagnant_water:this.boolToInt(this.data.waterStagnantWater),water_hand_wash_access:this.boolToInt(this.data.waterHandWashAccess),water_hand_wash_access_number:this.data.waterHandWashAccessNumber,sanitary_number:this.data.sanitaryNumber,sanitary_insalubrious:this.boolToInt(this.data.sanitaryInsalubrious),sanitary_on_site:this.boolToInt(this.data.sanitaryOnSite),trash_cans_on_site:this.data.trashCansOnSite,trash_accumulation:this.boolToInt(this.data.trashAccumulation),trash_evacuation_regular:this.boolToInt(this.data.trashEvacuationRegular),vermin:this.boolToInt(this.data.vermin),vermin_comments:this.data.verminComments,fire_prevention_measures:this.boolToInt(this.data.firePreventionMeasures),fire_prevention_diagnostic:this.boolToInt(this.data.firePreventionDiagnostic),fire_prevention_devices:this.boolToInt(this.data.firePreventionDevices),fire_prevention_site_accessible:this.boolToInt(this.data.firePreventionSiteAccessible),fire_prevention_comments:this.data.firePreventionComments},judicial:{owner_complaint:this.boolToInt(this.data.ownerComplaint),justice_procedure:this.boolToInt(this.data.justiceProcedure),justice_rendered:this.boolToInt(this.data.justiceRendered),justice_rendered_at:this.data.justiceRenderedAt?new Date(1e3*this.data.justiceRenderedAt):void 0,justice_rendered_by:this.data.justiceRenderedBy||void 0,justice_challenged:this.boolToInt(this.data.justiceChallenged),police_status:this.toNullableStr(this.data.policeStatus),police_requested_at:this.data.policeRequestedAt?new Date(1e3*this.data.policeRequestedAt):void 0,police_granted_at:this.data.policeGrantedAt?new Date(1e3*this.data.policeGrantedAt):void 0,bailiff:this.data.bailiff||void 0}},fieldTypes:e,user:t}},computed:{submitWording(){return"create"===this.mode?"Déclarer un site":"Mettre à jour"},successNotificationWording(){return"create"===this.mode?"La déclaration du site a réussi":"Le site a bien été modifié"},backPage(){return"create"===this.mode?"/liste-des-sites":"/site/"+this.data.id}},methods:{back(){this.$router.replace(this.backPage)},closeInfo(){this.showInfo=!1},boolToInt(e){if(void 0!==e)return!0===e?1:!1===e?0:-1},intToStr(e){if("number"===typeof e)return""+e},strToInt(e){return""===e?null:parseInt(e,10)},nullableStr(e){return"null"===e?null:e},toNullableStr(e){return void 0===e||null===e?"null":e},formatDate(e){if(!e||!(e instanceof Date))return e;const t=e.getFullYear(),i=(""+(e.getMonth()+1)).padStart(2,"0"),a=(""+e.getDate()).padStart(2,"0");return`${t}-${i}-${a}`},async submit(){const e=await this.$refs.form.validate();if(e){this.loading=!0,this.$router.replace("#top");try{const[e,t]=this.town.location.coordinates,i=await this.submitFn({...this.town.living_conditions,water_hand_wash_access_number:this.strToInt(this.town.living_conditions.water_hand_wash_access_number),trash_cans_on_site:this.strToInt(this.town.living_conditions.trash_cans_on_site),sanitary_number:this.strToInt(this.town.living_conditions.sanitary_number),address:this.town.location.address.label,citycode:this.town.location.address.citycode,name:this.town.location.name,coordinates:this.town.location.coordinates?`${e},${t}`:void 0,built_at:this.formatDate(this.town.characteristics.built_at),declared_at:this.formatDate(this.town.characteristics.declared_at),field_type:this.town.characteristics.field_type,detailed_address:this.town.characteristics.detailed_address,owner_type:this.town.characteristics.owner_type,owner:this.town.characteristics.owner,population_total:this.strToInt(this.town.people.population.populationTotal),population_couples:this.strToInt(this.town.people.population.populationCouples),population_minors:this.strToInt(this.town.people.population.populationMinors),population_minors_0_3:this.strToInt(this.town.people.populationMinors.populationMinors0To3),population_minors_3_6:this.strToInt(this.town.people.populationMinors.populationMinors3To6),population_minors_6_12:this.strToInt(this.town.people.populationMinors.populationMinors6To12),population_minors_12_16:this.strToInt(this.town.people.populationMinors.populationMinors12To16),population_minors_16_18:this.strToInt(this.town.people.populationMinors.populationMinors16To18),minors_in_school:this.strToInt(this.town.people.populationMinors.minorsInSchool),social_origins:this.town.people.social_origins,census_status:this.nullableStr(this.town.people.census_status),census_conducted_at:this.formatDate(this.town.people.census_conducted_at),census_conducted_by:this.town.people.census_conducted_by,owner_complaint:this.town.judicial.owner_complaint,justice_procedure:this.town.judicial.justice_procedure,justice_rendered:this.town.judicial.justice_rendered,justice_rendered_at:this.formatDate(this.town.judicial.justice_rendered_at),justice_rendered_by:this.town.judicial.justice_rendered_by,justice_challenged:this.town.judicial.justice_challenged,police_status:this.nullableStr(this.town.judicial.police_status),police_requested_at:this.formatDate(this.town.judicial.police_requested_at),police_granted_at:this.formatDate(this.town.judicial.police_granted_at),bailiff:this.town.judicial.bailiff});let a;this.loading=!1,a="create"===this.mode?i.town.id:this.data.id,this.$router.push("/site/"+a),Qc({group:"notifications",type:"success",title:"Succès",text:this.successNotificationWording})}catch(t){if(!t.fields)return void console.log(t);this.error=t,this.loading=!1,this.$refs.form.setErrors(t.fields),this.$router.replace("#erreurs")}}else this.$router.replace("#top",()=>this.$router.replace("#erreurs"))},submitFn(e){return"create"===this.mode?ml(e):hl(this.data.id,e)}}},lw=rw,cw=(i("4ca6"),i("4512"),Object(u["a"])(lw,Km,Xm,!1,null,"7243adaf",null)),uw=cw.exports,dw={components:{TownForm:uw,PrivateLayout:kp}},pw=dw,mw=Object(u["a"])(pw,Ym,Zm,!1,null,null,null),hw=mw.exports,vw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.error?i("PrivateLayout",[i("div",{staticClass:"bg-red600 text-center text-primary text-display-lg mt-16"},[e._v(" "+e._s(e.error)+" ")])]):null===e.town?i("PrivateLayout",[i("div",{staticClass:"text-center text-primary text-display-lg mt-16"},[i("Spinner")],1)]):i("PrivateLayout",[i("TownForm",{attrs:{mode:"update",data:e.town}})],1)},fw=[],gw={components:{TownForm:uw,PrivateLayout:kp},data(){return{loading:!1,error:null,town:null}},mounted(){this.fetchData()},methods:{fetchData(){!0!==this.loading&&(this.loading=!0,this.error=null,pl(this.$route.params.id).then(e=>{this.town=e,this.loading=!1}).catch(e=>{this.error=e.user_message,this.loading=!1}))}}},bw=gw,_w=Object(u["a"])(bw,vw,fw,!1,null,null,null),yw=_w.exports,ww=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.loading?i("PrivateLayout",[i("div",{staticClass:"text-center text-primary text-display-lg mt-16"},[i("Spinner")],1)]):null!==e.error?i("PrivateLayout",[i("div",{staticClass:"text-center text-error text-primary text-display-lg mt-16"},[e._v(" "+e._s(e.error)+" ")])]):i("PrivateLayout",[e.town?i("PrivateContainer",{staticClass:"py-10"},[i("TownDetailsHeader",{attrs:{town:e.town},on:{openCancel:e.openCancel,openCovid:e.openCovid,deleteTown:e.deleteTown}}),i("div",{staticClass:"flex pt-10 "},[i("TownDetailsLeftColumn",{staticClass:"leftColumnWidth",attrs:{hasJusticePermission:e.hasJusticePermission,town:e.town},on:{openHistory:e.openHistory}}),i("div",{staticClass:"flex-1"},[i("TownDetailsPanelCharacteristics",{staticClass:"mb-10",attrs:{town:e.town,id:"characteristics"}}),i("TownDetailsPanelPeople",{staticClass:"mb-10",attrs:{town:e.town,id:"people"}}),i("TownDetailsPanelLivingConditions",{staticClass:"mb-10",attrs:{town:e.town,id:"living_conditions"}}),e.hasJusticePermission?i("TownDetailsPanelJudicial",{staticClass:"mb-10",attrs:{town:e.town,id:"judicial"}}):e._e()],1)],1)],1):e._e(),e.hasPermission("shantytown_comment.create")?i("div",{staticClass:"bg-orange200 py-10"},[i("PrivateContainer",{staticClass:"flex items-center"},[i("div",{staticClass:"leftColumnWidth text-sm"},[i("div",[i("Icon",{attrs:{icon:"exclamation-triangle"}})],1),i("div",{staticClass:"font-bold"},[e._v(" Quelles sont les règles de confidentialités ? ")]),i("div",[e._v(" Ne pas citer l’identité des individus (Nom, âge, sexe, origine…) ")])]),i("TownDetailsNewComment",{class:["flex-1",0===e.town.comments.regular.length&&"pb-32"],attrs:{id:"newComment",user:e.user,nbComments:e.town.comments.regular.length},on:{submit:function(t){e.town.comments.regular=t}}})],1)],1):e._e(),e.hasPermission("shantytown_comment.list")&&e.town.comments.regular.length?i("div",{class:["bg-orange200",!e.hasPermission("shantytown_comment.create")&&"pt-10",e.town.comments.regular.length>0&&"pb-32"]},[i("PrivateContainer",{staticClass:"flex",attrs:{id:"comments"}},[i("div",{staticClass:"leftColumnWidth"}),i("TownDetailsComments",{staticClass:"flex-1",attrs:{comments:e.town.comments.regular}})],1)],1):e._e(),i("TownDetailsHistorySidePanel",{attrs:{town:e.town,isOpen:e.historyOpen,closePanel:function(){return e.historyOpen=!1}}}),i("TownDetailsCovidCommentsSidePanel",{attrs:{town:e.town,isOpen:e.covidOpen,closePanel:function(){return e.covidOpen=!1}},on:{updateTown:function(t){e.town=t}}}),i("TownDetailsCloseModal",{attrs:{town:e.town,isOpen:e.closeOpen},on:{closeModal:function(t){e.closeOpen=!1},updateTown:function(t){e.town=t}}})],1)},Cw=[],kw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",{attrs:{"data-cy-data":"city"}},[e._v(" "+e._s(e.town.city.name)+" ("+e._s(e.town.departement.name)+") ")]),i("div",{staticClass:"text-display-lg",attrs:{"data-cy-data":"address"}},[e._v(" "+e._s(e.town.addressSimple)+" "),e.town.name?i("span",{staticClass:"text-display-xs"},[e._v("« "+e._s(e.town.name)+" »")]):e._e()])]),i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"flex items-center uppercase text-sm mr-4"},[i("div",{staticClass:"rounded-full bg-corail h-3 w-3 mr-2 "}),e._v(" Mis à jour le "+e._s(e.formatDate(e.town.updatedAt,"d/m/y"))+" ")]),i("div",{staticClass:"flex items-center text-red uppercase text-xs font-bold cursor-pointer",on:{click:function(t){return e.$emit("openCovid")}}},[i("Icon",{staticClass:"mr-2",attrs:{icon:"comment"}}),i("div",[e._v(" "+e._s(this.town.comments.covid.length||0)+" commentaires covid ")])],1)]),i("div",{staticClass:"flex justify-end mt-2"},[e.hasLocalizedPermission("shantytown.close")&&"open"===e.town.status?i("Button",{staticClass:"mr-8",attrs:{variant:"primaryOutline",iconPosition:"left"},on:{click:function(t){return e.$emit("openCancel")}}},[e._v("Fermer le site")]):e._e(),e.hasLocalizedPermission("shantytown.update")&&"open"===e.town.status?i("Button",{staticClass:"mr-8",attrs:{variant:"primary",icon:"pen",iconPosition:"left"},on:{click:e.routeToUpdate}},[e._v("Mettre à jour")]):e._e(),e.hasLocalizedPermission("shantytown_comment.list")||e.hasLocalizedPermission("shantytown_comment.create")?i("router-link",{attrs:{to:"#newComment"},nativeOn:{click:function(t){return e.scrollFix("#newComment")}}},[i("Button",{attrs:{variant:"secondary",icon:"comment",iconPosition:"left"}},[e._v("Journal du site")])],1):e._e(),e.hasLocalizedPermission("shantytown.delete")?i("Button",{staticClass:"ml-8",attrs:{variant:"secondary",icon:"trash-alt",iconPosition:"left","data-cy-button":"delete"},on:{click:function(t){return e.$emit("deleteTown")}}},[e._v("Supprimer le site")]):e._e()],1)])},xw=[],Sw={props:{town:{type:Object}},data(){const{user:e}=zo();return{user:e}},methods:{hasLocalizedPermission(e){const t=Bo(e);if(null===t)return!1;let i="local"!==t.geographic_level?t.geographic_level:this.user.organization.location.type;return"nation"===i||null!==this.user.organization.location[i]&&this.town[i].code===this.user.organization.location[i].code},scrollFix(e){if(e===this.$route.hash){const t=document.getElementById(e.slice(1));t&&window.scrollTo(0,t.offsetTop)}},formatDate(...e){return window.App.formatDate.apply(window,e)},routeToUpdate(){this.$router.push(`/site/${this.town.id}/mise-a-jour`)}}},Pw=Sw,$w=Object(u["a"])(Pw,kw,xw,!1,null,null,null),Tw=$w.exports,Iw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"sticky stickyColumn"},[i("div",{staticClass:"font-bold"},[e._v("Rubriques")]),i("LeftColumnNavLink",{attrs:{to:"#characteristics",activeSection:"characteristics"===e.activeSection}},[e._v("Caractéristiques du site")]),i("LeftColumnNavLink",{attrs:{to:"#people",activeSection:"people"===e.activeSection}},[e._v("Habitants")]),i("LeftColumnNavLink",{attrs:{to:"#living_conditions",activeSection:"living_conditions"===e.activeSection}},[e._v("Conditions de vie et environnement")]),e.hasJusticePermission?i("LeftColumnNavLink",{attrs:{to:"#judicial",activeSection:"judicial"===e.activeSection}},[e._v("Procédure judiciaire")]):e._e(),e.hasPermission("shantytown_comment.list")||e.hasPermission("shantytown_comment.create")?i("router-link",{staticClass:"text-secondary",attrs:{to:"#newComment"},nativeOn:{click:function(t){return e.scrollFix("#newComment")}}},[i("div",{staticClass:"flex text-secondary font-bold mt-4 cursor-pointer"},[i("Icon",{attrs:{icon:"comment"}}),i("div",{staticClass:"ml-2"},[i("div",[e._v("Le journal du site")]),i("div",[e._v(" "+e._s(e.town.comments.regular.length)+" message"+e._s(e.town.comments.regular.length>1?"s":"")+" ")])])],1)]):e._e(),i("div",{staticClass:"flex text-primary font-bold mt-4 cursor-pointer",on:{click:function(t){return e.$emit("openHistory")}}},[i("Icon",{attrs:{icon:"history"}}),i("div",{staticClass:"ml-2"},[e._v("Voir l'historique des modifications")])],1)],1)])},Ow=[],Aw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["pl-2 border-l-4 my-2",e.activeSection?"text-primary  border-primary":"border-transparent"]},[i("router-link",{attrs:{to:e.to}},[e._t("default")],2)],1)},Ew=[],Nw={props:{to:{type:String},activeSection:{type:Boolean}}},qw=Nw,Dw=Object(u["a"])(qw,Aw,Ew,!1,null,null,null),jw=Dw.exports,Mw={components:{LeftColumnNavLink:jw},props:{town:{type:Object},hasJusticePermission:{type:Boolean}},data(){return{activeSection:"characteristics"}},methods:{hasPermission:Vo,scrollFix(e){if(e===this.$route.hash){const t=document.getElementById(e.slice(1));t&&window.scrollTo(0,t.offsetTop)}}},mounted(){const e=e=>{e.forEach(e=>{e.isIntersecting&&(this.activeSection=e.target.id)})};let t=new IntersectionObserver(e,{rootMargin:"0px",threshold:.5});this.hasJusticePermission&&t.observe(document.querySelector("#judicial")),t.observe(document.querySelector("#living_conditions")),t.observe(document.querySelector("#people")),t.observe(document.querySelector("#characteristics"))}},Lw=Mw,Fw=(i("2839"),Object(u["a"])(Lw,Iw,Ow,!1,null,"a83dcdd4",null)),zw=Fw.exports,Rw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TownDetailsPanel",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Caractéristiques du site")]},proxy:!0},{key:"body",fn:function(){return[i("div",{staticClass:"flex"},[i("div",{staticClass:"w-1/2 pr-8"},[i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",[i("div",{staticClass:"font-bold"},[e._v(" Installé depuis ")]),e.town.builtAt?i("div",[i("div",[e._v(" "+e._s(e.formatDateSince(e.town.builtAt))+" ")]),i("div",{attrs:{"data-cy-data":"built_at"}},[e._v(" "+e._s(e.buildAt)+" ")])]):i("div",{attrs:{"data-cy-data":"built_at"}},[e._v(" non communiquée ")])]),i("div",[i("div",{staticClass:"font-bold"},[e._v(" Signalé depuis ")]),e.town.declaredAt?i("div",[i("div",[e._v(" "+e._s(e.formatDateSince(e.town.declaredAt))+" ")]),i("div",{attrs:{"data-cy-data":"declared_at"}},[e._v(" "+e._s(e.declaredAt)+" ")])]):i("div",{attrs:{"data-cy-data":"declared_at"}},[e._v(" non communiquée ")])])])]),i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v(" Type de site ")]),i("div",{staticClass:"flex items-center",attrs:{"data-cy-data":"field_type"}},[i("Icon",{staticClass:"text-lg mr-2",style:"color: "+e.town.fieldType.color,attrs:{icon:"map-marker-alt"}}),e._v(" "+e._s(e.town.fieldType.label)+" ")],1)])]),e.town.addressDetails?i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v(" Informations d'accès ")]),i("div",{attrs:{"data-cy-data":"address_details"}},[e._v(" "+e._s(e.town.addressDetails)+" ")])])]):e._e(),i("TownDetailsPanelSection",[i("div",{staticClass:"font-bold"},[e._v(" Coordonnées GPS ")]),i("div",{attrs:{"data-cy-data":"address_details"}},[e._v(" Lat "+e._s(e.town.latitude)+", Long "+e._s(e.town.longitude)+" ")]),i("div",[i("Button",{attrs:{variant:"primaryText",icon:"copy",iconPosition:"left",href:"#"},on:{click:e.copyCoordinates}},[e._v("Copier")])],1)]),i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v(" Propriétaire ")]),i("div",{attrs:{"data-cy-data":"owner_type"}},[e._v(" "+e._s(e.town.ownerType.label)+" ")])])]),"Inconnu"!==e.town.ownerType.label?i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v(" Nom du propriétaire ")]),i("div",{attrs:{"data-cy-data":"owner"}},[e._v(" "+e._s(e.town.owner||"non communiqué")+" ")])])]):e._e()],1),i("div",{staticClass:"w-1/2 bg-G200"},[i("div",{staticClass:"v1"},[i("Map",{attrs:{"display-searchbar":!1,towns:[e.town],"default-view":e.center}})],1)])])]},proxy:!0}])})},Bw=[],Vw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"townDetailsPanelShadow py-5 px-6"},[i("div",{staticClass:"text-primary text-display-lg"},[e._t("title")],2),i("div",{staticClass:"pt-4"},[e._t("body")],2)])},Uw=[],Hw=(i("6fc5"),{}),Gw=Object(u["a"])(Hw,Vw,Uw,!1,null,"1d97ba82",null),Ww=Gw.exports,Qw=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"border-t border-G200 py-4"},[e._t("default")],2)},Jw=[],Yw={},Zw=Object(u["a"])(Yw,Qw,Jw,!1,null,null,null),Kw=Zw.exports,Xw={props:{town:{type:Object}},components:{TownDetailsPanel:Ww,TownDetailsPanelSection:Kw,Map:Id},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)},formatDateSince:Rm,copyCoordinates(){const e=document.createElement("input");e.value=`${this.town.latitude},${this.town.longitude}`,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Qc({group:"notifications",type:"success",title:"Succès",text:"Les coordonnées ont été copiées dans le presse-papier"})}},computed:{buildAt(){return new Date(1e3*this.town.builtAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},declaredAt(){return new Date(1e3*this.town.declaredAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},center(){return{center:[this.town.latitude,this.town.longitude],zoom:15}}}},eC=Xw,tC=Object(u["a"])(eC,Rw,Bw,!1,null,null,null),iC=tC.exports,aC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TownDetailsPanel",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Habitants")]},proxy:!0},{key:"body",fn:function(){return[i("TownDetailsPanelSection",[i("div",{staticClass:"italic mb-4"},[e._v(" Le nombre de personnes sur un site est mouvant, les données fournies par les acteurs, même des estimations, participent à l'amélioration de la connaissance. ")]),i("table",{staticClass:"table-fixed text-center mb-6"},[i("thead",[i("tr",[i("td"),i("td",{staticClass:"border-b"}),e._l(e.populationHistory,(function(t,a){return i("td",{key:a,staticClass:"w-24 py-2 border-b",class:{"font-bold":0===a,"bg-gray-200":0===a}},[e._v(" "+e._s(t.date)),i("br"),e._v(e._s(t.year)+" ")])}))],2)]),i("tbody",e._l(e.sections,(function(t,a){return i("tr",{key:a,class:t.css},[0===a?i("td",{staticClass:"align-top pr-2 text-xl",attrs:{rowspan:e.sections.length}},[i("Icon",{staticClass:"mr-1",attrs:{icon:"male"}}),i("Icon",{attrs:{icon:"male"}})],1):e._e(),i("td",{staticClass:"text-left pr-4 border-b"},[e._v(" "+e._s(t.title)+" ")]),e._l(e.populationHistory,(function(a,s){return i("td",{key:s,staticClass:"py-1 border-b",class:{"border-r":s>0||e.populationHistory.length<=1,"bg-gray-100":0===s},attrs:{"data-cy-data":0===s?t.data:void 0}},[e._v(" "+e._s(a[t.data])+" ")])}))],2)})),0)]),i("div",[i("div",{staticClass:"font-bold"},[e._v("Origine")]),i("div",{attrs:{"data-cy-data":"social_origins"}},[e.town.socialOrigins.length?e._l(e.town.socialOrigins,(function(t){return i("div",{key:t.id,staticClass:"flex items-center"},[i("img",{staticClass:" w-8 mr-2",attrs:{src:e.socialOrigin(t).img}}),i("span",{staticClass:"text-display-sm"},[e._v(e._s(e.socialOrigin(t).label))])])})):i("div",{staticClass:"text-G600"},[e._v(" inconnue ")])],2)])]),i("TownDetailsPanelSection",[i("div",{staticClass:"flex items-center justify-between"},[i("div",{staticClass:"w-96"},[i("div",{staticClass:"font-bold"},[e._v("Diagnostic social")]),i("div",{attrs:{"data-cy-data":"census_status"}},[e._v(" "+e._s(e.socialDiagnostic)+" ")])]),i("div",{staticClass:"italic"},[e._v(" Un diagnostic social vise à identifier les situations et besoins des familles et personnes, de repérer le contexte territorial et les acteurs en présence. ")])])])]},proxy:!0}])})},sC=[],nC={props:{town:{type:Object}},data(){return{sections:[{title:"Personnes",css:"font-bold",data:"populationTotal"},{title:"Ménages",css:"font-bold",data:"populationCouples"},{title:"Mineurs",data:"populationMinors"},{title:"0 - 3 ans",data:"populationMinors0To3"},{title:"3 - 6 ans",data:"populationMinors3To6"},{title:"6 - 12 ans",data:"populationMinors6To12"},{title:"12 - 16 ans",data:"populationMinors12To16"},{title:"16 - 18 ans",data:"populationMinors16To18"},{title:"Inscrits en établissement scolaire",data:"minorsInSchool"}]}},components:{TownDetailsPanel:Ww,TownDetailsPanelSection:Kw},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)},socialOrigin(e){return 1===e.id?{id:1,label:e.label,img:Dp.a}:2===e.id?{id:2,label:e.label,img:Np.a}:3===e.id?{id:3,label:e.label,img:Mp.a}:e},intToStr(e,t="NC"){return void 0===e||null===e?t:e}},computed:{populationHistory(){const e={date:this.formatDate(this.town.updatedAt,"d B"),year:this.formatDate(this.town.updatedAt,"y"),populationTotal:this.intToStr(this.town.populationTotal,"-"),populationCouples:this.intToStr(this.town.populationCouples,"-"),populationMinors:this.intToStr(this.town.populationMinors,"-"),populationMinors0To3:this.intToStr(this.town.populationMinors0To3,"-"),populationMinors3To6:this.intToStr(this.town.populationMinors3To6,"-"),populationMinors6To12:this.intToStr(this.town.populationMinors6To12,"-"),populationMinors12To16:this.intToStr(this.town.populationMinors12To16,"-"),populationMinors16To18:this.intToStr(this.town.populationMinors16To18,"-"),minorsInSchool:this.intToStr(this.town.minorsInSchool,"-")};let t={...e};const i=this.town.changelog.reduce((e,i,a)=>{const s=i.diff.filter(({fieldKey:e})=>e.startsWith("population"));if(0===s.length)return e;let n;return n=a<this.town.changelog.length-1?this.town.changelog[a+1].date:this.town.createdAt,t.date=this.formatDate(n,"d B"),t.year=this.formatDate(n,"y"),s.forEach(({fieldKey:e,oldValue:i})=>{t[e]="non renseigné"===i?"-":i}),[...e,{...t}]},[]);return[e,...i]},socialDiagnostic(){return"done"===this.town.censusStatus?`Réalisé le ${this.formatDate(this.town.censusConductedAt,"d/m/y")} par ${this.town.censusConductedBy}`:"scheduled"===this.town.censusStatus?`Prévu le ${this.formatDate(this.town.censusConductedAt,"d/m/y")} par ${this.town.censusConductedBy}`:"none"===this.town.censusStatus?"Non réalisé":"Non communiqué"},populationMinors0To3(){return this.intToStr(this.town.populationMinors0To3)},populationMinors3To6(){return this.intToStr(this.town.populationMinors3To6)},populationMinors6To12(){return this.intToStr(this.town.populationMinors6To12)},populationMinors12To16(){return this.intToStr(this.town.populationMinors12To16)},populationMinors16To18(){return this.intToStr(this.town.populationMinors16To18)},minorsInSchool(){return this.intToStr(this.town.minorsInSchool)}}},oC=nC,rC=Object(u["a"])(oC,aC,sC,!1,null,null,null),lC=rC.exports,cC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TownDetailsPanel",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Conditions de vie et environnement")]},proxy:!0},{key:"body",fn:function(){return[i("div",[i("TownDetailsPanelLivingConditionsSection",{attrs:{title:"Accès à l’eau",value:e.town.accessToWater,cypressName:"access_to_water",cypressComments:"water_comments",cypressDetailsPrefix:"water",comments:e.town.waterComments,details:e.details.water}}),i("TownDetailsPanelLivingConditionsSection",{attrs:{title:"Accès aux toilettes",value:e.town.accessToSanitary,cypressName:"access_to_sanitary",cypressComments:"sanitary_comments",cypressDetailsPrefix:"sanitary",comments:e.town.sanitaryComments,details:e.details.sanitary}}),i("TownDetailsPanelLivingConditionsSection",{attrs:{title:"Accès à l’électricité",value:e.town.electricityType.value,cypressName:"electricity_type",cypressComments:"electricity_comments",cypressDetailsPrefix:"electricity",comments:e.town.electricityComments}}),i("TownDetailsPanelLivingConditionsSection",{attrs:{title:"Évacuation des déchets",value:e.town.trashEvacuation,cypressName:"trash_evacuation",cypressComments:"trash_comments",cypressDetailsPrefix:"trash",details:e.details.trash}}),i("TownDetailsPanelLivingConditionsSection",{attrs:{title:"Présence de nuisibles",value:e.town.vermin,cypressName:"vermin",inverted:"",cypressComments:"vermin_comments",cypressDetailsPrefix:"vermin",comments:e.town.verminComments}}),i("TownDetailsPanelLivingConditionsSection",{attrs:{title:"Prévention des incendies",value:e.town.firePreventionMeasures,cypressName:"fire_prevention_measures",cypressComments:"fire_prevention_comments",cypressDetailsPrefix:"fire_prevention",comments:e.town.firePreventionComments,details:e.details.firePrevention}})],1)]},proxy:!0}])})},uC=[],dC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TownDetailsPanelSection",[i("div",{class:[e.colorClass,"flex items-center"]},[i("Icon",{class:["mr-1","font-bold"],attrs:{icon:e.icon}}),i("div",[i("div",{staticClass:"flex items-center"},[i("div",{class:[e.colorClass,"font-bold","mr-1"]},[e._v(" "+e._s(e.title)+" : ")]),i("div",{attrs:{"data-cy-data":e.cypressName}},[e._v(e._s(e.text))])]),e._t("default")],2)],1),i("div",{staticClass:"ml-4"},[e.comments?i("div",{attrs:{"data-cy-data":e.cypressComments}},[e._v(" "+e._s(e.comments)+" ")]):e._e(),this.value&&e.details&&(e.details.negative.length||e.details.positive.length||e.details.unknown.length)?i("div",{staticClass:"border border-primary rounded px-8 mt-4"},[i("div",{staticClass:"border-b-2 border-G200 py-2 font-bold text-primary flex items-center justify-between"},[i("div",[e.details.negative.length?i("div",[e._v(" "+e._s(e.details.negative.length)+" action"+e._s(e.details.negative.length>1?"s":"")+" pour améliorer l'accès ")]):e.details.positive.length?i("div",[e._v(" "+e._s(e.details.positive.length)+" action"+e._s(e.details.positive.length>1?"s":"")+" pour entretenir l'accès ")]):e.details.unknown.length?i("div",[e._v(" "+e._s(e.details.unknown.length)+" information"+e._s(e.details.unknown.length>1?"s":"")+" non renseignées ")]):e._e()]),i("div",[i("Button",{attrs:{icon:e.collapsed?"chevron-up":"chevron-down",variant:"primaryText"},on:{click:e.collapse}})],1)]),e.collapsed?e._e():i("div",[i("TownDetailsPanelLivingConditionsDetails",{attrs:{type:"negative",cypressName:e.cypressDetailsPrefix+"_details_negative",details:e.details.negative}}),i("TownDetailsPanelLivingConditionsDetails",{attrs:{type:"positive",cypressName:e.cypressDetailsPrefix+"_details_positive",details:e.details.positive}}),i("TownDetailsPanelLivingConditionsDetails",{attrs:{type:"unknown",cypressName:e.cypressDetailsPrefix+"_details_unknown",details:e.details.unknown}})],1)]):e._e()])])},pC=[],mC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.details.length?i("div",{staticClass:"border-b-2 border-G200 py-2"},[i("div",{staticClass:"flex items-center"},[i("Icon",{class:["mr-1","mb-1","font-bold","text-G600"],attrs:{icon:{positive:"check",negative:"exclamation-triangle",unknown:"question"}[e.type]}}),i("div",{staticClass:"font-bold"},[e._v(" "+e._s({positive:"À entretenir",negative:"À améliorer",unknown:"Non renseigné"}[e.type])+" ")])],1),i("ul",{staticClass:"list-disc ml-10",attrs:{"data-cy-data":e.cypressName}},e._l(e.details,(function(t,a){return i("li",{key:a},[e._v(" "+e._s(t)+" ")])})),0)]):e._e()},hC=[],vC={props:{type:{type:String},details:{type:Array},cypressName:{type:String}}},fC=vC,gC=Object(u["a"])(fC,mC,hC,!1,null,null,null),bC=gC.exports,_C={components:{TownDetailsPanelLivingConditionsDetails:bC,TownDetailsPanelSection:Kw},props:{title:{type:String},value:{validator:e=>"boolean"===typeof e||null===e},cypressName:{type:String},cypressComments:{type:String},cypressDetailsPrefix:{type:String},comments:{type:String},details:{type:Array},inverted:{type:Boolean}},data(){return{collapsed:!1}},mounted(){console.log(this.details)},methods:{collapse(){this.collapsed=!this.collapsed}},computed:{colorClass(){return this.value&&this.details&&this.details.negative.length>0?"text-secondary":!0===this.value&&!this.inverted||!1===this.value&&this.inverted?"text-green":"text-red"},icon(){return this.value&&this.details&&this.details.negative.length>0?"exclamation-triangle":{null:"question",false:this.inverted?"check":"times",true:this.inverted?"times":"check"}[this.value]},text(){return{null:"inconnu",false:"non",true:"oui"}[this.value]}}},yC=_C,wC=Object(u["a"])(yC,dC,pC,!1,null,null,null),CC=wC.exports,kC={props:{town:{type:Object}},data(){return{details:Fp(this.town)}},components:{TownDetailsPanelLivingConditionsSection:CC,TownDetailsPanel:Ww}},xC=kC,SC=Object(u["a"])(xC,cC,uC,!1,null,null,null),PC=SC.exports,$C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TownDetailsPanel",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Procédure judiciaire")]},proxy:!0},{key:"body",fn:function(){return[i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"flex items-center"},[i("Icon",{staticClass:"mr-2",attrs:{icon:"scroll"}}),i("div",{staticClass:"font-bold"},[e._v(" Dépôt de plainte du propriétaire ")])],1),i("div",{attrs:{"data-cy-data":"owner_complaint"}},[e._v(" "+e._s(e.boolToStr(e.town.ownerComplaint))+" ")])])]),i("div",{staticClass:"flex"},[i("Icon",{staticClass:"mr-4 mt-5",attrs:{icon:"balance-scale"}}),i("div",{staticClass:"flex-1"},[i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v(" Existence d’une procédure judiciaire ")]),i("div",{staticClass:"-ml-5",attrs:{"data-cy-data":"justice_procedure"}},[e._v(" "+e._s(e.boolToStr(e.town.justiceProcedure))+" ")])])]),i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v(" Décision de justice rendue ")]),i("div",{staticClass:"-ml-5",attrs:{"data-cy-data":"justice_rendered"}},[e._v(" "+e._s(e.justiceRendered)+" ")])])]),i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"font-bold"},[e._v("Contentieux")]),i("div",{staticClass:"-ml-5",attrs:{"data-cy-data":"justice_challenged"}},[e._v(" "+e._s(e.boolToStr(e.town.justiceChallenged))+" ")])])])],1)],1),i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"flex items-center"},[i("img",{staticClass:"w-6 h-6 mr-2",attrs:{src:e.policeSiren}}),i("div",{staticClass:"font-bold"},[e._v(" Concours de la force publique ")])]),i("div",{attrs:{"data-cy-data":"police_status"}},[e._v(" "+e._s(e.policeStatusLabel)+" ")])])]),i("TownDetailsPanelSection",[i("div",{staticClass:"grid grid-cols-2"},[i("div",{staticClass:"flex items-center"},[i("span",{staticClass:"w-6 h-6 mr-2 text-center"},[i("Icon",{attrs:{icon:"file"}})],1),i("div",{staticClass:"font-bold"},[e._v(" Nom de l'étude d'huissier ")])]),i("div",{attrs:{"data-cy-data":"bailiff"}},[e._v(" "+e._s(e.town.bailiff||"NC")+" ")])])])]},proxy:!0}])})},TC=[],IC={props:{town:{type:Object}},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)},boolToStr(e){return null===e?"NC":e?"oui":"non"}},components:{TownDetailsPanel:Ww,TownDetailsPanelSection:Kw},computed:{justiceRendered(){return null===this.town.justiceRendered?"NC":this.town.justiceRendered?"rendue le "+this.formatDate(this.town.justiceRenderedAt,"d/m/y"):"non"},policeSiren(){return zm.a},policeStatusLabel(){return"none"===this.town.policeStatus?"Non demandé":"requested"===this.town.policeStatus?"Demandé le "+this.formatDate(this.town.policeRequestedAt,"d/m/y"):"granted"===this.town.policeStatus?"Accordé le "+this.formatDate(this.town.policeGrantedAt,"d/m/y"):"NC"}}},OC=IC,AC=Object(u["a"])(OC,$C,TC,!1,null,null,null),EC=AC.exports,NC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-display-lg text-corail"},[i("Icon",{attrs:{icon:"comment"}}),e._v(" LE JOURNAL DU SITE "),i("span",[e._v("- "+e._s(e.nbComments)+" message"+e._s(e.nbComments>1?"s":""))])],1),i("div",{staticClass:"text-display-md pt-6 pb-4"},[e._v(" Partager une info ")]),i("div",{staticClass:"bg-white p-6 customShadow"},[i("div",{staticClass:"mb-4"},[i("Icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.user.first_name))],1),i("TextArea",{attrs:{rows:"5",name:"newComment",placeholder:"Votre commentaire - Merci de respecter les règles de confidentialité."},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}}),e._v(" "),i("div",{staticClass:"flex items-center justify-between"},[i("Button",{attrs:{variant:"primaryText"},on:{click:e.cancelComment}},[e._v("Annuler")]),i("Button",{attrs:{variant:"primary"},on:{click:e.addComment}},[e._v("Valider")])],1)],1)])},qC=[],DC={data(){return{commentError:null,commentErrors:{},newComment:""}},props:{nbComments:{type:Number},user:{type:Object}},methods:{cancelComment(){this.newComment=""},addComment(){Vo("shantytown_comment.create")&&(this.commentError=null,this.commentErrors={},gl(this.$route.params.id,{description:this.newComment}).then(e=>{this.$emit("submit",e.comments),this.newComment=""}).catch(e=>{this.commentError=e.user_message,this.commentErrors=e.fields||{}}))}}},jC=DC,MC=(i("e04d"),Object(u["a"])(jC,NC,qC,!1,null,"fe9e5faa",null)),LC=MC.exports,FC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-display-md pb-2"},[e._v(" "+e._s(e.comments.length)+" message"+e._s(e.comments.length>1?"s":"")+" ")]),e._l(e.sortedComments,(function(e){return i("CommentBlock",{key:e.id,attrs:{comment:e}})}))],2)},zC=[],RC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"border-t border-G400 py-4"},[i("div",{staticClass:"text-G600 text-sm mb-1"},[e._v(" "+e._s(e.formatDate(e.comment.createdAt,"d M y à h:i"))+" ")]),i("div",{staticClass:"text-primary font-bold mb-1"},[i("Icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.comment.createdBy.firstName)+" "+e._s(e.comment.createdBy.lastName)+" - "+e._s(e.comment.createdBy.organization)+" ")],1),i("div",{staticClass:"ml-5"},[e._v(e._s(e.comment.description))])])},BC=[],VC={props:{comment:{type:Object}},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)}}},UC=VC,HC=Object(u["a"])(UC,RC,BC,!1,null,null,null),GC=HC.exports,WC={components:{CommentBlock:GC},props:{comments:{type:Array}},computed:{sortedComments(){const e=[...this.comments];return e.sort((e,t)=>t.createdAt-e.createdAt)}}},QC=WC,JC=Object(u["a"])(QC,FC,zC,!1,null,null,null),YC=JC.exports,ZC=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidePanel",{attrs:{isOpen:e.isOpen,closePanel:e.closePanel,closeClickOutside:!0}},[i("div",{staticClass:"  px-8 "},[i("div",{staticClass:"border-b-2 border-G200 py-4"},[i("div",{staticClass:"flex justify-end"},[i("Button",{attrs:{variant:"primaryText",icon:"times",size:"lg"},on:{click:e.closePanel}})],1),i("div",{staticClass:"flex items-center text-primary"},[i("Icon",{staticClass:"mr-2 ",attrs:{icon:"history"}}),i("div",{staticClass:"text-display-md text-primary"},[e._v(" Historique des modifications ")])],1)]),i("div",[i("div",{staticClass:"text-sm font-bold my-4"},[e._v(" "+e._s(e.town.changelog.length)+" modification"+e._s(e.town.changelog.length>1?"s":"")+" ")]),e._l(e.town.changelog,(function(t){return i("div",{key:t.id,staticClass:"py-4 border-b-2 border-G200"},[i("div",{staticClass:"text-sm text-G600"},[e._v(" "+e._s(e.formatDate(t.date,"d M y à h:i"))+" ")]),i("div",{staticClass:"text-primary"},[i("router-link",{attrs:{to:"/annuaire/"+t.author.organization.id}},[i("div",{staticClass:"flex items-center"},[i("font-awesome-icon",{staticClass:"w-8 text-md",attrs:{icon:"user"}}),i("div",{staticClass:"font-bold ml-2"},[e._v(" "+e._s(t.author.first_name)+" "+e._s(t.author.last_name)+" ")])],1)])],1),i("div",e._l(t.diff,(function(t){return i("div",{key:t.field,staticClass:"changelogContent my-2"},[i("div",{staticClass:"text-green"},[e._v(e._s(t.field))]),i("div",[i("span",{staticClass:"line-through"},[e._v(e._s(t.oldValue||"non renseigné"))]),i("span",[e._v(", "+e._s(t.newValue||"non renseigné")+" ")])])])})),0)])}))],2)])])},KC=[],XC={props:{town:{type:Object},isOpen:{type:Boolean},closePanel:{type:Function}},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)}}},ek=XC,tk=(i("fd66"),Object(u["a"])(ek,ZC,KC,!1,null,null,null)),ik=tk.exports,ak=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidePanel",{attrs:{isOpen:e.isOpen,closePanel:e.closePanel,closeClickOutside:!0}},[i("div",{staticClass:"scrollablePanel"},[i("div",{staticClass:"  px-8 "},[i("div",{staticClass:"border-b-2 border-G200 py-4"},[i("div",{staticClass:"flex justify-end"},[i("Button",{attrs:{variant:"primaryText",icon:"times",size:"lg"},on:{click:e.closePanel}})],1),i("div",{staticClass:"flex items-center text-primary"},[i("Icon",{staticClass:"mr-2 ",attrs:{icon:"comment"}}),i("div",{staticClass:"text-display-md text-primary"},[e._v(" Commentaire Covid-19 ")])],1)]),i("div",{staticClass:"text-G600 italic my-6"},[e._v(" Merci de préciser votre action, ses modalités, et le nombrede personnes avec des symptômes.Merci de respecter les règles de confidentialité. Ne pas citer l’identité des individus (Nom, âge, sexe, origine...) ")]),i("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[i("form",{on:{submit:function(t){return t.preventDefault(),a(e.addCovidComment)}}},[i("DatepickerV2",{staticClass:"w-64",attrs:{label:"Date de votre intervention",id:"closed_at",validationName:"Date","disabled-dates":{from:new Date},language:e.dateLanguage,"monday-first":!0,"full-month-name":!0,format:"dd MMMM yyyy",rules:"required"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}}),i("CheckableGroup",{attrs:{label:"Préciser votre intervention"}},[i("Checkbox",{attrs:{checkValue:"equipe_maraude",label:"Équipe de maraude"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}}),i("Checkbox",{attrs:{checkValue:"equipe_sanitaire",label:"Équipe sanitaire"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}}),i("Checkbox",{attrs:{checkValue:"equipe_accompagnement",label:"Équipe d'accompagnement"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}}),i("Checkbox",{attrs:{checkValue:"distribution_alimentaire",label:"Distribution d'aide alimentaire"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}})],1),i("CheckableGroup",{attrs:{label:"Signaler si nécessaire"}},[i("Checkbox",{attrs:{checkValue:"personnes_orientees",label:"Personne(s) orientée(s) vers un centre d'hébergement"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}}),i("Checkbox",{attrs:{checkValue:"personnes_avec_symptomes",label:"Personne(s) avec des symptômes Covid-19"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}}),i("Checkbox",{attrs:{checkValue:"besoin_action",label:"Besoin d'une action prioritaire"},model:{value:e.form.interventionType,callback:function(t){e.$set(e.form,"interventionType",t)},expression:"form.interventionType"}})],1),i("TextArea",{attrs:{label:"Ecrire un message",rows:"10",name:"newComment",rules:"required",validationName:"Ecrire un message"},model:{value:e.form.newComment,callback:function(t){e.$set(e.form,"newComment",t)},expression:"form.newComment"}}),e._v(" "),i("div",{staticClass:"flex items-center justify-between"},[i("Button",{attrs:{variant:"primaryText",type:"button"},on:{click:e.cancelComment}},[e._v("Annuler")]),i("Button",{attrs:{variant:"tertiary",type:"primary",loading:e.loading}},[e._v("Valider")])],1)],1)]}}])})],1),i("div",{staticClass:"bg-orange200 px-8 py-4 mt-4"},[i("div",{staticClass:"font-bold mb-4"},[e._v(" "+e._s(this.town.comments.covid.length)+" commentaires ")]),e._l(e.sortedComments,(function(e){return i("CommentBlock",{key:e.id,attrs:{comment:e}})}))],2)])])},sk=[],nk={components:{CommentBlock:GC,CheckableGroup:zi},props:{town:{type:Object},isOpen:{type:Boolean},closePanel:{type:Function}},data(){return{dateLanguage:Vi["fr"],loading:!1,form:{date:new Date,interventionType:[],newComment:""}}},computed:{sortedComments(){const e=[...this.town.comments.covid];return e.sort((e,t)=>t.createdAt-e.createdAt)}},methods:{formatDate(...e){return window.App.formatDate.apply(window,e)},cancelComment(){this.form.newComment=""},addCovidComment(){this.loading||(this.covidErrors=[],this.loading=!0,bl(this.$route.params.id,{date:this.form.date,description:this.form.newComment,equipe_maraude:this.form.interventionType.includes("equipe_maraude"),equipe_sanitaire:this.form.interventionType.includes("equipe_sanitaire"),equipe_accompagnement:this.form.interventionType.includes("equipe_accompagnement"),distribution_alimentaire:this.form.interventionType.includes("distribution_alimentaire"),personnes_orientees:this.form.interventionType.includes("personnes_orientees"),personnes_avec_symptomes:this.form.interventionType.includes("personnes_avec_symptomes"),besoin_action:this.form.interventionType.includes("besoin_action")}).then(e=>{this.$emit("updateTown",{...this.town,comments:{...this.town.comments,covid:e}}),this.form={newComment:"",date:new Date,interventionType:[]},this.loading=!1}).catch(e=>{const t=e.fields||{};this.loading=!1,this.covidErrors=Object.keys(t).reduce((e,i)=>[...e,...t[i]],[])}))}}},ok=nk,rk=Object(u["a"])(ok,ak,sk,!1,null,null,null),lk=rk.exports,ck=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{staticClass:"modalContainer",attrs:{isOpen:e.isOpen,closeModal:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[i("div",[e._v("Fermer le site")])]},proxy:!0},{key:"body",fn:function(){return[i("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[i("form",{on:{submit:function(t){return t.preventDefault(),a(e.submitClose)}}},[i("div",{staticClass:"scrollableContainer -mx-4 -mt-8 p-4"},[i("div",{staticClass:"w-64"},[i("DatepickerV2",{attrs:{label:"Date de la fermeture du site",id:"closed_at",validationName:"Date","disabled-dates":{from:new Date},language:e.dateLanguage,"monday-first":!0,"full-month-name":!0,format:"dd MMMM yyyy",rules:"required"},model:{value:e.form.closed_at,callback:function(t){e.$set(e.form,"closed_at",t)},expression:"form.closed_at"}})],1),i("CheckableGroup",{attrs:{direction:"row",id:"closed_with_solutions",rules:"required",label:"Est-ce que ce site a été résorbé définitivement ?",info:"C’est-à-dire sans réinstallation illicite et\n                            avec un accompagnement de la majorité des\n                            personnes vers des solutions pérennes",validationName:"Est-ce que ce site a été résorbé définitivement ?"}},[i("Radio",{staticClass:"mr-1",attrs:{checkValue:!0,label:"Oui",variant:"card"},model:{value:e.form.closed_with_solutions,callback:function(t){e.$set(e.form,"closed_with_solutions",t)},expression:"form.closed_with_solutions"}}),i("Radio",{attrs:{checkValue:!1,label:"Non",variant:"card"},model:{value:e.form.closed_with_solutions,callback:function(t){e.$set(e.form,"closed_with_solutions",t)},expression:"form.closed_with_solutions"}})],1),i("CheckableGroup",{attrs:{label:"Cause de la disparition",id:"status",direction:"vertical",rules:"required",validationName:"Cause de la disparition"}},e._l(e.statusValues,(function(t,a){return i("Radio",{key:a,attrs:{label:t.label,checkValue:t.value},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})})),1),i("CheckableGroup",{attrs:{label:"Orientations des ménages :"}},e._l(e.closingSolutions,(function(t,a){return i("div",{key:t.id},[i("Checkbox",{key:a,attrs:{label:t.label,checkValue:t.id,id:"solutions"},model:{value:e.checkedSolutions,callback:function(t){e.checkedSolutions=t},expression:"checkedSolutions"}}),i("div",{staticClass:"flex items-center ml-10"},[i("InlineTextInput",{staticClass:"mr-4",attrs:{label:"Ménages : ",type:"number"},model:{value:e.form.solutions[t.id].householdsAffected,callback:function(i){e.$set(e.form.solutions[t.id],"householdsAffected",i)},expression:"\n                                        form.solutions[item.id]\n                                            .householdsAffected\n                                    "}}),i("InlineTextInput",{attrs:{label:"Personnes : ",type:"number"},model:{value:e.form.solutions[t.id].peopleAffected,callback:function(i){e.$set(e.form.solutions[t.id],"peopleAffected",i)},expression:"\n                                        form.solutions[item.id]\n                                            .peopleAffected\n                                    "}})],1)],1)})),0)],1),i("div",{staticClass:"flex justify-end mt-8"},[i("Button",{staticClass:"mr-8",attrs:{variant:"primaryText",type:"button"},on:{click:e.closeModal}},[e._v("Annuler")]),i("Button",{attrs:{variant:"tertiary",type:"primary",loading:e.loading}},[e._v("Valider")])],1)])]}}])})]},proxy:!0}])})},uk=[],dk={components:{CheckableGroup:zi,InlineTextInput:Me},props:{isOpen:{type:Boolean},town:{type:Object}},methods:{closeModal(){this.$emit("closeModal")},async submitClose(){this.loading=!0,this.error=null;try{await vl(this.town.id,{...this.form,solutions:Object.keys(this.form.solutions).filter(e=>this.form.solutions[e].checked).map(e=>({id:e,peopleAffected:this.form.solutions[e].peopleAffected?parseInt(this.form.solutions[e].peopleAffected,10):null,householdsAffected:this.form.solutions[e].householdsAffected?parseInt(this.form.solutions[e].householdsAffected,10):null}))})}catch(t){return this.loading=!1,this.error=t,void this.$refs.form.setErrors(t.fields)}Qc({group:"notifications",type:"success",title:"Site correctement fermé",text:"Le site a bien été marqué comme fermé"});const e=await pl(this.$route.params.id);this.$emit("updateTown",e),this.loading=!1,this.closeModal()},closePopin(){this.$emit("cancelCloseTown")}},data(){const{closing_solutions:e}=zo();return{loading:!1,error:null,form:{closed_at:null,closed_with_solutions:null,status:null,solutions:this.town.closingSolutions?e.reduce((e,t)=>{const i=Object.assign(e,{}),a=this.town.closingSolutions.find(e=>e.id===t.id);return i[t.id]={checked:void 0!==a,peopleAffected:a&&a.peopleAffected,householdsAffected:a&&a.householdsAffected},i},{}):[]},closingSolutions:e,dateLanguage:Vi["fr"],checkedSolutions:[],statusValues:[{value:"closed_by_justice",label:"Exécution d'une décision de justice"},{value:"closed_by_admin",label:"Exécution d'une décision administrative"},{value:"other",label:"Autre"},{value:"unknown",label:"Raison inconnue"}]}},watch:{checkedSolutions:function(e){Object.keys(this.form.solutions).forEach(t=>{this.form.solutions[t].checked=e.includes(Number(t))})}}},pk=dk,mk=(i("cee3"),Object(u["a"])(pk,ck,uk,!1,null,null,null)),hk=mk.exports,vk={components:{TownDetailsCloseModal:hk,TownDetailsHistorySidePanel:ik,TownDetailsNewComment:LC,TownDetailsComments:YC,PrivateLayout:kp,PrivateContainer:gp,TownDetailsHeader:Tw,TownDetailsLeftColumn:zw,TownDetailsPanelCharacteristics:iC,TownDetailsPanelPeople:lC,TownDetailsPanelLivingConditions:PC,TownDetailsPanelJudicial:EC,TownDetailsCovidCommentsSidePanel:lk},data(){const e=Bo("shantytown.list"),{field_types:t,user:i}=zo();return{historyOpen:!1,closeOpen:!1,covidOpen:!1,error:null,loading:!1,town:null,fieldTypes:t,user:i,hasJusticePermission:!0===e.data_justice}},created(){this.fetchData()},methods:{hasPermission:Vo,openHistory(){this.historyOpen=!0},openCancel(){this.closeOpen=!0},openCovid(){this.covidOpen=!0},deleteTown(){confirm("Êtes-vous sûr(e) de vouloir supprimer définitivement ce site ? Cette suppression est irréversible.")&&fl(this.$route.params.id).then(()=>{Qc({group:"notifications",type:"success",title:"Succès",text:"Le site a été supprimé définitivement de la base"}),this.$router.replace("/liste-des-sites")}).catch(e=>{alert(e.user_message)})},fetchData(){!0!==this.loading&&(this.loading=!0,this.error=null,pl(this.$route.params.id).then(e=>{this.loading=!1,this.town=Bm(e,this.fieldTypes)}).catch(e=>{this.error=e&&e.user_message||"Une erreur inconnue est survenue",this.loading=!1}))}}},fk=vk,gk=(i("b756"),Object(u["a"])(fk,ww,Cw,!1,null,"4a04efe8",null)),bk=gk.exports,_k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),e.preloading&&!e.preloadError?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e.preloading&&e.preloadError?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.preloadError)+". "),i("a",{attrs:{href:"#"},on:{click:e.preload}},[e._v("Réessayer ?")])])]):i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1)),i("p",[e._v("Plus d'informations sur les droits d'accès et les utilisateurs de la plateforme"),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/typologie-des-acces"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Guide des accès et de l'administrateur")],1),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/charte-d-engagement"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Charte d'engagement de l'utilisateur")],1)],1)],1)],1)])},yk=[],wk={components:{NavBar:yr,Form:Xc},data(){const e={first_name:"",last_name:"",password:""},t={title:"Modifier vos données personnelles",description:"Vous pouvez compléter votre profil d'utilisateur et modifier votre mot de passe sur cette page.",steps:[{title:"",sections:[{title:"",inputs:{first_name:{label:"Votre prénom",mandatory:!0,type:"text"},last_name:{label:"Votre nom de famille",mandatory:!0,type:"text"},password:{label:"Mot de passe",description:"Laissez ce champ vide si vous souhaitez conserver votre mot de passe actuel.<br/><br/>Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée.",mandatory:!1,type:"password"}}}],wording:{submit:"Modifier",error:"Les modifications n'ont pas été appliquées",success:"Les modifications ont bien été prises en compte"},submit:er}]};return{preloading:!0,preloadError:null,loading:!1,formData:e,formDefinition:t}},created(){this.preload()},methods:{preload(){this.preloadError=null,this.preloading=!0,this.fetchData().then(()=>{this.preloading=!1}).catch(e=>{this.preloadError=e.user_message})},fetchData(){return Xo().then(e=>{this.formData.first_name=e.first_name,this.formData.last_name=e.last_name,this.formData.password=""})},onComplete(){this.preload()}}},Ck=wk,kk=Ck,xk=(i("9985"),Object(u["a"])(kk,_k,yk,!1,null,"dd1c1884",null)),Sk=xk.exports,Pk=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("h1",[e._v("Liste des utilisateurs")]),"loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("header",{staticClass:"userList-header"},[i("router-link",{staticClass:"link",attrs:{to:"/typologie-des-acces"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Guide des accès et de l'administrateur")],1),i("router-link",{staticClass:"link",attrs:{to:"/charte-d-engagement"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Charte d'engagement de l'utilisateur")],1),i("router-link",{staticClass:"button",attrs:{to:"/nouvel-utilisateur"}},[e._v("Ajouter un utilisateur")])],1),i("Table",e._b({on:{"on-row-click":e.routeToUserValidation},scopedSlots:e._u([{key:"table-row",fn:function(t){return["status"===t.column.id?i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon",class:"user-statusIcon--"+t.formattedRow[t.column.field].icon,attrs:{icon:t.formattedRow[t.column.field].icon}}),e._v(" "),i("span",{domProps:{innerHTML:e._s(t.formattedRow[t.column.field].label)}})],1):"role"===t.column.id?i("span",[i("span",{staticClass:"role"},[e._v(e._s(t.formattedRow[t.column.field]))])]):"validate"===t.column.id?i("span",[i("span",[i("font-awesome-icon",{staticClass:"user-validateIcon",attrs:{icon:"arrow-right"},on:{click:e.routeToUserValidation}})],1)]):i("span",{class:"userList-row--"+t.column.id},[e._v(e._s(t.formattedRow[t.column.field]))])]}}],null,!1,1614286866)},"Table",e.tableProperties,!1))],1):e._e()])])],1)])},$k=[],Tk=i("f617"),Ik=(i("dac4"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"alert"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"alert-close"},[i("div",{staticClass:"alert-close-wrapper"},[i("img",{attrs:{src:"/img/cross.svg",alt:"",width:"20"},on:{click:e.close}})])]),e._t("default")],2)])}),Ok=[],Ak={mounted(){document.addEventListener("click",this.checkOutsideClick)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){0!==this.$refs.wrapper.offsetHeight&&(this.$refs.wrapper.contains(e.target)||this.close())},close(){this.$emit("close")}}},Ek=Ak,Nk=Ek,qk=(i("aaf3"),Object(u["a"])(Nk,Ik,Ok,!1,null,"70f3cb96",null)),Dk=qk.exports,jk={components:{NavBar:yr,Table:Tk["a"],Modal:Dk},data(){const{token_expires_in:e}=zo();return{tokenExpiresIn:e,users:[],error:null,state:null}},computed:{tableProperties(){return{columns:[{id:"lastName",label:"NOM",field:e=>e.last_name.toUpperCase()},{id:"firstName",label:"PRÉNOM",field:"first_name"},{id:"organization",label:"STRUCTURE",field:e=>null!==e.organization.type.abbreviation?`${e.organization.type.abbreviation} (${e.organization.name})`:null!==e.organization.abbreviation?`${e.organization.abbreviation} (${e.organization.name})`:e.organization.name},{id:"location",label:"TERRITOIRE",field:e=>{if("nation"===e.organization.location.type)return"National";const t=e.organization.location[e.organization.location.type];return t?"departement"===e.organization.location.type?`${t.name} (${t.code})`:t.name:""}},{id:"role",label:"TYPE D'ACCÈS",field:"role",width:"230px",thClass:"userList-column--role",tdClass:"userList-column--role"},{id:"status",label:"STATUT DU COMPTE",field:e=>"active"===e.status?"local_admin"===e.role_id?{icon:"user-shield",label:"<strong>Administrateur local</strong>"}:"national_admin"===e.role_id?{icon:"user-shield",label:"<strong>Administrateur national</strong>"}:{icon:"user-check",label:"<strong>Compte activé</strong> le "+App.formatDate(e.user_access.used_at,"d M y")}:null!==e.user_access?Date.now()-1e3*e.user_access.expires_at>=0?{icon:"unlink",label:"<strong>Lien expiré</strong> le "+App.formatDate(e.user_access.expires_at,"d M y")}:{icon:"paper-plane",label:"<strong>Accès envoyé</strong> le "+App.formatDate(e.user_access.created_at,"d M y")}:{icon:"flag",label:"<strong>Demandé</strong> le "+App.formatDate(e.created_at,"d M y")}},{id:"validate",label:"",field:()=>!0}],rows:this.users,"row-style-class":e=>"active"!==e.status&&null===e.user_access?"userList-row userList-row--highlight":"userList-row","sort-options":{enabled:!0},"search-options":{enabled:!0,placeholder:"Rechercher par utilisateur, structure, territoire, ou type d'accès"}}}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,tr().then(e=>{this.users=e.filter(({status:e})=>"inactive"!==e),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},routeToUserValidation(e){const t=this.$router.resolve("/nouvel-utilisateur/"+e.row.id);xo(t.href)}}},Mk=jk,Lk=Mk,Fk=(i("5e31"),Object(u["a"])(Lk,Pk,$k,!1,null,null,null)),zk=Fk.exports,Rk=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[e.isPopup?e._e():i("NavBar"),"loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.loadingError)+". "),i("span",{on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()],1)])},Bk=[],Vk=(e,t)=>({data(){const i={},a={title:e.title,descriptionTitle:"",description:e.description,steps:[{wording:e.stepWording,sections:[{title:"Informations personnelles",inputs:{last_name:{label:"NOM",mandatory:!0,type:"text"},first_name:{label:"Prénom",mandatory:!0,type:"text"},email:{label:"Courriel",mandatory:!0,type:"text"}}},{title:e.organizationTitle,inputs:{organization_category:{label:e.organization,mandatory:!0,type:"radio",options:[]},organization_type:{label:"Précisez le type de structure",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"public_establishment"===e}},organization_public:{label:"Territoire de rattachement",mandatory:!0,type:"select",options:[],condition:({organization_category:e,organization_type:t})=>"public_establishment"===e&&void 0!==t},territorial_collectivity:{label:"Nom de la structure",mandatory:!0,type:"collectivity",condition({organization_category:e}){return"territorial_collectivity"===e}},association:{label:"Nom de la structure",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"association"===e}},new_association_name:{label:"Précisez le nom complet",mandatory:!0,type:"text",condition({organization_category:e,association:t}){return"association"===e&&"Autre"===t}},new_association_abbreviation:{label:"Précisez l'acronyme, si besoin",mandatory:!1,type:"text",condition({organization_category:e,association:t}){return"association"===e&&"Autre"===t}},departement:{label:"Territoire de rattachement",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"association"===e}},organization_administration:{label:"Nom de la structure",mandatory:!0,type:"select",options:[],condition({organization_category:e}){return"administration"===e}},position:{label:e.position,mandatory:!0,type:"text",condition({organization_category:e}){return void 0!==e}}}}],submit:e=>t({...e,legal:e.legal&&1===e.legal.length&&!0===e.legal[0]})}]};return{state:null,loadingError:null,formData:i,formDefinition:a}},watch:{"formData.organization_type":function(){this.$refs.form.getInputById("organization_public").options=[],mu(this.formData.organization_type).then(({organizations:e})=>{this.$refs.form.getInputById("organization_public").options=e.map(e=>{const t=e.location_type;let i=e[t+"_name"];return"nation"===t?i="France":"departement"===t&&(i=`${e[t+"_code"]} - ${e[t+"_name"]}`),{value:e.id,label:i}}),this.formData.organization_public=void 0})}},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.loadingError=null,Promise.all([uu(),du("public_establishment"),pu("administration"),pu("association"),Rr()]).then(([{categories:t},{types:i},{organizations:a},{organizations:s},{departements:n}])=>{this.formDefinition.steps[0].sections[1].inputs.organization_category.options=t.map(({uid:e,name_singular:t})=>({value:e,label:t})),this.formDefinition.steps[0].sections[1].inputs.organization_type.options=i.filter(({numberOfOrganizations:e})=>e>0).filter(({name_singular:e})=>"Gendarmerie nationale"!==e).map(({id:e,name_singular:t,abbreviation:i})=>({value:e,label:i||t})),this.formDefinition.steps[0].sections[1].inputs.organization_administration.options=a.map(({id:e,name:t})=>({value:e,label:t}));const o=[];this.formDefinition.steps[0].sections[1].inputs.association.options=[{label:"Autres cas",options:[{value:"Autre",label:e.associationIsMissing}]},{label:"Associations connues",options:s.filter(e=>-1===o.indexOf(e.name)&&(o.push(e.name),!0)).map(({name:e,abbreviation:t})=>({value:e,label:null!==t?`${t} (${e})`:e}))}],this.formDefinition.steps[0].sections[1].inputs.departement.options=n.map(({code:e,name:t})=>({value:e,label:`${e} - ${t}`})),this.state="loaded"}).catch(({user_message:e})=>{this.loadingError=e,this.state="error"}))}}});const Uk=Vk({title:"Créer un utilisateur",organizationTitle:"Structure",organization:"Quelle est la structure de l'utilisateur ?",position:"Fonction de l'utilisateur",associationIsMissing:"L'association de l'utilisateur n'est pas dans cette liste",stepWording:{submit:"Continuer",error:"L'utilisateur n'a pas pu être créé",success:"L'utilisateur a bien été créé"}},Ko);var Hk={components:{NavBar:yr,Form:Xc},data(){const e=Uk.data();return e.isPopup=void 0!==this.$route.query.association_name,e.formDefinition.steps[0].sections.push({inputs:{legal:{label:"",mandatory:!1,type:"checkbox",options:[{value:!0,label:"Je certifie que ces données personnelles ont été saisies avec l'accord de leur propriétaire"}]}}}),void 0!==this.$route.query.association_name&&(e.formDefinition.steps[0].sections[1].inputs.organization_category.disabled=!0,e.formDefinition.steps[0].sections[1].inputs.association.disabled=!0,e.formDefinition.steps[0].sections[1].inputs.departement.disabled=!0),e},watch:Object.assign(Uk.watch,{state(){"loaded"===this.state&&void 0!==this.$route.query.association_name&&(this.formData.organization_category="association",this.formData.association=this.$route.query.association_name,this.formData.departement=this.$route.query.association_departement)}}),mounted(){this.load()},methods:Object.assign(Uk.methods,{retryLoading(){this.load()},onComplete(e){if(this.isPopup)return window.opener.postMessage(e,"*"),void window.close();this.$router.push("/nouvel-utilisateur/"+e.id)}})},Gk=Hk,Wk=Gk,Qk=(i("3415"),Object(u["a"])(Wk,Rk,Bk,!1,null,"17835908",null)),Jk=Qk.exports,Yk=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"loading"===e.state?i("section",{staticClass:"section section-white",attrs:{id:"form"}},[e._m(0)]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("p",[i("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" "),i("strong",[e._v("Une erreur est survenue")])],1),i("p",[i("span",{domProps:{innerHTML:e._s(e.error.replace(/\n/g,"<br/>"))}})]),i("p",[i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()],1)])},Zk=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])}],Kk={components:{NavBar:yr,Form:Xc},data(){const e={email:""},t={title:"Activation de votre compte utilisateur",descriptionTitle:"",description:"Vous vous apprêtez à activer votre compte utilisateur, veuillez choisir votre mot de passe de connexion.",steps:[{title:"",sections:[{title:"",inputs:{email:{label:"Votre email",mandatory:!1,type:"text",disabled:!0},password:{label:"Définissez votre mot de passe",description:"Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée.",mandatory:!0,type:"password"}}}],wording:{submit:"Activer mon compte",error:"Votre compte n'a pas pu être activé",success:"Vous pouvez désormais vous connecter à la plateforme"},submitPrefix:'En cliquant sur "Activer mon compte", j\'accepte les <a href="/#/conditions-d-utilisation">conditions générales d\'utilisation</a> et de partager mes données (nom, prénom, courriel, structure et lorsque renseigné, numéro de téléphone) aux utilisateurs de la plateforme via l’annuaire',submit:e=>rr(this.user.id,Object.assign(e,{token:this.$route.params.token}))}]};return{state:null,error:null,user:null,formData:e,formDefinition:t}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,nr(this.$route.params.token).then(e=>{this.user=e,this.formData.email=e.email,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},onComplete(){this.$router.push("/")}}},Xk=Kk,ex=Xk,tx=(i("771a"),Object(u["a"])(ex,Yk,Zk,!1,null,"043c7c3f",null)),ix=tx.exports,ax=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container container--userValidation"},["loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"userValidation"},[e.user&&"active"!==e.user.status?i("h1",[e._v("Demande d'accès")]):e.user?i("h1",[e._v("Fiche utilisateur")]):e._e(),i("div",{staticClass:"userValidation-main"},[i("aside",{staticClass:"userInfo"},[i("section",{staticClass:"userInfo-section"},[i("hgroup",[i("h1",[e._v(e._s(e.user.last_name.toUpperCase())+" "+e._s(e.user.first_name))]),i("h3",[e._v("Structure")]),i("h2",[e._v(e._s(e.user.organization.name))])]),i("p",[e._v(e._s(e.user.position)),i("br"),i("span",{staticClass:"email"},[e._v(e._s(e.user.email))])])]),i("section",{staticClass:"userInfo-section"},[e.isExpired?i("p",{staticClass:"userHistory-item"},[i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon",attrs:{icon:"unlink"}}),e._v(" "),i("strong",[e._v("Lien expiré")]),e._v(" le "+e._s(e.formatDate(e.user.user_access.expires_at,"d M y")))],1),i("br"),e._v("Un lien d'activation est valable "+e._s(e.tokenExpiresIn)+" jours"),i("br")]):e._e(),null!==e.user.user_access?i("p",{staticClass:"userHistory-item"},[i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon",attrs:{icon:"paper-plane"}}),e._v(" "),i("strong",[e._v("Accès envoyé")]),e._v(" le "+e._s(e.formatDate(e.user.user_access.created_at,"d M y")))],1),i("br")]):e._e(),i("p",{staticClass:"userHistory-item"},[i("span",[i("font-awesome-icon",{staticClass:"user-statusIcon user-statusIcon--flag",attrs:{icon:"flag"}}),e._v(" "),i("strong",[e._v("Demandé")]),e._v(" le "+e._s(e.formatDate(e.user.created_at,"d M y")))],1)])]),i("section",{staticClass:"userInfo-section",domProps:{innerHTML:e._s((e.user.access_request_message||"").replace("\n","<br/>"))}})]),i("main",{staticClass:"userPermissions"},[i("hgroup",{staticClass:"userPermissions-header"},[i("h1",[e._v("Accès")]),i("h2",{staticClass:"role"},[e._v(e._s(e.user.role))])]),i("p",[e._v(e._s(e.permission.description)),i("br")]),i("p",[e._v("Ainsi, l'utilisateur peut :")]),e.hasPermissionsFor("national")?i("UserPermissions",{attrs:{title:"À l'échelle nationale",items:e.permission.national_permissions}}):e._e(),e.hasPermissionsFor("local")?i("UserPermissions",{attrs:{title:"Sur le territoire d'intervention",items:e.permission.local_permissions}}):e._e(),e.options.length>0?i("div",[i("h1",{staticClass:"userPermissions-sectionTitle"},[e._v("Options")]),e.user.organization.active?e._e():i("p",[e._v("Pour cette structure, je souhaite :")]),i("ul",{staticClass:"userOptionsList"},e._l(e.options,(function(t,a){return i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedOptions[t.id],expression:"checkedOptions[option.id]"}],attrs:{type:"checkbox",id:"option-"+a,disabled:e.user.organization.active},domProps:{value:t.id,checked:Array.isArray(e.checkedOptions[t.id])?e._i(e.checkedOptions[t.id],t.id)>-1:e.checkedOptions[t.id]},on:{change:function(i){var a=e.checkedOptions[t.id],s=i.target,n=!!s.checked;if(Array.isArray(a)){var o=t.id,r=e._i(a,o);s.checked?r<0&&e.$set(e.checkedOptions,t.id,a.concat([o])):r>-1&&e.$set(e.checkedOptions,t.id,a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.checkedOptions,t.id,n)}}}),i("label",{staticClass:"label-inline",attrs:{for:"option-"+a}},[e._v(e._s(t.label))])])})),0)]):e._e()],1)]),e.validation.error?i("div",{staticClass:"userValidation-error notification error"},[e._v(e._s(e.validation.error))]):e._e(),i("footer",{staticClass:"userValidationFooter"},["active"===e.user.status?i("p",{staticClass:"userValidationFooter-remove"},["loading"!==e.validation.state?i("span",{on:{click:e.remove}},[e._v("Supprimer l'accès")]):e._e()]):e._e(),"new"===e.user.status&&null===e.user.user_access?i("p",{staticClass:"userValidationFooter-deny"},["loading"!==e.validation.state?i("span",{on:{click:e.deny}},[e._v("Refuser l'accès")]):e._e()]):e._e(),"new"===e.user.status?i("p",{staticClass:"userValidationFooter-allow"},[i("button",{staticClass:"button",attrs:{disabled:"loading"===e.validation.state,readonly:"loading"===e.validation.state},on:{click:e.validate}},["loading"===e.validation.state?i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}}):i("span",[e._v("Envoyer un accès")])]),i("br"),e._m(0)]):e._e()])]):e._e()])])],1)])},sx=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e._v("L'utilisateur va recevoir"),i("br"),e._v("un mail avec un lien d'activation")])}],nx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",{staticClass:"userPermissions-sectionTitle"},[e._v(e._s(e.title))]),i("ul",{staticClass:"userPermissionsList"},e._l(e.parsedItems,(function(t){var a;return i("li",{class:(a={"userPermissionsList-item":!0},a["userPermissionsList-item--"+t.type]=!0,a["userPermissionsList-item--subsection"]=!0===t.subsection,a)},[i("span",{domProps:{innerHTML:e._s(t.label.replace(/%(.+?)%/gi,"<em>$1</em>"))}}),t.comments?i("span",{staticClass:"userPermissionsList-comments"},[i("br"),e._v(e._s(t.comments))]):e._e()])})),0)])},ox=[];const rx={view:"eye",edit:"pencil-alt",deny:"times"};var lx={props:{title:{type:String,required:!0},items:{type:Array,required:!0}},computed:{parsedItems(){return this.items.reduce((e,t)=>(t.length>0&&Object.assign(t[0],{subsection:!0}),[...e,...t.map(this.resolveIcon)]),[])}},methods:{resolveIcon(e){return{...e,icon:rx[e.type]}}}},cx=lx,ux=cx,dx=(i("18f7"),Object(u["a"])(ux,nx,ox,!1,null,null,null)),px=dx.exports;let mx;var hx={components:{NavBar:yr,Table:Tk["a"],UserPermissions:px},data(){let e;return({permissions_description:mx,activation_token_expires_in:e}=zo()),{user:null,error:null,state:null,loading:!1,validation:{state:null,error:null},checkedOptions:{},tokenExpiresIn:e/3600/24}},computed:{permission(){return this.user?mx[this.user.role_id]:null},options(){return null!==this.user&&this.permission?this.permission.options:[]},isExpired(){const e=Date.now();return null!==this.user&&"active"!==this.user.status&&null!==this.user.user_access&&e-1e3*this.user.user_access.expires_at>0}},created(){this.load()},methods:{formatDate(...e){return App.formatDate.call(App,...e)},load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,ir(this.$route.params.id).then(e=>{this.user=e,this.checkedOptions=this.options.reduce((t,i)=>Object.assign(t,{[i.id]:-1!==e.permission_options.indexOf(i.id)}),{}),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},hasPermissionsFor(e){return this.permission&&this.permission[e+"_permissions"]&&this.permission[e+"_permissions"].length>0},validate(){"loading"!==this.validation.state&&(this.validation.state="loading",this.validation.error=null,ar(this.$route.params.id,{options:this.checkedOptions}).then(()=>{this.validation.state=null,Qc({group:"notifications",type:"success",title:"Accès envoyé",text:"Un accès a été envoyé à l'utilisateur"}),this.$router.push("/liste-des-utilisateurs")}).catch(({user_message:e})=>{this.validation.state=null,this.validation.error=e}))},deny(){"loading"!==this.validation.state&&(this.validation.state="loading",this.validation.error=null,sr(this.$route.params.id).then(()=>{this.validation.state=null,Qc({group:"notifications",type:"success",title:"Accès refusé",text:"L'utilisateur a été supprimé de la base"}),this.$router.push("/liste-des-utilisateurs")}).catch(({user_message:e})=>{this.validation.state=null,this.validation.error=e}))},remove(){"loading"!==this.validation.state&&window.confirm("Êtes-vous sûr de vouloir supprimer cet accès ?")&&(this.validation.state="loading",this.validation.error=null,ur(this.$route.params.id).then(()=>{this.validation.state=null,Qc({group:"notifications",type:"success",title:"Accès supprimé",text:"L'utilisateur a été supprimé de la base"}),this.$router.push("/liste-des-utilisateurs")}).catch(({user_message:e})=>{this.validation.state=null,this.validation.error=e}))}}},vx=hx,fx=vx,gx=(i("2207"),Object(u["a"])(fx,ax,sx,!1,null,null,null)),bx=gx.exports,_x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("Form",e._b({on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1)])],1)])},yx=[],wx={components:{NavBar:yr,Form:Xc},data(){const{user:{id:e,email:t}}=zo();return{formData:{email:t},formDefinition:{title:"Résorption Bidonvilles a été mise à jour",description:"La plateforme a été mise à jour en septembre 2019. A présent, il est possible pour les correspondants d'ouvrir des accès à un plus grand nombre d'acteurs.",steps:[{sections:[{title:"Pour compléter le futur annuaire, merci de renseigner les champs suivants",inputs:{email:{type:"text",mandatory:!1,label:"Votre email",disabled:!0},position:{type:"text",mandatory:!0,label:"Votre fonction"},phone:{type:"text",mandatory:!1,label:"Votre numéro de téléphone",specificProps:{maxlength:10}}}},{title:"Pour bénéficier de la mise à jour, merci de créer un nouveau mot de passe",inputs:{password:{type:"password",mandatory:!0,label:"Définissez votre nouveau mot de passe",description:"Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée."}}}],wording:{submit:"Mettre à jour",error:"Votre compte n'a pas pu être mis à jour",success:"Votre compte a ben été mis à jour"},submit:t=>cr(e,t)}]}}},methods:{onComplete(){Lo().then(()=>{this.$router.push({path:"/"})}).catch(()=>{window.location.reload()})}}},Cx=wx,kx=Cx,xx=(i("e517"),Object(u["a"])(kx,_x,yx,!1,null,null,null)),Sx=xx.exports,Px=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white requestNewPassword"},[i("div",{staticClass:"container"},[i("Form",e._b({on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1)])],1)])},$x=[],Tx={components:{NavBar:yr,Form:Xc},data(){return{formData:{},formDefinition:{title:"Renouvellement de mot de passe",description:"Si vous avez perdu votre mot de passe, vous pouvez demander à en définir un nouveau.",steps:[{sections:[{inputs:{email:{type:"text",label:"Votre courriel",description:"Saisissez ici le courriel associé au compte Résorption Bidonvilles pour lequel vous souhaitez renouveler le mot de passe",mandatory:!0}}}],wording:{submit:"Renouveller mon mot de passe",success:"Un mail vous a été adressé avec les instructions",error:"La demande de renouvellement a échoué"},submit:({email:e})=>dr(e)}]}}},methods:{onComplete(){this.$router.push({path:"/"})}}},Ix=Tx,Ox=Ix,Ax=(i("0ff0"),Object(u["a"])(Ox,Px,$x,!1,null,null,null)),Ex=Ax.exports,Nx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white",attrs:{id:"form"}},[i("div",{staticClass:"container"},["loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("p",[i("font-awesome-icon",{attrs:{icon:"times"}}),e._v(" "),i("strong",[e._v("Une erreur est survenue")])],1),i("p",[i("span",{domProps:{innerHTML:e._s(e.error.replace(/\n/g,"<br/>"))}})]),i("p",[i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e(),"loaded"===e.state?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()])])],1)])},qx=[],Dx={components:{NavBar:yr,Form:Xc},data(){const e={email:""},t={title:"Définition d'un nouveau mot de passe",description:"Le formulaire suivant vous permet de choisir un nouveau mot de passe",steps:[{title:"",sections:[{title:"",inputs:{email:{label:"Votre email",mandatory:!1,type:"text",disabled:!0},password:{label:"Définissez votre mot de passe",description:"Votre mot de passe doit comporter au minimum 12 caractères, une majuscule, une minuscule, et un caractère non alphabétique (exemples : '.' ';' ',' '_' '!' '?', ...)<br/>Nous vous recommandons de choisir <strong>une phrase intelligible en guise de mot de passe</strong> : plus simple à retenir qu'une suite de caractères aléatoires, et plus sécurisée.",mandatory:!0,type:"password"}}}],wording:{submit:"Changer de mot de passe",error:"Votre mot de passe n'a pas pu être changé",success:"Votre nouveau mot de passe a été changé"},submit:e=>lr(this.user.id,Object.assign(e,{token:this.$route.params.token}))}]};return{state:null,error:null,user:null,formData:e,formDefinition:t}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,or(this.$route.params.token).then(e=>{this.user=e,this.formData.email=e.email,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},onComplete(){this.$router.push("/")}}},jx=Dx,Mx=jx,Lx=(i("f12c"),Object(u["a"])(Mx,Nx,qx,!1,null,null,null)),Fx=Lx.exports,zx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",["loaded"!==e.state?i("div",{staticClass:"container"},["loading"===e.state?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"error"===e.state?i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.retryLoading}},[e._v("Réessayer ?")])])]):e._e()]):e._e(),"loaded"===e.state?i("div",[i("header",{staticClass:"pageHeader"},[i("div",{staticClass:"pageHeader-wrapper"},[i("section",{staticClass:"pageHeader-main"},[i("section",{staticClass:"pageHeader-info"},[i("h1",{staticClass:"pageHeader-title"},[e._v("Dispositifs - "+e._s(e.locationTitle))])]),i("aside",{staticClass:"pageHeader-buttons"},[e.hasPermission("plan.create")?i("router-link",{staticClass:"button",attrs:{to:"/nouveau-dispositif"}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Déclarer un dispositif")])],1):e._e()],1)])])]),i("div",{staticClass:"container plansList-body"},[i("CollectivityInput",{staticClass:"planList-search",model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),i("Table",{attrs:{columns:e.columns,content:e.pageContent,emptyLabel:"Aucun dispositif sur ce territoire"},on:{click:e.routeToPlan},scopedSlots:e._u([{key:"name",fn:function(t){return[i("strong",[e._v(e._s(t.row.name))]),i("br"),t.row.expected_to_end_at?i("span",[e._v("du "+e._s(e.formatDate(t.row.started_at/1e3))),i("br"),e._v("au "+e._s(e.formatDate(t.row.expected_to_end_at/1e3))),i("br"),e._v(e._s(e.dateDiff(t.row.started_at,t.row.expected_to_end_at)))]):i("span",[e._v("depuis le "+e._s(e.formatDate(t.row.started_at/1e3)))]),i("br"),e._l(t.row.topics,(function(t){return i("p",[i("span",{staticClass:"rbTag"},[e._v(e._s(t.name))])])}))]}},{key:"departement",fn:function(t){return[e._v(e._s(t.row.departement.code))]}},{key:"location",fn:function(t){return["shantytowns"===t.row.location_type.id?i("span",e._l(t.row.shantytowns,(function(t){return i("span",[e._v("- "+e._s(t.usename)),i("br")])})),0):e._e(),"location"===t.row.location_type.id?i("span",[e._v(e._s(t.row.location.label))]):e._e(),"housing"===t.row.location_type.id?i("span",[e._v("Dans le logement")]):e._e(),"other"===t.row.location_type.id?i("span",[e._v(e._s(t.row.location_details))]):e._e()]}},{key:"government",fn:function(t){return[i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+t.row.government_contacts[0].organization.id}},[e._v(e._s(t.row.government_contacts[0].name)),i("br"),e._v(e._s(t.row.government_contacts[0].organization.name))])]}},{key:"operator",fn:function(t){return[i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+t.row.operator_contacts[0].organization.id}},[e._v(e._s(t.row.operator_contacts[0].name)),i("br"),e._v(e._s(t.row.operator_contacts[0].organization.name))])]}}],null,!1,1173401747)})],1)]):e._e()])],1)])},Rx=[];function Bx(){return Oo("/plans")}async function Vx(e){return Oo("/plans/"+e)}async function Ux(e){return Ao("/plans",e)}async function Hx(e,t){return Ao("/plans/"+e,t)}async function Gx(e,t){return Ao(`/plans/${e}/states`,t)}async function Wx(e,t){return No("/plans/"+e,{operation:"close",data:t})}var Qx={components:{NavBar:yr,Table:ql,CollectivityInput:Rl},data(){const{user:e}=zo(),t=Bo("plan.list"),i="nation"===t.geographic_level,a={locationTitle:null,defaultLocation:null,location:null};let s=e.organization.location.type;"epci"!==s&&"city"!==s||(s="departement");const n={id:"nation"===s?null:e.organization.location[s].code,label:"nation"===s?"France":e.organization.location[s].name,category:s,data:{code:"nation"===s?null:e.organization.location[s].code,type:s}};return!0!==i||"nation"===s?(a.defaultLocation={...n},a.location=null):(a.defaultLocation={id:null,label:"France",category:"Pays",data:{code:null,type:"nation"}},a.location={...n}),"nation"===a.defaultLocation.data.type?a.locationTitle="National":a.locationTitle=a.defaultLocation.label,Object.assign(a,{plans:[],error:null,state:null})},computed:{currentLocation(){return this.location||this.defaultLocation},columns(){return[{id:"name",label:"Nom du dispositif"},{id:"departement",label:"Dpt"},{id:"location",label:"Lieu"},{id:"government",label:"Service de l'état"},{id:"operator",label:"Opérateur"}]},pageContent(){return this.plans.filter(({closed_at:e})=>null===e).filter(e=>{if("nation"===this.currentLocation.data.type)return!0;const t=e[this.currentLocation.data.type];return t&&t.code===""+this.currentLocation.data.code})}},created(){this.load()},methods:{dateDiff(...e){return App.dateDiff(...e)},formatDate(...e){return window.App.formatDate(...e)},load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,Bx().then(e=>{this.plans=e,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},routeToPlan({id:e}){const t=this.$router.resolve("/dispositif/"+e);xo(t.href)},hasPermission(...e){return Vo(...e)}}},Jx=Qx,Yx=Jx,Zx=(i("1a64"),Object(u["a"])(Yx,zx,Rx,!1,null,"ca8ce470",null)),Kx=Zx.exports,Xx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),"loading"===e.loading.status?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"failed"===e.loading.status?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.loading.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.load}},[e._v("Réessayer ?")])])])])]):e._e(),"completed"===e.loading.status?i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1)):e._e()],1)},eS=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])}];function tS(e){return Oo(`/regions/${e}/departements`)}function iS(e){return Oo(`/epci/${e}/departements`)}var aS={components:{NavBar:yr,Form:Xc},data(){const{user:e,topics:t}=zo(),i={user:e,formData:{association:[]},loading:{status:null,error:null}},a=this,s=this.$refs,n={type:"hidden",label:"Personne référente dans la structure",description:"Aucune personne de cette structure n'est encore enregistrée sur la plateforme résorption bidonville.",mandatory:!0,condition({association:e}){return void 0!==e&&e.length>0&&0===s.form.getInputById("contact").options.length&&!1===a.loadingAssociationContacts}};return i.formDefinition={title:"Déclarer un dispositif",descriptionTitle:"Qu'est-ce qu'un dispositif ?",description:"C’est une action mise en place et financée en partie ou en totalité par un acteur public. Sa finalité est la résorption des bidonvilles.<br/><strong>Qui doit le déclarer ?</strong> Le service de l'Etat à l'initiative du dispositif doit le déclarer. L'acteur de terrain sera en charge de renseigner les informations relatives à l'action menée.",steps:[{title:"Dispositf",wording:{error:"La déclaration du dispositif a échoué",submit:"Déclarer le dispositif"},sections:[{title:"Intervention",icon:"list",inputs:{name:{type:"text",label:"Nom du dispositif",mandatory:!0},departement:{type:"select",label:"Département d'intervention",mandatory:!0},startedAt:{type:"date",label:"Date de début",mandatory:!0},expectedToEndAt:{type:"date",label:"Date de fin prévue (facultatif)",mandatory:!1},in_and_out:{type:"radio",label:"Ce dispositif implique-t-il un système d'entrées et de sorties des personnes ?",mandatory:!0,options:[{value:1,label:"Oui"},{value:0,label:"Non"}]},topics:{type:"checkbox",label:"Champs d'intervention",description:"Les thématiques sélectionnées définissent l'action que vous menez et les indicateurs de suivi associés.",mandatory:!0,options:t.map(({uid:e,name:t})=>({value:e,label:t}))},goals:{type:"textarea",label:"Objectifs",mandatory:!0,specificProps:{placeholder:"Précisez les objectifs, les enjeux, le contexte du dispositif\n\nPar exemple : résorber le bidonville, scolariser 80% des enfants identités en bidonvilles..."}}}},{title:"Lieu",icon:"map-pin",inputs:{locationType:{type:"radio",label:"L'action se déroule dans le cadre suivant",mandatory:!0,options:[{value:"shantytowns",label:"sur site(s) : bidonville ou squat"},{value:"location",label:"sur terrain d'insertion"},{value:"housing",label:"dans le logement"},{value:"other",label:"dans plusieurs lieux (hébergement, permanence, rue...)"}]},locationShantytowns:{type:"townList",label:"Sites concernés",description:`Merci de sélectionner les sites concernés par le dispositif.<br/>Si vous ne trouvez pas un site, vous pouvez <a href="${this.$router.resolve("/nouveau-site").href}" clas="link">déclarer un nouveau site</a>.`,mandatory:!0,condition({locationType:e}){return"shantytowns"===e}},locationAddress:{type:"addressWithLocation",label:"Adresse du terrain d'insertion",mandatory:!0,condition({locationType:e}){return"location"===e}},locationDetails:{type:"text",label:"Préciser",mandatory:!0,condition({locationType:e}){return"other"===e}}}},{title:"Contacts",inputs:{government:{type:"autocompleter",label:"Personne au service de l'état en charge du pilotage",mandatory:!0,specificProps:{autocompleter:e=>{const t=vu("public_establishment"),i=t.then(({users:t})=>t.filter(({first_name:t,last_name:i})=>[t,i].some(t=>e.split(" ").every(e=>-1!==t.toLowerCase().indexOf(e.toLowerCase())))).map(({id:e,first_name:t,last_name:i})=>({id:e,label:`${t} ${i.toUpperCase()}`})));return i.abort=t.abort,i},showCategory:!1,allowMultiple:!1,float:!0}},association:{type:"autocompleter",label:"Opérateur ou service en charge de l'intervention",mandatory:!0,specificProps:{autocompleter:e=>{const t=pu("association"),i=t.then(({organizations:t})=>t.filter(({name:t,abbreviation:i})=>e.split(" ").every(e=>-1!==t.toLowerCase().indexOf(e.toLowerCase()))||null!==i&&i.toLowerCase().indexOf(e.toLowerCase())>=0).map(e=>({id:e.id,label:e.name,category:`${e.departement_code} - ${e.departement_name}`,data:{name:e.name,departement:e.departement_code}})));return i.abort=t.abort,i},showCategory:!0,allowMultiple:!1,float:!0}},contact:{type:"select",label:"Personne référente dans la structure",mandatory:!0,options:[],condition({association:e}){return void 0!==e&&e.length>0&&this.options.length>0}},contact_missing:n}},{title:"Financements",inputs:{finances:{type:"planFunding",label:"Financements",mandatory:!1}}}],submit:Ux}]},Vo("user.create")&&(window.createUser=this.createUser,n.description+='<br/><a class="link" onclick="createUser()">Vous pouvez créer un compte utilisateur en cliquant ici.</span>'),"public_establishment"===e.organization.category.uid&&(i.formData.government=[{id:e.id,label:`${e.first_name} ${e.last_name.toUpperCase()}`}]),i},watch:{"formData.association":function(){this.loadingAssociationContacts=!0,this.$refs.form.getInputById("contact").options=[],0!==this.formData.association.length&&hu(this.formData.association[0].id).then(({users:e})=>{this.$refs.form.getInputById("contact").options=e.map(({id:e,first_name:t,last_name:i})=>({value:e,label:`${t} ${i.toUpperCase()}`})),this.loadingAssociationContacts=!1})}},mounted(){this.load(),window.addEventListener("message",({data:e})=>{this.$refs.form.getInputById("contact").options=[{value:e.id,label:`${e.first_name} ${e.last_name.toUpperCase()}`}],this.formData.contact=e.id,this.loadingAssociationContacts=!1,Qc({group:"notifications",type:"success",title:"Utilisateur créé",text:"La personne référente est désormais sélectionnée"})},!1)},methods:{getDepartementsForCurrentUser(){const e={city:1,epci:2,departement:3,region:4,nation:5},t=this.user.permissions.plan.create.geographic_level,i=this.user.organization.location.type;let a;switch(a="local"===t||e[i]>e[t]?i:t,a){case"nation":{const{departements:e}=zo();return Promise.resolve(e)}case"region":return tS(this.user.organization.location.region.code).then(({departements:e})=>e);default:return Promise.resolve([this.user.organization.location.departement])}},load(){"loading"!==this.loading.status&&"completed"!==this.loading.status&&(this.loading.status="loading",this.loading.error=null,this.getDepartementsForCurrentUser().then(e=>{this.loading.status="completed",this.$nextTick(()=>{const t=this.$refs.form.getInputById("departement");t.options=e.map(({code:e,name:t})=>({label:`${e} - ${t}`,value:e}))})}).catch(e=>{this.loading.status="failed",this.loading.error=e}))},createUser(){const{name:e,departement:t}=this.formData.association[0].data,{href:i}=this.$router.resolve("/nouvel-utilisateur");window.open(`${i}?association_name=${encodeURIComponent(e)}&association_departement=${t}`,"newUser","menubar=no, status=no")},onComplete(e,[{id:t}]){Qc({group:"notifications",type:"success",title:"Dispositif correctement déclaré",text:"Le dispositif a bien été ajouté en base de données"}),this.$router.push("/dispositif/"+t)}}},sS=aS,nS=sS,oS=(i("83c6"),Object(u["a"])(nS,Xx,eS,!1,null,null,null)),rS=oS.exports,lS=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"hidden"!==e.closingAlertStatus?i("div",{staticClass:"alert"},[i("div",{ref:"wrapper",staticClass:"alert-wrapper"},[i("header",{staticClass:"alert-header"},[i("hgroup",[i("h1",{staticClass:"alert-title"},[e._v("Confirmez-vous la fermeture du dispositif "+e._s(e.plan.name)+" ?")])]),i("div",{staticClass:"alert-actionButtons"},[i("button",{staticClass:"button secondary",attrs:{disabled:"pending"===e.closingStatus},on:{click:function(t){return e.setClosingAlertStatus("hidden")}}},[e._v("Annuler")]),"step1"===e.closingAlertStatus?i("button",{staticClass:"button",on:{click:e.checkClosing}},[e._v("Suite")]):e._e(),"step2"===e.closingAlertStatus?i("button",{staticClass:"button",attrs:{disabled:"pending"===e.closingStatus},on:{click:e.close}},[e._v("Valider")]):e._e()])]),i("section",{staticClass:"alert-body"},["step1"===e.closingAlertStatus?i("div",[i("p",[e._v("Avant de fermer définitivement le dispositif, assurez-vous que les indicateurs de suivi renseignés par l'opérateur sont à jour."),null!==e.plan.last_update?i("span",[e._v(" Pour information, la dernière mise à jour des indicateurs a eu lieu le "+e._s(e.formatDate(e.plan.last_update/1e3,"d/m/y"))+".")]):e._e(),i("br"),e._v("Merci de renseigner les dépenses exécutées de l'année en cours et des années précédentes si nécessaire")]),i("PlanFunding",{attrs:{inputMode:"closing",minYear:e.minYear},model:{value:e.closingData.finances,callback:function(t){e.$set(e.closingData,"finances",t)},expression:"closingData.finances"}})],1):i("div",[i("p",[i("Input",{attrs:{id:"closedAt",mandatory:!0,type:"date",label:"Date de fermeture du dispositif",description:"La date de fermeture du dispositif doit être postérieure - ou égale - à la dernière date de mise à jour des indicateurs.",disabled:"pending"===e.closingStatus},model:{value:e.closingData.closedAt,callback:function(t){e.$set(e.closingData,"closedAt",t)},expression:"closingData.closedAt"}})],1),i("p",[i("Input",{attrs:{id:"comment",mandatory:!0,type:"textarea",label:"Commentaire",description:e.closingCommentDescription,disabled:"pending"===e.closingStatus},model:{value:e.closingData.comment,callback:function(t){e.$set(e.closingData,"comment",t)},expression:"closingData.comment"}})],1)]),e.closingErrors.length>0?i("div",{staticClass:"notification error"},[e._v("Une erreur est survenue")]):e._e(),e.closingErrors.length>0?i("p",{staticClass:"error"},[i("ul",e._l(e.closingErrors,(function(t){return i("li",[e._v(e._s(t))])})),0)]):e._e()])])]):e._e(),i("section",{staticClass:"section-white"},["loaded"!==e.status?i("div",{staticClass:"container"},[e.status&&"loading"!==e.status?"loadingError"===e.status?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.load}},[e._v("Réessayer ?")])])])]):e._e():i("div",[e._m(0)])]):e._e(),"loaded"===e.status?i("div",[i("header",{staticClass:"pageHeader"},[i("div",{staticClass:"pageHeader-wrapper"},[i("section",{staticClass:"pageHeader-main"},[i("section",{staticClass:"pageHeader-info"},[i("h1",{staticClass:"pageHeader-title"},[e._v(e._s(e.plan.name))])]),i("aside",{staticClass:"pageHeader-buttons"},[e.plan&&e.plan.canUpdate?i("router-link",{staticClass:"button",attrs:{to:"/modifier-dispositif/"+e.plan.id}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Mettre à jour")])],1):e._e(),e.plan&&e.plan.canUpdateMarks?i("router-link",{staticClass:"button",attrs:{to:"/dispositif/"+e.plan.id+"/indicateurs"}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Indicateurs")])],1):e._e(),e.plan&&null===e.plan.closed_at&&e.plan.canClose?i("a",{staticClass:"button",on:{click:function(t){return e.setClosingAlertStatus("step1")}}},[i("span",[e._v("Fermer le dispositif")])]):e._e()],1)])])]),i("section",{staticClass:"container"},[i("SlideNote",{attrs:{title:"Qu'est-ce qu'un dispositif ?"}},[i("template",{slot:"content"},[i("p",[e._v("C’est une action mise en place et financée en partie ou en totalité par un acteur public. Sa finalité est la résorption des bidonvilles."),i("br"),i("strong",[e._v("Qui doit le déclarer ?")]),e._v(" Le service de l'Etat à l'initiative du dispositif doit le déclarer. L'acteur de terrain sera en charge de renseigner les informations relatives à l'action menée.")]),i("p",[i("strong",[e._v("À quoi sert le suivi ?")]),i("br"),e._v("La mise à jour des données de suivi permettent d’observer la progression des démarches des habitants par rapport à une situation initiale et les résultats des actions."),i("br"),e._v("Toutes ces données peuvent êtres utilisées pour la communication auprès des partenaires.")])])],2),i("section",{staticClass:"dataSection"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"list"}})],1),e._v(" Intervention ")])]),i("article",{staticClass:"block"},[i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Date de début")]),i("br"),e._v(e._s(e.formatDate(e.plan.started_at/1e3,"d M y")))]),e.plan.expected_to_end_at?i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Date de fin prévue")]),i("br"),e._v(e._s(e.formatDate(e.plan.expected_to_end_at/1e3,"d M y"))),i("br"),i("strong",[e._v("Durée prévue : "+e._s(e.dateDiff(e.plan.started_at,e.plan.expected_to_end_at)))])]):e._e(),e.plan.closed_at?i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Date de fin")]),i("br"),e._v(e._s(e.formatDate(e.plan.closed_at/1e3,"d M y"))),i("br"),i("strong",[e._v("Durée : "+e._s(e.dateDiff(e.plan.started_at,e.plan.closed_at)))])]):e._e()]),i("p",{staticClass:"data-label"},[e._v("Champs d'intervention")]),e._l(e.plan.topics,(function(t){return i("p",[i("span",{staticClass:"rbTag rbTag--warning"},[e._v(e._s(t.name))]),i("br")])})),i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Objectifs")]),i("br"),i("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.plan.goals).replace(/\n/g,"<br/>"))}})])]),e.plan.final_comment?i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Commentaire")]),i("br"),i("span",{domProps:{innerHTML:e._s(e.escapeHtml(e.plan.final_comment).replace(/\n/g,"<br/>"))}})])]):e._e()],2)]),i("section",{staticClass:"dataSection"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"map-pin"}})],1),e._v(" Lieu ")])]),i("article",{staticClass:"block"},[i("div",{staticClass:"dataSection-line"},[i("p",[i("span",{staticClass:"data-label"},[e._v(e._s(e.plan.location_type.label))]),i("br"),"shantytowns"===e.plan.location_type.id?i("span",e._l(e.plan.shantytowns,(function(t){return i("p",[i("router-link",{staticClass:"locationPoint",attrs:{to:"/site/"+t.id}},[e._v(e._s(t.usename))])],1)})),0):e._e(),"location"===e.plan.location_type.id?i("span",{staticClass:"locationPoint"},[e._v(e._s(e.plan.location.label))]):e._e(),"other"===e.plan.location_type.id?i("span",[e._v(e._s(e.plan.location_details))]):e._e()])]),"location"===e.plan.location_type.id?i("Map",{attrs:{"display-searchbar":!1,towns:[e.address],"default-view":e.center}}):e._e()],1)]),i("section",{staticClass:"dataSection"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"address-book"}})],1),e._v(" Contacts ")])]),i("article",{staticClass:"block"},[i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Service de l'état")]),i("br"),i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+e.plan.government_contacts[0].organization.id}},[e._v(e._s(e.plan.government_contacts[0].first_name)+" "+e._s(e.plan.government_contacts[0].last_name.toUpperCase())),i("br"),e._v(e._s(e.plan.government_contacts[0].organization.name))])],1)]),i("div",{staticClass:"dataSection-line"},[i("p",{staticClass:"data"},[i("span",{staticClass:"data-label"},[e._v("Opérateur ou service en charge")]),i("br"),i("router-link",{staticClass:"user",attrs:{to:"/annuaire/"+e.plan.operator_contacts[0].organization.id}},[e._v(e._s(e.plan.operator_contacts[0].first_name)+" "+e._s(e.plan.operator_contacts[0].last_name.toUpperCase())),i("br"),e._v(e._s(e.plan.operator_contacts[0].organization.name))])],1)])])]),e.plan&&e.plan.finances&&e.plan.finances.length>0?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"euro-sign"}})],1),e._v(" Financements ")])]),i("header",{staticClass:"planFunding-header"},[i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":!0===e.reachedMinFinanceIndex},attrs:{icon:"caret-square-left"},on:{click:e.showPreviousYear}}),i("span",[e._v(e._s(e.plan.finances[e.currentFinanceIndex].year)+" ")]),i("font-awesome-icon",{staticClass:"planFunding-yearSwitch",class:{"planFunding-yearSwitch--disabled":!0===e.reachedMaxFinanceIndex},attrs:{icon:"caret-square-right"},on:{click:e.showNextYear}})],1),i("table",{staticClass:"table block"},[e._m(1),i("tbody",[e._l(e.plan.finances[e.currentFinanceIndex].data,(function(t){return i("tr",[i("td",[e._v(e._s(t.type.name))]),i("td",[e._v(e._s(t.amount)+" €"),i("br"),e._v("soit "+e._s(Math.round(t.amount/e.financeTotal()*100))+"%")]),i("td",[e._v(e._s(t.details))]),t.realAmount?i("td",[e._v(e._s(t.realAmount)+" €")]):e.reachedMaxFinanceIndex?i("td",[e._v("À remplir entre janvier et mars")]):i("td",[e._v("Non renseignées")])])})),i("tr",[i("td"),i("td",{attrs:{colspan:"3"}},[i("strong",[e._v("TOTAL : "+e._s(e.financeTotal())+"€")])])])],2)])]):e._e(),e.plan.states.length>0?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"users"}})],1),e._v(" Équipe ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th"),e._l(e.plan.states,(function(t){return i("th",[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",e._l(e.availableEtpTypes,(function(t){return i("tr",[i("th",[e._v(e._s(t.name))]),e._l(e.plan.states,(function(a){return i("td",[e._v(e._s((a.etp.find((function(e){var i=e.type.uid;return i===t.uid}))||{total:0}).total))])}))],2)})),0)])]):e._e(),e.audience?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1),e._v(" Public ")])]),i("table",{staticClass:"table block"},[e._m(2),i("tbody",[i("tr",[e._m(3),i("td",[e._v(e._s(e.audience.in.families))]),i("td",[e._v(e._s(e.audience.in.total))]),i("td",[e._v(e._s(e.audience.in.women))]),i("td",[e._v(e._s(e.audience.in.minors))])]),i("tr",[e._m(4),i("td",[e._v(e._s(e.audience.out_positive.families))]),i("td",[e._v(e._s(e.audience.out_positive.total))]),i("td",[e._v(e._s(e.audience.out_positive.women))]),i("td",[e._v(e._s(e.audience.out_positive.minors))])]),i("tr",[e._m(5),i("td",[e._v(e._s(e.audience.out_excluded.families))]),i("td",[e._v(e._s(e.audience.out_excluded.total))]),i("td",[e._v(e._s(e.audience.out_excluded.women))]),i("td",[e._v(e._s(e.audience.out_excluded.minors))])]),i("tr",[e._m(6),i("td",[e._v(e._s(e.audience.out_abandoned.families))]),i("td",[e._v(e._s(e.audience.out_abandoned.total))]),i("td",[e._v(e._s(e.audience.out_abandoned.women))]),i("td",[e._v(e._s(e.audience.out_abandoned.minors))])])])])]):e._e(),e.plan.states.length>0?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"id-card"}})],1),e._v(" Droit commun et ressources ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"},[e._v("Nombre de personnes ayant")]),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",[i("tr",[i("td",[e._v("une domiciliation")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.droit_commun.domiciliation?"NC":t.droit_commun.domiciliation))])}))],2),i("tr",[i("td",[e._v("des droits CAF ouverts")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.droit_commun.droits_caf?"NC":t.droit_commun.droits_caf))])}))],2),i("tr",[i("td",[e._v("un emploi stable / ressources suffisantes")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.droit_commun.emploi_stable?"NC":t.droit_commun.emploi_stable))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"health"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"user-md"}})],1),e._v(" Santé ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",[i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes avec...")])])]),i("tr",[i("td",[e._v("une couverture AME valide")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.ame_valide?"NC":t.sante.ame_valide))])}))],2),i("tr",[i("td",[e._v("une couverture PUMA valide")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.puma_valide?"NC":t.sante.puma_valide))])}))],2),i("tr",[i("td",[e._v("une demande AME en cours")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.ame_en_cours?"NC":t.sante.ame_en_cours))])}))],2),i("tr",[i("td",[e._v("une demande PUMA en cours")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.puma_en_cours?"NC":t.sante.puma_en_cours))])}))],2),i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes ayant fait l'objet d'au moins...")])])]),i("tr",[i("td",[e._v("une orientation vers une structure de santé")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.orientation?"NC":t.sante.orientation))])}))],2),i("tr",[i("td",[e._v("un accompagnement physique vers une structure de santé")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.sante.accompagnement?"NC":t.sante.accompagnement))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"school"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"user-md"}})],1),e._v(" Éducation et scolarisation ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",[i("tr",[i("td",[e._v("Mineurs en âge d'être scolarisé ou suivant une formation")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.scolarisables?"NC":t.education.scolarisables))])}))],2),i("tr",[i("td",[e._v("Mineurs bénéficiant d'une action de médiation (3 - 18 ans)")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.en_mediation?"NC":t.education.en_mediation))])}))],2),i("tr",[i("td",[e._v("Inscrits en maternelle")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.maternelles?"NC":t.education.maternelles))])}))],2),i("tr",[i("td",[e._v("Inscrits en primaire")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.elementaires?"NC":t.education.elementaires))])}))],2),i("tr",[i("td",[e._v("Inscrits en collège")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.colleges?"NC":t.education.colleges))])}))],2),i("tr",[i("td",[e._v("Inscrits au Lycée - formation professionnelle")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.education.lycees?"NC":t.education.lycees))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"work"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"briefcase"}})],1),e._v(" Formation et emploi ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",[i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes inscrites ou suivies par...")])])]),i("tr",[i("td",[e._v("Pôle emploi")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.pole_emploi?"NC":t.formation.pole_emploi))])}))],2),i("tr",[e._m(7),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.pole_emploi_femmes?"NC":t.formation.pole_emploi_femmes))])}))],2),i("tr",[i("td",[e._v("Mission locale")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.mission_locale?"NC":t.formation.mission_locale))])}))],2),i("tr",[e._m(8),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.mission_locale_femmes?"NC":t.formation.mission_locale_femmes))])}))],2),i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v("Nombre de personnes ayant")])])]),i("tr",[i("td",[e._v("Un contrat")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.contrats?"NC":t.formation.contrats))])}))],2),i("tr",[e._m(9),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.contrats_femmes?"NC":t.formation.contrats_femmes))])}))],2),i("tr",[i("td",[e._v("Une formation")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.formations?"NC":t.formation.formations))])}))],2),i("tr",[e._m(10),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.formations_femmes?"NC":t.formation.formations_femmes))])}))],2),i("tr",[i("td",[e._v("Un statut autoentrepreneur")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.autoentrepreneurs?"NC":t.formation.autoentrepreneurs))])}))],2),i("tr",[e._m(11),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.autoentrepreneurs_femmes?"NC":t.formation.autoentrepreneurs_femmes))])}))],2),i("tr",[i("td",[e._v("l'ARE")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.are?"NC":t.formation.are))])}))],2),i("tr",[e._m(12),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.formation.are_femmes?"NC":t.formation.are_femmes))])}))],2)])])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"housing"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"home"}})],1),e._v(" Logement ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",[e._l(e.housingFields,(function(t){return[i("tr",[i("th",{attrs:{colspan:e.plan.states.length+1}},[i("strong",[e._v(e._s(t.label))])])]),i("tr",[i("td",[e._v("Nombre de personnes")]),e._l(e.plan.states,(function(a){return i("td",[e._v(e._s(null===a.logement[t.name].people?"NC":a.logement[t.name].people))])}))],2),i("tr",[i("td",[e._v("Nombre de ménages")]),e._l(e.plan.states,(function(a){return i("td",[e._v(e._s(null===a.logement[t.name].families?"NC":a.logement[t.name].families))])}))],2)]}))],2)])]):e._e(),e.plan.states.length>0&&e.plan.topics.find((function(e){var t=e.uid;return"safety"===t}))?i("section",{staticClass:"dataSection rb-table"},[i("header",{staticClass:"dataSection-header"},[i("h1",{staticClass:"dataSection-title"},[i("span",{staticClass:"dataSection-icon"},[i("font-awesome-icon",{attrs:{icon:"seedling"}})],1),e._v(" Stabilisation et sécurisation du site ")])]),i("table",{staticClass:"table block"},[i("thead",[i("tr",[i("th",{staticClass:"table-col"}),e._l(e.plan.states,(function(t){return i("th",{staticClass:"table-col"},[e._v(e._s(e.formatDate(new Date(t.date).getTime()/1e3,"d B y")))])}))],2)]),i("tbody",[i("tr",[i("td",[e._v("Nombre d'accès réguliers à l'eau potable")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.points_eau?"NC":t.securisation.points_eau))])}))],2),i("tr",[i("td",[e._v("Nombre de sanitaires")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.wc?"NC":t.securisation.wc))])}))],2),i("tr",[i("td",[e._v("Nombre d'accès réguliers à l'électricité")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.electricite?"NC":t.securisation.electricite))])}))],2),i("tr",[i("td",[e._v("Nombre de bennes disponibles pour le ramassage des déchets du site")]),e._l(e.plan.states,(function(t){return i("td",[e._v(e._s(null===t.securisation.nombre_bennes?"NC":t.securisation.nombre_bennes))])}))],2)])])]):e._e(),0===e.plan.states.length&&e.plan.canUpdateMarks?i("div",{staticClass:"note"},[i("div",{staticClass:"note-body"},[i("p",[i("strong",[e._v("Aucun indicateur de suivi renseigné par l'opérateur")]),i("br"),i("router-link",{staticClass:"button",attrs:{to:"/dispositif/"+e.plan.id+"/indicateurs"}},[i("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),i("span",[e._v("Modifier")])],1)],1)])]):e._e()],1)]):e._e()])],1)])},cS=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"table-col"},[e._v("Type de financements")]),i("th",{staticClass:"table-col"},[e._v("Montants"),i("br"),e._v("prévus")]),i("th",{staticClass:"table-col"},[e._v("Précision")]),i("th",{staticClass:"table-col"},[e._v("Dépenses"),i("br"),e._v("exécutées")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"table-col"}),i("th",{staticClass:"table-col"},[e._v("Ménages")]),i("th",{staticClass:"table-col"},[e._v("Personnes")]),i("th",{staticClass:"table-col"},[e._v("dont femmes")]),i("th",{staticClass:"table-col"},[e._v("dont mineurs")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Entrées")]),e._v(" dans le dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Sorties positivement")]),i("br"),e._v("fin accompagnement social et/ou"),i("br"),e._v("prise en charge dans un autre dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Exclusion")]),e._v(" du dispositif")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("strong",[e._v("Abandon / départ volontaire")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("em",[e._v("(dont femmes)")])])}],uS={components:{NavBar:yr,SlideNote:Gc,Map:Id,PlanFunding:oc,Input:Fc},data(){const{etp_types:e}=zo();return{status:null,error:null,plan:null,etpTypes:e,currentFinanceIndex:0,closingAlertStatus:"hidden",closingErrors:[],closingStatus:null,closingData:{closedAt:new Date,finances:[],comment:""},housingFields:[{name:"siao",label:"Demandes SIAO"},{name:"logement_social",label:"Demandes de logement social"},{name:"dalo",label:"Demandes DALO"},{name:"accompagnes",label:"Accès à un logement accompagné / adapté"},{name:"non_accompagnes",label:"Accès à un logement sans accompagnement"},{name:"heberges",label:"Hébergements"}]}},created(){this.load()},computed:{closingCommentDescription(){if(!this.audience)return"";const e={...this.audience.in};return["out_positive","out_abandoned","out_excluded"].forEach(t=>{e.total-=this.audience[t].total,e.families-=this.audience[t].families,e.women-=this.audience[t].women,e.minors-=this.audience[t].minors}),0===e.total&&0===e.families&&0===e.women&&0===e.minors?"Précisez les raisons de la fermeture du dispositif":`À la fermeture du dispositif, ${e.families} ménage${e.families>1?"s":""} (soit ${e.total} personne${e.total>1?"s":""}) sont identifiés dans le dispositif. Merci de préciser les solutions mobilisées pour ces personnes et les raisons de la fermeture du dispositif.<br /><br />Merci de respecter les règles de confidentialité.Ne pas citer l'identité des individus (Nom, âge, sexe, origine...)`},reachedMaxFinanceIndex(){return!this.plan||!this.plan.finances||0===this.plan.finances.length||0===this.currentFinanceIndex},reachedMinFinanceIndex(){return!this.plan||!this.plan.finances||0===this.plan.finances.length||this.currentFinanceIndex>=this.plan.finances.length-1},minYear(){return this.plan&&this.plan.finances&&0!==this.plan.finances.length?this.plan.finances.reduce((e,{year:t})=>null!==e?Math.min(e,t):t,null):null},availableEtpTypes(){return this.etpTypes.filter(({uid:e})=>this.plan.states.some(({etp:t})=>t.some(({type:{uid:t}})=>e===t)))},address(){return this.plan.location?{latitude:this.plan.location.latitude,longitude:this.plan.location.longitude,address:this.plan.location.label}:null},center(){return this.plan.location?{center:[this.plan.location.latitude,this.plan.location.longitude],zoom:15}:null},lastState(){return this.plan&&0!==this.plan.states.length?this.plan.states.slice(-1)[0]:null},audience(){if(!this.plan||0===this.plan.states.length)return null;function e(e,t){return{total:e.total+t.total,families:e.families+t.families,women:e.women+t.women,minors:e.minors+t.minors}}return this.plan.states.reduce((t,{audience:i})=>(i.in&&(t.in=e(t.in,i.in)),i.out_positive&&(t.out_positive=e(t.out_positive,i.out_positive)),i.out_abandoned&&(t.out_abandoned=e(t.out_abandoned,i.out_abandoned)),i.out_excluded&&(t.out_excluded=e(t.out_excluded,i.out_excluded)),t),{in:{total:0,families:0,women:0,minors:0},out_positive:{total:0,families:0,women:0,minors:0},out_abandoned:{total:0,families:0,women:0,minors:0},out_excluded:{total:0,families:0,women:0,minors:0}})}},methods:{hasPermission:Vo,financeTotal(){return this.plan&&this.plan.finances?this.plan.finances[this.currentFinanceIndex].data.reduce((e,{amount:t})=>e+parseFloat(t),0):0},load(){-1===["loading","loaded"].indexOf(this.status)&&(this.status="loading",this.error=null,Vx(this.$route.params.id).then(e=>{this.plan=e,this.closingData.finances=this.plan.finances.map(e=>({...e,data:e.data.map(e=>({...e,type:e.type.uid}))})),this.status="loaded"}).catch(({user_message:e})=>{this.error=e,this.status="loadingError"}))},escapeHtml(...e){return App.escapeHtml(...e)},dateDiff(...e){return App.dateDiff(...e)},formatDate(...e){return App.formatDate(...e)},showPreviousYear(){this.reachedMinFinanceIndex||(this.currentFinanceIndex+=1)},showNextYear(){this.reachedMaxFinanceIndex||(this.currentFinanceIndex-=1)},setClosingAlertStatus(e){this.closingErrors=[],this.closingAlertStatus=e},checkClosing(){const e=[];for(let t=(new Date).getFullYear();t>=Math.max(2019,this.minYear);t-=1){const i=this.closingData.finances.find(({year:e})=>e===t);i&&0!==i.data.length&&!i.data.some(({realAmount:e})=>void 0===e||null===e)||e.push(t)}e.length>0?this.closingErrors=e.map(e=>`Les dépenses exécutées pour l'année ${e} ne sont pas renseignées, il n'est pas possible de fermer le dispositif.`):this.setClosingAlertStatus("step2")},close(){"pending"!==this.closingStatus&&(this.closingStatus="pending",Wx(this.$route.params.id,this.closingData).then(()=>{this.closingStatus="success",Qc({group:"notifications",type:"success",title:"Dispositif fermé",text:"Le dispositif a bien été fermé"}),this.$router.push("/liste-des-dispositifs")}).catch(({fields:e})=>{this.closingStatus="error",this.closingErrors=Object.keys(e).reduce((t,i)=>[...t,...e[i]],[])}))}}},dS=uS,pS=dS,mS=(i("e438"),Object(u["a"])(pS,lS,cS,!1,null,"23a8c2ae",null)),hS=mS.exports,vS=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section-white"},["loaded"!==e.status?i("div",{staticClass:"container"},[e.status&&"loading"!==e.status?"loadingError"===e.status?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.load}},[e._v("Réessayer ?")])])])]):e._e():i("div",[e._m(0)])]):e._e(),"loaded"===e.status?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()])],1)},fS=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])}],gS={components:{NavBar:yr,Form:Xc},data(){const{user:e,topics:t}=zo(),i={status:null,error:null,formData:{association:[]}};return i.formDefinition={title:"Modifier un dispositif",descriptionTitle:"Pourquoi modifier la fiche du dispositif ?",description:"Vous pouvez modifier ou mettre à jour les informations générales relatives au projet que vous pilotez.<br/>\n            <br/>\n            Deux informations pourront en particulier être mises à jour régulièrement :<br/>\n            - les financements<br/>\n            - les contacts référents<br/>\n            <br/>\n            A noter que les indicateurs de suivi du dispositif sont modifiés directement par la structure ou l’association en charge de l’intervention. Par exemple, le nombre de personnes dans le dispositif ou le nombre de ménages ayant accédé à un logement seront directement renseignés par ces derniers.",steps:[{title:"Dispositif",wording:{error:"La modification du dispositif a échoué",submit:"Modifier le dispositif"},sections:[{title:"Intervention",icon:"list",inputs:{name:{type:"text",label:"Nom du dispositif",mandatory:!0},departement:{type:"text",label:"Département d'intervention",mandatory:!0,disabled:!0},startedAt:{type:"date",label:"Date de début",mandatory:!0},expectedToEndAt:{type:"date",label:"Date de fin prévue (facultatif)",mandatory:!1},in_and_out:{type:"radio",label:"Ce dispositif implique-t-il un système d'entrées et de sorties des personnes ?",mandatory:!0,disabled:!0,options:[{value:1,label:"Oui"},{value:0,label:"Non"}]},topics:{type:"checkbox",label:"Champs d'intervention",description:"Les thématiques sélectionnées définissent l'action que vous menez et les indicateurs de suivi associés.",mandatory:!0,disabled:!0,options:t.map(({uid:e,name:t})=>({value:e,label:t}))},goals:{type:"textarea",label:"Objectifs",mandatory:!0,specificProps:{placeholder:"Précisez les objectifs, les enjeux, le contexte du dispositif\n\nPar exemple : résorber le bidonville, scolariser 80% des enfants identités en bidonvilles..."}}}},{title:"Lieu",icon:"map-pin",inputs:{locationType:{type:"radio",label:"L'action se déroule dans le cadre suivant",mandatory:!0,disabled:!0,options:[{value:"shantytowns",label:"sur site(s) : bidonville ou squat"},{value:"location",label:"sur terrain d'insertion"},{value:"housing",label:"dans le logement"},{value:"other",label:"dans plusieurs lieux (hébergement, permanence, rue...)"}]},locationShantytowns:{type:"townList",label:"Sites concernés",mandatory:!0,disabled:!0,condition({locationType:e}){return"shantytowns"===e}},locationAddress:{type:"addressWithLocation",label:"Adresse du terrain d'insertion",mandatory:!0,disabled:!0,condition({locationType:e}){return"location"===e}},locationDetails:{type:"text",label:"Préciser",mandatory:!0,disabled:!0,condition({locationType:e}){return"other"===e}}}},{title:"Contacts",inputs:{government:{type:"autocompleter",label:"Personne au service de l'état en charge du pilotage",mandatory:!0,specificProps:{autocompleter:e=>{const t=vu("public_establishment"),i=t.then(({users:t})=>t.filter(({first_name:t,last_name:i})=>[t,i].some(t=>e.split(" ").every(e=>-1!==t.toLowerCase().indexOf(e.toLowerCase())))).map(({id:e,first_name:t,last_name:i})=>({id:e,label:`${t} ${i.toUpperCase()}`})));return i.abort=t.abort,i},showCategory:!1,allowMultiple:!1,float:!0}}}},{title:"Financements",inputs:{finances:{label:"Financements",type:"planFunding",mandatory:!1}}}],submit:e=>Hx(this.$route.params.id,e)}]},"public_establishment"===e.organization.category.uid&&(i.formData.state=[{id:e.id,label:`${e.first_name} ${e.last_name.toUpperCase()}`}]),i},watch:{"formData.association":function(){this.$refs.form&&(this.loadingAssociationContacts=!0,this.$refs.form.getInputById("contact").options=[],0!==this.formData.association.length&&hu(this.formData.association[0].id).then(({users:e})=>{this.$refs.form.getInputById("contact").options=e.map(({id:e,first_name:t,last_name:i})=>({value:e,label:`${t} ${i.toUpperCase()}`})),this.loadingAssociationContacts=!1}))}},created(){this.load()},methods:{load(){-1===["loading","loaded"].indexOf(this.status)&&(this.status="loading",this.error=null,Vx(this.$route.params.id).then(e=>{this.formDefinition.title="Modifier un dispositif - "+e.name,this.formData.name=e.name,this.formData.departement=`${e.departement.code} - ${e.departement.name}`,this.formData.startedAt=e.started_at,this.formData.expectedToEndAt=e.expected_to_end_at,this.formData.in_and_out=e.in_and_out?1:0,this.formData.topics=e.topics.map(({uid:e})=>e),this.formData.goals=e.goals,this.formData.locationType=e.location_type.id,this.formData.locationShantytowns=e.shantytowns&&e.shantytowns.length>0?e.shantytowns.map(({id:e})=>e):void 0,this.formData.locationAddress=e.location?{address:{label:e.location.address},location:{coordinates:[e.location.latitude,e.location.longitude],zoom:15}}:void 0,this.formData.locationDetails=e.location_details,this.formData.government=[{id:e.government_contacts[0].id,label:`${e.government_contacts[0].first_name} ${e.government_contacts[0].last_name.toUpperCase()}`}],this.formData.association=[{id:e.operator_contacts[0].organization.id,label:e.operator_contacts[0].organization.name}],this.formData.contact=e.operator_contacts[0].id,this.formData.finances=e.finances.map(({year:e,data:t})=>({year:e,data:t.map(({type:{uid:e},amount:t,details:i,realAmount:a})=>({type:e,amount:t,details:i,realAmount:a}))})),this.plan=e,this.status="loaded"}).catch(e=>{this.error=e.user_message,this.status="loadingError"}))},onComplete(){Qc({group:"notifications",type:"success",title:"Dispositif modifié",text:"Le dispositif a bien été mis à jour"}),this.$router.push("/dispositif/"+this.$route.params.id)}}},bS=gS,_S=bS,yS=(i("b82e"),Object(u["a"])(_S,vS,fS,!1,null,null,null)),wS=yS.exports,CS=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("NavBar"),i("section",{staticClass:"section-white"},["loaded"!==e.status?i("div",{staticClass:"container"},[e.status&&"loading"!==e.status?"loadingError"===e.status?i("div",[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("span",{on:{click:e.load}},[e._v("Réessayer ?")])])])]):e._e():i("div",[e._m(0)])]):e._e(),"loaded"===e.status?i("div",[i("Form",e._b({ref:"form",on:{complete:e.onComplete},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},"Form",e.formDefinition,!1))],1):e._e()])],1)},kS=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])}],xS={components:{NavBar:yr,Form:Xc},data(){const e={status:null,error:null,formData:{}};return e.formDefinition={title:"",descriptionTitle:"À quoi sert le suivi ?",description:"Les indicateurs de suivi permettent d’<strong>observer l'évolution de l'accès au droit commun et l'insertion</strong> du groupe de personnes accompagnées. Ces informations facilitent le pilotage local et national.",steps:[{title:"Dispositf",wording:{error:"La déclaration du dispositif a échoué",submit:"Valider"},sections:[{inputs:{date:{type:"date",label:"Date d'actualisation des données",mandatory:!0}}},{title:"Public",icon:"arrow-right",inputs:{audience:{type:"audience",label:"Public",mandatory:!0,specificProps:{},condition({date:e}){return!!e}}}},{title:"Équipe",icon:"users",inputs:{etp:{type:"etp",label:"Nombre d’ETP dédiés par fonction",mandatory:!0,condition({date:e}){return!!e}}}},{title:"Droit commun et ressources",description:"Nombre de personnes avec...",icon:"id-card",inputs:{domiciliation:{type:"number",label:"une domiciliation",mandatory:!1,condition({date:e}){return!!e}},droits_caf:{type:"number",label:"des droits CAF ouverts",mandatory:!1,condition({date:e}){return!!e}},emploi_stable:{type:"number",label:"un emploi stable / ressources suffisantes",mandatory:!1,condition({date:e}){return!!e}}}}],submit:e=>{const t={...e,...e.housing};return delete t.housing,Gx(this.$route.params.id,t)}}]},e.varyingSections={health:[{title:"Santé",description:"Nombre de personnes avec...",icon:"user-md",inputs:{ame_valide:{type:"number",label:"une couverture AME valide",mandatory:!1,condition({date:e}){return!!e}},puma_valide:{type:"number",label:"une couverture PUMA valide",mandatory:!1,condition({date:e}){return!!e}},ame_en_cours:{type:"number",label:"une demande AME en cours",mandatory:!1,condition({date:e}){return!!e}},puma_en_cours:{type:"number",label:"une demande PUMA en cours",mandatory:!1,condition({date:e}){return!!e}}}},{title:"",description:"Nombre de personnes ayant fait l'objet d'au moins",icon:"user-md",inputs:{orientation:{type:"number",label:"une orientation vers une structure de santé",mandatory:!1,condition({date:e}){return!!e}},accompagnement:{type:"number",label:"un accompagnement physique vers une structure de santé",mandatory:!1,condition({date:e}){return!!e}}}}],school:[{title:"Éducation et scolarisation",icon:"book-reader",inputs:{scolarisables:{type:"number",label:"Parmi les mineurs, combien sont en âge d'être scolarisés ?",mandatory:!1,condition({date:e}){return!!e}},en_mediation:{type:"number",label:"Combien bénéficient d’une action de médiation (3 – 18 ans) ?",mandatory:!1,condition({date:e}){return!!e}},maternelles:{type:"number",label:"Enfants inscrits en maternelle",mandatory:!1,condition({date:e}){return!!e}},elementaires:{type:"number",label:"Enfants inscrits en élémentaire",mandatory:!1,condition({date:e}){return!!e}},colleges:{type:"number",label:"Enfants inscrits au collège",mandatory:!1,condition({date:e}){return!!e}},lycees:{type:"number",label:"Enfants inscrits au lycée - formation professionnelle",mandatory:!1,condition({date:e}){return!!e}},difficultes:{type:"checkbox",label:"Difficultés éventuelles rencontrées :",mandatory:!1,condition({date:e}){return!!e},options:[{value:"cantine",label:"Cantine"},{value:"place_up2a",label:"Manque de place en UP2A"},{value:"transport",label:"Transport"}]}}}],work:[{title:"Formation et emploi",icon:"briefcase",description:"Nombre de personnes inscrites ou suivies par",inputs:{pole_emploi:{type:"number",label:"Pôle emploi",mandatory:!1,condition({date:e}){return!!e}},pole_emploi_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},mission_locale:{type:"number",label:"Mission locale",mandatory:!1,condition({date:e}){return!!e}},mission_locale_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}}}},{icon:"briefcase",description:"Nombre de personnes ayant",inputs:{contrats:{type:"number",label:"un contrat",mandatory:!1,condition({date:e}){return!!e}},contrats_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},formations:{type:"number",label:"une formation",mandatory:!1,condition({date:e}){return!!e}},formations_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},autoentrepreneurs:{type:"number",label:"un statut autoentrepreneur",mandatory:!1,condition({date:e}){return!!e}},autoentrepreneurs_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}},are:{type:"number",label:"l'ARE",mandatory:!1,condition({date:e}){return!!e}},are_femmes:{type:"number",label:"(dont femmes)",mandatory:!1,condition({date:e}){return!!e}}}}],housing:[{title:"Logement",icon:"home",inputs:{housing:{type:"planHousing",label:"",mandatory:!1,condition({date:e}){return!!e}}}}],safety:[{title:"Stabilisation et sécurisation du site",icon:"seedling",inputs:{points_eau:{type:"number",label:"Nombre d'accès réguliers à l'eau potable",mandatory:!1,condition({date:e}){return!!e}},wc:{type:"number",label:"Nombre de sanitaires",mandatory:!1,condition({date:e}){return!!e}},electricite:{type:"number",label:"Nombre d'accès réguliers à l'électricité",mandatory:!1,condition({date:e}){return!!e}},nombre_bennes:{type:"number",label:"Nombre de bennes disponibles pour le ramassage des déchets du site",mandatory:!1,condition({date:e}){return!!e}}}}]},e},created(){this.load()},methods:{hasPermission:Vo,load(){-1===["loading","loaded"].indexOf(this.status)&&(this.status="loading",this.error=null,Vx(this.$route.params.id).then(e=>{e.topics.forEach(({uid:e})=>{this.varyingSections[e]&&this.varyingSections[e].forEach(e=>{this.formDefinition.steps[0].sections.push(e)})});const t=this.formDefinition.steps[0].sections.find(({inputs:e})=>void 0!==e.audience);let i=null;if(0===e.states.length)t.title="Qui sont les publics ayant intégré le dispositif ?",t.description="Vous renseignez les indicateurs de suivi pour la première fois. Veuillez porter une attention particulière aux données que vous renseignez ci-dessous : les mises à jour ultérieures seront conditionnées par cette première déclaration.",t.inputs.audience.specificProps.inOnly=!0;else{[i]=e.states.slice(-1);const a=App.formatDate(i.date/1e3,"d/m/y");!0!==e.in_and_out?(t.title=`Quelles ont été les sorties du dispositif depuis la date du ${a} ?`,t.description="Seules les sorties du dispositif sont suivies, car le pilote de l’action au sein des services de l’Etat a renseigné qu’il n’existe pas de système d’entrées et de sorties du dispositif : le dispositif concerne un seul groupe de personne, ayant débuté le projet à la même période.<br/>\n                            Attention : le remplissage de ce tableau a un impact sur le nombre de personnes identifiées dans ce dispositif. Merci de le renseigner avec attention",t.inputs.audience.specificProps.outOnly=!0):(t.title=`Quelles ont été les entrées et sorties du dispositif depuis la date du ${a} ?`,t.description="Les entrées et sorties du dispositif sont suivies, car le pilote de l’action au sein des services de l’Etat a renseigné qu’il existe un système d’entrées et de sorties.<br/>\n                            Attention : le remplissage de ce tableau a un impact sur le nombre de personnes identifiées dans ce dispositif. Merci de le renseigner avec attention"),t.description+=`<br/><br/>\n                        Au ${a}, date de la dernière mise à jour des informations, sont intégrés dans le dispositif :\n                        ${e.audience.families} ménages, ${e.audience.total} personnes dont ${e.audience.women} femmes et ${e.audience.minors} mineurs\n                        `}i&&(this.formData={difficultes:["cantine","place_up2a","transport"].filter(e=>i.education&&(i.education["difficulte_"+e]||i.education["difficculte_"+e])),etp:i.etp.map(({total:e,type:{uid:t}})=>({total:e,type:t}))}),this.formDefinition.title=e.name,this.plan=e,this.status="loaded"}).catch(e=>{this.error=e.user_message,this.status="loadingError"}))},onComplete(){Qc({group:"notifications",type:"success",title:"Indicateurs correctement enregistrés",text:"Le dispositif a bien été mis à jour"}),this.$router.push("/dispositif/"+this.$route.params.id)}}},SS=xS,PS=SS,$S=(i("0045"),Object(u["a"])(PS,CS,kS,!1,null,"8f52fc1c",null)),TS=$S.exports,IS=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section--white"},[i("div",{staticClass:"container"},["loaded"===e.status?i("div",e._l(e.sections,(function(t){return i("section",{staticClass:"formSection"},[i("header",{staticClass:"formSection-header"},[i("h1",{staticClass:"formSection-title"},[e._v(e._s(t.title))]),i("p",[e._v("Total : "+e._s(e.computeTotal(t.id)))])]),i("div",{staticClass:"panel"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",[e._v("Département")]),i("th",[e._v(e._s(t.title))])])]),i("tbody",e._l(e.stats.numberOfShantytownOperations[t.id],(function(t){return i("tr",[i("td",[e._v("("+e._s(t.code)+") - "+e._s(t.name))]),i("td",[e._v(e._s(t.total))])])})),0)])])])})),0):e._e(),"loading"===e.status?i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])]):e._e(),"loading"!==e.status&&"loaded"!==e.status?i("div",{staticClass:"notification full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.load}},[e._v("Réessayer ?")])])]):e._e()])])],1)])},OS=[];function AS(){return Oo("/stats")}var ES={components:{NavBar:yr},data(){return{status:null,error:null,stats:null,sections:[{id:"creations",title:"Nombre de sites créés"},{id:"updates",title:"Nombre de sites modifiés"},{id:"closings",title:"Nombre de sites fermés"}]}},mounted(){this.load()},methods:{load(){"loaded"!==this.status&&"loading"!==this.status&&(this.status="loading",this.error=null,AS().then(({statistics:e})=>{this.stats=e,this.status="loaded"}).catch(({user_message:e})=>{this.status="error",this.error=e}))},computeTotal(e){return this.stats.numberOfShantytownOperations[e].reduce((e,{total:t})=>e+parseInt(t,10),0)}}},NS=ES,qS=NS,DS=(i("12a5"),Object(u["a"])(qS,IS,OS,!1,null,null,null)),jS=DS.exports,MS=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white",attrs:{id:"form"}},[i("div",{staticClass:"container"},[i("h1",[e._v("Mentions légales")]),i("h3",[e._v("Editeurs")]),i("p",[i("router-link",{attrs:{to:"/"}},[e._v("Résorption bidonvilles")]),e._v(" est édité par la Fabrique numérique du ministère de la transition écologique et solidaire et du ministère de la cohésion des territoires et des relations avec les collectivités territoriales, sise 1 place Carpeaux, 92800 Puteaux, avec l’appui de l’incubateur de services numériques (beta.gouv.fr) de la direction interministérielle du numérique et du système d’information et de communication de l’État (DINSIC).")],1),i("h3",[e._v("Nous joindre")]),e._m(0),i("h3",[e._v("Directeurs de la publication")]),e._m(1),i("h3",[e._v("Prestataire d’hébergement")]),i("p",[e._v("Le site "),i("router-link",{attrs:{to:"/"}},[e._v("resorption-bidonvilles.beta.gouv.fr")]),e._v(" est hébergé par la société OVH"),i("br"),e._v("Code APE 6202A"),i("br"),e._v("N° TVA : FR 22 424 761 419"),i("br"),e._v("Inscrite au RCS Roubaix – Tourcoing 424 761 419 00045")],1),i("p",[e._v("Siège social : 2 rue Kellermann, 59100 Roubaix, France")])])])],1)])},LS=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("ul",[i("li",[e._v("Par téléphone : +33 (0) 1 40 81 33 60")]),i("li",[e._v("Par mail : "),i("a",{staticClass:"mail",attrs:{href:"#","data-name":"contact","data-domain":"resorption-bidonvilles.beta.gouv","data-tld":"fr",onclick:"window.location.href = 'mailto:' + this.dataset.name + '@' + this.dataset.domain + '.' + this.dataset.tld; return false;"}})])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("ul",[i("li",[e._v("Délégué interministériel à l’hébergement et l’accès au logement")]),i("li",[e._v("La Grande Arche - 92055 La Défense Cedex")])])])}],FS={components:{NavBar:yr}},zS=FS,RS=zS,BS=(i("30ce"),Object(u["a"])(RS,MS,LS,!1,null,"ed8e96dc",null)),VS=BS.exports,US=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("Skeleton",{attrs:{loader:e.loader},on:{loaded:e.onLoaded},scopedSlots:e._u([{key:"title",fn:function(){return[i("h1",{staticClass:"page-title"},[e._v("Annuaire")]),i("p",{staticClass:"page-subtitle"},[e._v("Cette liste n’est pas exhaustive et regroupe à ce stade les utilisateurs de la plateforme à l’échelle nationale.")])]},proxy:!0},{key:"content",fn:function(){return[null!==e.focusedOrganization?i("Organization",{attrs:{organization:e.focusedOrganization},on:{close:e.resetFocusedOrganization}}):e._e(),i("div",{staticClass:"directory-search"},[i("OrganizationInput",{attrs:{specificProps:{placeholder:"Acteur, structure, ou territoire"}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.localIsNational?e._e():i("div",{staticClass:"switch"},[i("button",{class:{active:"local"===e.level},on:{click:function(t){return e.setLevel("local")}}},[e._v("Acteurs de mon territoire")]),i("button",{class:{active:"local"!==e.level},on:{click:function(t){return e.setLevel("national")}}},[e._v("Tous les acteurs")])]),i("Table",{staticClass:"directory",attrs:{columns:e.columns,content:e.pageContent,emptyLabel:"Aucun contact répertorié pour les filtres sélectionnés"},on:{click:e.focus}},[i("template",{slot:"aside"},[i("p",{staticClass:"directory-figures"},[e._v(e._s(e.filteredOrganizations.length)+" structure"+e._s(e.filteredOrganizations.length>1?"s":"")+" - "+e._s(e.usersTotal)+" contact"+e._s(e.usersTotal>1?"s":""))])])],2),i("div",{staticClass:"directory-tableAside"},[i("p",[e._v("Vous recherchez un contact public ? "),i("a",{attrs:{href:"https://lannuaire.service-public.fr"}},[e._v("https://lannuaire.service-public.fr")])])])]},proxy:!0}])})],1)},HS=[],GS=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("header",{staticClass:"page-header"},[i("hgroup",{staticClass:"page-titleContainer"},[e._t("title")],2),"loaded"===e.loading.status?i("div",{staticClass:"page-buttons"},[e._t("buttons")],2):e._e()]),"loading"===e.loading.status&&e.loading.isSlow?i("div",{staticClass:"notification notification--loading full-width"},[e._m(0),e._m(1)]):e._e(),"failed"===e.loading.status?i("div",{staticClass:"notification notification--failure error full-width"},[i("p",{staticClass:"notification-icon"},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1),i("p",{staticClass:"notification-content"},[i("span",{staticClass:"notification-title"},[e._v("Le chargement des données a échoué")]),i("br"),i("span",{staticClass:"notification-description"},[e._v(e._s(e.loading.error))])])]):e._e(),"loaded"===e.loading.status?e._t("content",null,{data:e.data}):e._e()],2)])],1)},WS=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"notification-icon"},[i("img",{attrs:{src:"/img/spinner_dark.svg"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"notification-content"},[i("span",{staticClass:"notification-title"},[e._v("Chargement des données en cours")])])}];const QS=1500;var JS={components:{NavBar:yr},props:{loader:{type:Function,required:!1}},data(){return{data:null,loading:{status:null,error:null,isSlow:!1,slowTimeout:null}}},mounted(){void 0!==this.loader?this.load():this.loading.status="loaded"},methods:{load(){"loading"!==this.loading.status&&"loaded"!==this.loading.status&&(this.loading.isSlow=!1,this.loading.status="loading",this.loading.error=null,this.loading.slowTimeout=setTimeout(()=>{this.loading.isSlow=!0},QS),this.loader().then(e=>{this.$emit("loaded",e),this.data=e,this.loading.status="loaded"}).catch(e=>{this.loading.status="failed",this.loading.error=e&&e.user_message||"Une erreur inconnue est survenue"}).then(()=>{clearTimeout(this.loading.slowTimeout),this.loading.slowTimeout=null}))}}},YS=JS,ZS=YS,KS=Object(u["a"])(ZS,GS,WS,!1,null,null,null),XS=KS.exports,eP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popin"},[i("div",{ref:"wrapper",staticClass:"popin-wrapper"},[i("div",[i("p",{staticClass:"popin-close"},[i("span",{staticClass:"link",on:{click:e.close}},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1)]),i("section",{staticClass:"organization-body"},[i("h1",{staticClass:"primary"},[e._v("Structure")]),i("p",[e._v(e._s(e.organization.name))]),i("h1",{staticClass:"primary"},[e._v("Territoire")]),i("p",[e._v(e._s(e.organization.locationName))]),i("h1",{staticClass:"primary"},[e._v("Rôle")]),i("p",{staticStyle:{margin:"5px 0 35px 0"}},[i("span",{staticClass:"role"},[e._v(e._s(e.organization.role))])]),i("h1",[e._v(e._s(e.users.length)+" contact"+e._s(e.users.length>1?"s":""))]),i("div",{staticClass:"organization-users"},e._l(e.users,(function(t){return i("div",{staticClass:"userCard"},[i("h1",[e._v(e._s(t.first_name)+" "+e._s(t.last_name.toUpperCase()))]),i("h2",[e._v("Fonction")]),i("h3",{class:{"userCard-position--empty":!t.position}},[e._v(e._s(t.position||"NC"))]),i("ul",{staticClass:"userCard-infoList"},[i("li",{staticClass:"userCard-info--email"},[i("a",{attrs:{href:"mailto:"+t.email}},[e._v(e._s(t.email))])]),t.phone?i("li",{staticClass:"userCard-info--phone"},[e._v(e._s(t.phone))]):e._e()])])})),0)])])])])},tP=[],iP={props:{organization:{type:Object,required:!0}},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},500)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){this.$refs.wrapper.contains(e.target)||this.close()},close(){this.$emit("close")}},computed:{users(){const e=[255,475,558,576];return this.organization.users.filter(t=>!e.includes(t.id))}}},aP=iP,sP=aP,nP=(i("f090"),Object(u["a"])(sP,eP,tP,!1,null,"eb1c327e",null)),oP=nP.exports;function rP(e){return Ao("/statistics/directory-views",{organization:e})}var lP={components:{Skeleton:XS,Table:ql,Organization:oP,OrganizationInput:_c},data(){return{organizations:[],columns:[{id:"organization",label:"Structure"},{id:"location",label:"Territoire"},{id:"role",label:"Rôle"},{id:"contacts",label:"",icon:"arrow-right"}],local:zo().user.organization.location,level:"local",search:null}},computed:{localIsNational(){return"nation"===this.local.type},parsedOrganizations(){let e=[];return e=this.localIsNational||"national"===this.level?this.organizations:this.organizations.filter(e=>{const t=this.local[this.local.type],i=e.location[this.local.type];return t&&i&&t.code===i.code}),e.map(e=>{let t,i;if(t=null!==e.type.abbreviation?`${e.type.abbreviation} (${e.name})`:null!==e.abbreviation?`${e.abbreviation} (${e.name})`:e.name,"nation"===e.location.type)i="National";else{const t=e.location[e.location.type];i=t?"departement"===e.location.type?`${t.name} (${t.code})`:t.name:""}return{id:e.id,organization:t,location:i,role:`<span class="role">${e.role}</span>`,contacts:e.users.length>0?`<span class="link">${e.users.length} contact${e.users.length>1?"s":""}</span>`:"",raw:{id:e.id,name:t,location:e.location,locationName:i,role:e.role,users:e.users}}})},filteredOrganizations(){if(null===this.search)return this.parsedOrganizations;let e;switch(this.search.data.type.id){case"user":e=({id:e})=>e===this.search.data.organization;break;case"location":e=({raw:{location:e}})=>e[this.search.data.location_type]&&e[this.search.data.location_type].code===this.search.data.id;break;case"organization":e=({id:e})=>e===this.search.data.id;break;default:e=()=>!1}return this.parsedOrganizations.filter(e)},focusedOrganization(){if(!this.$route.params.id)return null;const e=this.parsedOrganizations.find(({id:e})=>e===parseInt(this.$route.params.id,10));return void 0===e?null:e.raw},pageContent(){return this.filteredOrganizations.slice(this.pageBeginning-1,this.pageEnd)},usersTotal(){return this.filteredOrganizations.reduce((e,t)=>e+t.raw.users.length,0)}},watch:{focusedOrganization(){null!==this.focusedOrganization&&rP(this.focusedOrganization.id)}},methods:{loader:pr,onLoaded({organizations:e}){this.organizations=e},setLevel(e){this.level!==e&&(this.level=e)},focus({raw:e}){this.$router.push("/annuaire/"+e.id)},resetFocusedOrganization(){this.$router.push("/annuaire")}}},cP=lP,uP=cP,dP=(i("e744"),Object(u["a"])(uP,US,HS,!1,null,null,null)),pP=dP.exports,mP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"loading"===e.state?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"error"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"section section-white"},[null!==e.toBeDeleted?i("CommentDeletion",{attrs:{comment:e.toBeDeleted},on:{close:e.closePopin,deleted:e.onCommentDeleted}}):e._e(),i("div",{staticClass:"container"},[i("header",[e._m(1),i("SlideNote",{staticClass:"userActivity-rule",attrs:{title:"Règles de modération d'un commentaire"}},[i("template",{slot:"content"},[i("h1",[e._v("En tant qu'administrateur, vous êtes en charge de la modération des commentaires.")]),i("p",[e._v("Vous pouvez supprimer un commentaire ou demander à son auteur de le modifier s'il ne respecte pas les règles suivantes : "),i("ul",[i("li",[e._v("être neutre et factuel ;")]),i("li",[e._v("ne pas collecter des données personnelles (nom, condamnation judiciaire...) de personnes ou groupes, porter une attention particulière aux personnes habitant ou issues d'un bidonville ;")]),i("li",[e._v("ne doit pas être subjectif, insultant ou inapproprié.")])])]),i("p",[e._v("Pour plus d'informations :"),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/typologie-des-acces"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Guide des accès et de l'administrateur")],1),i("br"),i("router-link",{staticClass:"link",attrs:{to:"/charte-d-engagement"}},[i("font-awesome-icon",{attrs:{icon:"file-pdf"}}),e._v(" Charte d'engagement de l'utilisateur")],1)],1)])],2),i("div",{staticClass:"switch"},[i("button",{class:{active:"all"===e.filter},on:{click:function(t){return e.show("all")}}},[e._v("Tout")]),i("button",{class:{active:"shantytown"===e.filter},on:{click:function(t){return e.show("shantytown")}}},[e._v("Modifications")]),i("button",{class:{active:"comment"===e.filter},on:{click:function(t){return e.show("comment")}}},[e._v("Commentaires")])])],1),i("Table",{staticClass:"userActivity",attrs:{columns:e.columns,content:e.parsedActivities,emptyLabel:"Aucune activité trouvée pour les filtres sélectionnés"},on:{click:e.onRowClick},scopedSlots:e._u([{key:"date",fn:function(t){return[i("strong",[e._v(e._s(t.row.date))]),i("br"),e._v("à "+e._s(t.row.time))]}},{key:"author",fn:function(t){return[i("font-awesome-icon",{staticClass:"link",attrs:{icon:"user"}}),e._v(" "),i("router-link",{staticClass:"link",attrs:{"data-group":"link",to:"/annuaire/"+t.row.author.organization}},[e._v(e._s(t.row.author.name))])]}},{key:"activity",fn:function(t){return[i("span",{staticClass:"userActivity-action"},[i("font-awesome-icon",{attrs:{icon:t.row.icon}}),e._v(" "+e._s(t.row.action)+" site : "+e._s(t.row.address)+" ")],1),void 0!==t.row.content?i("div",{staticClass:"userActivity-content",domProps:{innerHTML:e._s(t.row.content)}}):e._e(),void 0!==t.row.comment?i("div",{staticClass:"userActivity-remove"},[i("span",{staticClass:"link",on:{click:function(i){return e.confirmCommentDeletion(t.row,i)}}},[i("font-awesome-icon",{attrs:{icon:"trash-alt"}}),e._v(" Supprimer")],1)]):e._e(),e._l(t.row.diff,(function(a){return t.row.diff?i("p",{staticClass:"changelog"},[i("span",{staticClass:"changelog-name"},[e._v(e._s(a.field)+" :")]),i("br"),i("span",{staticClass:"changelog-oldValue",class:{"changelog-value--unknown":!a.oldValue}},[e._v(e._s(a.oldValue||"non renseigné"))]),e._v(", "),i("span",{staticClass:"changelog-newValue",class:{"changelog-value--unknown":!a.newValue}},[e._v(e._s(a.newValue||"non renseigné"))])]):e._e()}))]}}],null,!1,2101574153)})],1)],1):e._e()],1)])},hP=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("hgroup",[i("h3",[e._v("Historique des activités")])])])}];function vP(e={}){let t="";return Object.keys(e).length>0&&(t="filters=",t+=Object.keys(e).map(t=>`${t}:${encodeURIComponent(e[t])}`).join(",")),Oo("/user-activities?"+t)}var fP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popin popin--commentDeletion"},[i("div",{ref:"wrapper",staticClass:"popin-wrapper"},[i("div",["pending"!==e.status?i("p",{staticClass:"popin-close"},[i("span",{staticClass:"link",on:{click:e.close}},[i("font-awesome-icon",{attrs:{icon:"times",size:"2x"}})],1)]):e._e(),i("div",{staticClass:"popin-header"},[i("span",{staticClass:"popin-icon"},[i("font-awesome-icon",{attrs:{icon:"trash-alt",size:"lg"}})],1),i("h1",{staticClass:"popin-title"},[e._v("Confirmez-vous la suppression du commentaire ?")])]),i("div",{staticClass:"popin-body"},[i("div",{staticClass:"comment"},[i("header",{staticClass:"comment-header"},[e._v(e._s(e.date)+" à "+e._s(e.time))]),i("ul",[i("li",{staticClass:"comment-author"},[i("span",[i("font-awesome-icon",{attrs:{icon:"user"}})],1),e._v(" "+e._s(e.comment.author.name))]),i("li",{staticClass:"comment-comment"},[i("span",[i("font-awesome-icon",{attrs:{icon:"comment"}})],1),e._v(" Commentaire")]),i("li",{staticClass:"comment-shantytown"},[i("span",[i("font-awesome-icon",{attrs:{icon:"map-pin"}})],1),e._v(" Site : "+e._s(e.address))])]),i("div",{staticClass:"comment-content",domProps:{innerHTML:e._s(e.comment.content)}})]),i("h1",{staticClass:"popin-h1"},[e._v("Pourquoi souhaitez-vous supprimer ce commentaire ?")]),null!==e.error?i("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"Précisez la raison de la suppression à l'auteur, un mail lui sera envoyé"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),i("div",{staticClass:"commentDeletionButtons"},["pending"!==e.status?i("button",{staticClass:"button secondary",on:{click:e.close}},[e._v("Annuler")]):e._e(),i("button",{staticClass:"button primary",attrs:{disabled:"pending"===e.status},on:{click:e.deleteComment}},["pending"!==e.status?i("span",[e._v("Oui, confirmer")]):i("span",[i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}})])])])])])])])},gP=[],bP={props:{comment:{type:Object,required:!0}},data(){return{status:null,error:null,message:""}},computed:{date(){return App.formatDate(this.comment.date,"d/m/y")},time(){return App.formatDate(this.comment.date,"h:i")},address(){return`${this.comment.shantytown.usename}, ${this.comment.shantytown.city}`}},mounted(){setTimeout(()=>{document.addEventListener("click",this.checkOutsideClick)},500)},destroyed(){document.removeEventListener("click",this.checkOutsideClick)},methods:{checkOutsideClick(e){this.$refs.wrapper.contains(e.target)||this.close()},close(){"pending"!==this.status&&this.$emit("close")},deleteComment(){"pending"!==this.status&&(this.status="pending",this.error=null,_l(this.comment.shantytown.id,this.comment.id,this.message).then(()=>{this.status=null,this.message="",this.$emit("deleted")}).catch(({user_message:e})=>{this.status=null,this.error=e}))}}},_P=bP,yP=_P,wP=(i("6501"),Object(u["a"])(yP,fP,gP,!1,null,"38509d0a",null)),CP=wP.exports,kP={components:{NavBar:yr,Table:ql,CommentDeletion:CP,SlideNote:Gc},data(){return{activities:[],error:null,state:null,toBeDeleted:null,filter:"all"}},computed:{columns(){return[{id:"date",label:"Date"},{id:"author",label:"Auteur"},{id:"activity",label:"Activités",..."shantytown"===this.filter?{filters:[{label:"Déclaration",value:"creation"},{label:"Modification",value:"update"},{label:"Fermeture",value:"closing"}],filterFn:(e,t)=>-1!==t.map(({value:e})=>e).indexOf(e.rawAction)}:{}}]},filteredActivities(){return"all"===this.filter?this.activities:this.activities.filter(({entity:e})=>e===this.filter)},parsedActivities(){return this.filteredActivities.map((e,t)=>{const i={index:t,rawAction:e.action,rawDate:e.date,rawShantytown:e.shantytown,date:App.formatDate(e.date,"d/m/y"),time:App.formatDate(e.date,"h:i"),author:e.author,icon:"comment"===e.entity?"comment":"pencil-alt",shantytown:e.shantytown.id,address:`${e.shantytown.usename}, ${e.shantytown.city}`},a={creation:"Déclaration du",update:"Modification du",closing:"Fermeture du"};return"comment"===e.entity?(i.action="Commentaire sur le",i.content=e.content,i.comment=e.comment_id):(i.action=a[e.action],i.diff=e.diff),i})}},created(){this.load()},methods:{load(){-1!==[null,"error"].indexOf(this.state)&&(this.state="loading",this.error=null,vP().then(e=>{this.activities=e,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))},retryLoading(){this.load()},formatDate(...e){return window.App.formatDate.apply(window,e)},onRowClick(e){this.$router.push("/site/"+e.shantytown)},confirmCommentDeletion(e,t){return this.toBeDeleted={index:e.index,id:e.comment,shantytown:e.rawShantytown,author:e.author,date:e.rawDate,content:e.content},t.stopPropagation(),!1},closePopin(){this.toBeDeleted=null},onCommentDeleted(){this.activities.splice(this.toBeDeleted.index,1),this.toBeDeleted=null,Qc({group:"notifications",type:"success",title:"Commentaire supprimé",text:"L'auteur du commentaire en a été notifié par email"})},show(e){this.filter=e}}},xP=kP,SP=xP,PP=(i("3a02"),Object(u["a"])(SP,mP,hP,!1,null,null,null)),$P=PP.exports,TP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PublicLayout",{attrs:{stickyHeader:!1}},[i("PublicContainer",{staticClass:"py-16"},[i("div",[i("h1",{staticClass:"text-display-xl"},[e._v("Statistiques")]),i("div",[e._v(" Depuis l'ouverture nationale de la plateforme en juin 2019 ")])]),i("StatsSection",{staticClass:"mt-16",attrs:{title:"Utilisateurs"}},[i("StatsBlock",{attrs:{title:e.numberOfDepartements,icon:"flag",subtitle:"départements de France métropolitaine",info:"Soit tous les départements concernés par le phénomène de squats ou bidonvilles."}}),i("StatsBlock",{attrs:{title:e.numberOfCollaboratorAndAssociationUsers,icon:"users",subtitle:"utilisateurs institutionnels et associatifs",info:e.numberOfPublicEstablishments+" services de l'État, "+e.numberOfTerritorialCollectivities+" collectivités territoriales, "+e.numberOfAssociations+" associations"}}),i("StatsBlock",{attrs:{title:e.numberOfNewUsers.total,icon:"user-plus",subtitle:"nouveaux utilisateurs en "+e.numberOfNewUsers.month.toLowerCase()}})],1),null!==e.numberOfNewUsersPerMonth?i("div",[i("h2",{staticClass:"text-display-lg text-secondary mt-16"},[e._v(" Nombre d' utilisateurs depuis "+e._s(e.numberOfNewUsersPerMonth[0].month.toLowerCase())+" ")]),i("TrendChart",{staticClass:"stats-chart",attrs:{datasets:e.usersEvolutionDatasets,labels:e.usersEvolutionLabels,grid:{verticalLines:!0,horizontalLines:!0},max:e.usersEvolutionMax,min:0}})],1):e._e(),i("StatsSection",{staticClass:"mt-16",attrs:{title:"Usage"}},[i("StatsBlock",{attrs:{title:e.numberOfExports,icon:"file-download",subtitle:"extractions de données réalisées",info:"Les exports Excel permettent aux acteurs locaux d'utiliser et d'analyser les données afin de suivre, communiquer et optimiser les actions de résorption depuis le 15/11/2019."}}),i("StatsBlock",{attrs:{title:e.numberOfComments,icon:"comment",subtitle:"commentaires créés",info:"Au delà du suivi des chiffrés, les commentaires permettent de suivre et de partager des informations qualitative utiles dans une action multi-partenariale."}}),i("StatsBlock",{attrs:{title:e.numberOfDirectoryViews,icon:"address-book",subtitle:"fiches contact consultées",info:"L'annuaire permet d'accéder aux coordonnées de tous les utilisateurs de la plateforme. Son utilisation participe à la mise en réseau partenaires locaux ou des pairs depuis le 15/11/2019"}})],1),i("StatsSection",{staticClass:"mt-16",attrs:{title:"Fréquence de mise à jour"},scopedSlots:e._u([{key:"info",fn:function(){return[i("span",{staticClass:"text-secondary"},[i("font-awesome-icon",{attrs:{icon:"sync"}})],1),e._v(" La mise à jour régulière des données garantissent des informations justes à tous les acteurs.")]},proxy:!0},{key:"default",fn:function(){return[i("StatsBlock",{attrs:{title:e.meanTimeBeforeCreationDeclaration,subtitle:"jours entre l'installation d'un bidonville ou squat et sa déclaration",info:"En moyenne, depuis le 01/09/2019."}}),i("StatsBlock",{attrs:{title:e.meanTimeBeforeClosingDeclaration,subtitle:"jours entre la fermeture du site et sa déclaration",info:"En moyenne, depuis le 01/09/2019."}}),i("StatsBlock",{attrs:{title:e.numberOfShantytownOperations,subtitle:"bidonvilles ou squats mis à jour",info:"Toutes opérations confondues : création, modification, fermeture"}})]},proxy:!0}])})],1)],1)},IP=[],OP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"text-display-lg"},[e._v(" "+e._s(e.title)+" "),i("span",{staticClass:"text-secondary"},[e.icon?i("font-awesome-icon",{attrs:{icon:e.icon}}):e._e()],1)]),i("div",{staticClass:"text-display-sm"},[e._v(e._s(e.subtitle))]),i("div",{staticClass:"text-sm"},[e._v(e._s(e.info))])])},AP=[],EP={props:{title:{type:[String,Number],required:!0},subtitle:{type:String,required:!0},info:{type:String,required:!1},icon:{type:String,required:!1}}},NP=EP,qP=Object(u["a"])(NP,OP,AP,!1,null,null,null),DP=qP.exports,jP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",{staticClass:"text-display-lg text-secondary"},[e._v(e._s(e.title))]),e._t("info"),i("div",{staticClass:"grid grid-cols-1 md:grid-cols-3 gap-16 mt-8"},[e._t("default")],2)],2)},MP=[],LP={props:{title:{required:!0,type:String}}},FP=LP,zP=Object(u["a"])(FP,jP,MP,!1,null,null,null),RP=zP.exports,BP={components:{PublicLayout:Os,PublicContainer:es,StatsSection:RP,StatsBlock:DP},data(){return{state:null,error:null,stats:null}},created(){this.load()},computed:{numberOfDepartements(){return this.stats?this.stats.numberOfDepartements:"..."},numberOfCollaboratorAndAssociationUsers(){return this.stats?this.stats.numberOfCollaboratorAndAssociationUsers:"..."},numberOfTerritorialCollectivities(){return this.stats?this.stats.numberOfCollaboratorAndAssociationOrganizations.territorial_collectivity||0:"..."},numberOfAssociations(){return this.stats?this.stats.numberOfCollaboratorAndAssociationOrganizations.association||0:"..."},numberOfPublicEstablishments(){return this.stats?this.stats.numberOfCollaboratorAndAssociationOrganizations.public_establishment||0:"..."},numberOfExports(){return this.stats?this.stats.numberOfExports:"..."},numberOfComments(){return this.stats?this.stats.numberOfComments:"..."},numberOfDirectoryViews(){return this.stats?this.stats.numberOfDirectoryViews:"..."},numberOfNewUsersPerMonth(){return this.stats&&this.stats.numberOfNewUsersPerMonth||null},usersEvolutionDatasets(){if(null===this.numberOfNewUsersPerMonth)return[];const e=this.numberOfNewUsersPerMonth.reduce((e,{total:t},i)=>0===i?[parseInt(t,10)]:[...e,parseInt(t,10)+e[e.length-1]],[]);return[{data:e,smooth:!0,fill:!0}]},usersEvolutionMax(){if(null===this.numberOfNewUsersPerMonth)return 0;const e=this.numberOfNewUsersPerMonth.reduce((e,{total:t})=>Math.max(e,t),0);return 10*Math.ceil(e/10)},usersEvolutionLabels(){return null===this.numberOfNewUsersPerMonth?{xLabels:[],yLabels:10}:{xLabels:this.numberOfNewUsersPerMonth.map(({month:e})=>e),yLabels:this.usersEvolutionMax/10+1,yLabelsTextFormatter:e=>e.toFixed(1)}},numberOfNewUsers(){return this.stats&&this.stats.numberOfNewUsersPerMonth?this.stats.numberOfNewUsersPerMonth.slice(-1)[0]:{total:"...",month:"..."}},meanTimeBeforeCreationDeclaration(){return this.stats?Math.round(this.stats.meanTimeBeforeCreationDeclaration.average)||"?":"..."},meanTimeBeforeClosingDeclaration(){return this.stats?Math.round(this.stats.meanTimeBeforeClosingDeclaration.average)||"?":"..."},numberOfShantytownOperations(){return this.stats?this.stats.numberOfShantytownOperations:"..."}},methods:{load(){"loading"!==this.state&&(this.state="loading",this.error=null,AS().then(({statistics:e})=>{this.stats=e,this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"}))}}},VP=BP,UP=Object(u["a"])(VP,TP,IP,!1,null,null,null),HP=UP.exports,GP=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),"loading"===e.state?i("section",{staticClass:"section section-white"},[e._m(0)]):e._e(),"error"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("div",{staticClass:"notification error full-width"},[i("span",[e._v(e._s(e.error)+". "),i("a",{attrs:{href:"#"},on:{click:e.retryLoading}},[e._v("Réessayer ?")])])])])]):e._e(),"loaded"===e.state?i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[i("header",[i("div",[e._m(1),i("p",[e._v("L'ensemble des commentaires sur votre territoire (département ou région)")]),e.canSubmitHighComment?i("SlideNote",{attrs:{title:"Écrire un commentaire 'Territoire'",opened:!0,icon:"comment"}},[i("template",{slot:"content"},[i("p",[e._v('Les commentaires "territoires" permettent de partager des informations sur le pilotage, la coordination et l\'organisation retenus au niveau local.')]),i("p",[i("span",[i("strong",[e._v("Territoire(s) concerné(s) par votre commentaire :")])]),i("br"),i("ul",{staticClass:"input--checkbox"},e._l(e.allowedDepartements,(function(t,a){return i("li",{staticClass:"input--checkbox-option"},[i("label",{attrs:{for:"input"+e._uid+"-"+a}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.highCovidComment.data.departements,expression:"highCovidComment.data.departements"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"input"+e._uid+"-"+a,name:"input"+e._uid,disabled:e.highCovidComment.pending||e.allowedDepartements.length<=1},domProps:{value:t.code,checked:Array.isArray(e.highCovidComment.data.departements)?e._i(e.highCovidComment.data.departements,t.code)>-1:e.highCovidComment.data.departements},on:{change:function(i){var a=e.highCovidComment.data.departements,s=i.target,n=!!s.checked;if(Array.isArray(a)){var o=t.code,r=e._i(a,o);s.checked?r<0&&e.$set(e.highCovidComment.data,"departements",a.concat([o])):r>-1&&e.$set(e.highCovidComment.data,"departements",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.highCovidComment.data,"departements",n)}}}),e._v(" "+e._s(t.code+" - "+t.name)+" ")])])})),0)]),i("p",[i("span",[i("strong",[e._v("Votre commentaire :")])]),i("br"),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.highCovidComment.data.description,expression:"highCovidComment.data.description"}],staticClass:"input input--textarea",attrs:{disabled:e.highCovidComment.pending,readonly:e.highCovidComment.pending},domProps:{value:e.highCovidComment.data.description},on:{input:function(t){t.target.composing||e.$set(e.highCovidComment.data,"description",t.target.value)}}})]),null!==e.highCovidComment.error?i("p",{staticClass:"error"},[i("span",{staticClass:"error"},[e._v(e._s(e.highCovidComment.error.message))])]):e._e(),i("p",[i("button",{staticClass:"form-stepButton button",attrs:{disabled:e.highCovidComment.pending},on:{click:e.submitHighCovidComment}},[e.highCovidComment.pending?i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}}):i("span",[e._v("Envoyer")])])])])],2):e._e()],1),i("div",{staticClass:"switch"},[i("button",{class:{active:"all"===e.filter},on:{click:function(t){return e.setFilter("all")}}},[e._v("Tous")]),i("button",{class:{active:"regular"===e.filter},on:{click:function(t){return e.setFilter("regular")}}},[e._v('Commentaires "Sites"')]),i("button",{class:{active:"high"===e.filter},on:{click:function(t){return e.setFilter("high")}}},[e._v('Commentaires "Territoire"')])])]),i("Table",{staticClass:"userActivity",attrs:{columns:e.columns,content:e.parsedActivities,emptyLabel:"Aucune activité trouvée pour les filtres sélectionnés"},on:{click:e.onRowClick},scopedSlots:e._u([{key:"date",fn:function(t){return[i("strong",[e._v(e._s(t.row.date))]),i("br"),e._v("à "+e._s(t.row.time))]}},{key:"author",fn:function(t){return[i("font-awesome-icon",{staticClass:"link",attrs:{icon:"user"}}),e._v(" "),i("router-link",{staticClass:"link",attrs:{"data-group":"link",to:"/annuaire/"+t.row.author.organization}},[e._v(e._s(t.row.author.name))])]}},{key:"activity",fn:function(t){return[t.row.covid?i("span",{staticClass:"userActivity-action"},[i("font-awesome-icon",{attrs:{icon:t.row.icon}}),e._v(" "+e._s(t.row.action)+" site : "+e._s(t.row.address)+" ")],1):i("span",{staticClass:"userActivity-action"},[i("font-awesome-icon",{attrs:{icon:t.row.icon}}),e._v(" Commentaire sur le territoire : "+e._s(t.row.highCovid.departements.map((function(e){var t=e.code;return t})).join(", "))+" ")],1),i("div",{staticClass:"userActivity-content"},[t.row.covid?i("p",e._l(e.covidTags,(function(a){return!0===t.row.covid[a.prop]?i("span",{class:"rbTag rbTag--"+a.type},[e._v(e._s(a.label))]):e._e()})),0):e._e(),t.row.covid?i("p",[e._v("Date de l'intervention : "+e._s(e.formatDate(t.row.covid.date)))]):e._e(),i("p",{domProps:{innerHTML:e._s(t.row.content)}})])]}}],null,!1,240379794)})],1)]):e._e()],1)])},WP=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"notification full-width"},[i("img",{staticClass:"spinner",attrs:{src:"/img/spinner_dark.svg",width:"20"}}),i("span",[e._v("Chargement des données en cours...")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("hgroup",[i("h3",[e._v("Covid-19")])])}];function QP(e){return Ao("/high-covid-comments",e)}var JP={components:{NavBar:yr,Table:ql,SlideNote:Gc},data(){const{user:e}=zo();return{user:e,filter:"all",activities:[],allowedDepartements:[],highCovidComment:{pending:!1,error:null,data:{description:"",departements:[]}},error:null,state:null,covidTags:[{prop:"equipe_maraude",label:"Équipe de maraude",type:"warning"},{prop:"equipe_sanitaire",label:"Équipe sanitaire",type:"warning"},{prop:"equipe_accompagnement",label:"Équipe d'accompagnement",type:"warning"},{prop:"distribution_alimentaire",label:"Distribution d'aide alimentaire",type:"warning"},{prop:"personnes_orientees",label:"Personne(s) orientée(s) vers un centre d'hébergement spécialisé (desserrement)",type:"error"},{prop:"personnes_avec_symptomes",label:"Personne(s) avec des symptômes Covid-19",type:"error"},{prop:"besoin_action",label:"Besoin d'une action prioritaire",type:"error"}]}},computed:{columns(){return[{id:"date",label:"Date"},{id:"author",label:"Auteur"},{id:"activity",label:"Activités"}]},filteredActivities(){return"all"===this.filter?this.activities:this.activities.filter(e=>"regular"===this.filter?null!==e.covid:null!==e.highCovid)},parsedActivities(){return this.filteredActivities.map((e,t)=>({index:t,rawAction:e.action,rawDate:e.date,rawShantytown:e.shantytown,date:App.formatDate(e.date,"d/m/y"),time:App.formatDate(e.date,"h:i"),author:e.author,icon:"comment"===e.entity?"comment":"pencil-alt",shantytown:e.shantytown.id,address:`${e.shantytown.usename}, ${e.shantytown.city}`,action:"Commentaire sur le",content:e.content,comment:e.comment_id,covid:e.covid,highCovid:e.highCovid}))},canSubmitHighComment(){return"nation"!==this.user.organization.location.type&&"nation"!==Bo("covid_comment.list").geographic_level}},created(){this.load()},methods:{load(){if(-1===[null,"error"].indexOf(this.state))return;let e;switch(this.state="loading",this.error=null,this.user.organization.location.type){default:case"nation":e=Promise.resolve({departements:[]});break;case"region":e=tS(this.user.organization.location.region.code);break;case"epci":e=iS(this.user.organization.location.epci.code);break;case"departement":case"city":e=Promise.resolve({departements:[this.user.organization.location.departement]})}Promise.all([vP({covid:"1"}),e]).then(([e,{departements:t}])=>{this.activities=e,this.allowedDepartements=t,this.highCovidComment.data.departements=t.map(({code:e})=>e),this.state="loaded"}).catch(({user_message:e})=>{this.error=e,this.state="error"})},retryLoading(){this.load()},formatDate(...e){return window.App.formatDate.apply(window,e)},onRowClick(e){e.shantytown&&this.$router.push("/site/"+e.shantytown)},setFilter(e){this.filter=e},submitHighCovidComment(){this.highCovidComment.pending||(this.highCovidComment.pending=!0,this.highCovidComment.error=null,QP(this.highCovidComment.data).then(()=>{this.highCovidComment.pending=!1,this.state=null,this.load()}).catch(({user_message:e,fields:t})=>{this.highCovidComment.pending=!1,this.highCovidComment.error={message:e,fields:t}}))}}},YP=JP,ZP=YP,KP=(i("a897"),Object(u["a"])(ZP,GP,WP,!1,null,null,null)),XP=KP.exports,e$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("PrivateLayout",[i("PrivateContainer",[i("Modal",{attrs:{isOpen:!0,allowClose:!1},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"pt-10 px-10 pb-4"},[i("div",{staticClass:"border-b border-G400 pb-2"},[i("div",{staticClass:"text-display-md text-primary"},[e._v(" Des nouveautés sont disponibles sur la plateforme ")]),i("div",{staticClass:"text-secondary"},[e._v(" "+e._s(e.changelog.date)+" ")])])])]},proxy:!0},{key:"body",fn:function(){return[i("div",{staticClass:"flex justify-between"},[i("div",{staticClass:"w-128 mr-8"},[i("img",{attrs:{src:e.currentItem.image,alt:e.currentItem.title}}),i("div",{staticClass:"text-center"},e._l(e.changelog.items,(function(t,a){return i("span",{key:a,staticClass:"inline-block bg-gray-500 w-2 h-2 mx-1 rounded",class:{"bg-primary":a===e.currentItemIndex}})})),0)]),i("div",{staticClass:"w-128 pt-2"},[i("header",{staticClass:"text-gray-500 bold"},[i("p",[i("span",{staticClass:"text-primary"},[e._v(e._s(e.currentItemIndex+1))]),e._v(" / "+e._s(e.changelog.items.length)+" ")]),i("h1",{staticClass:"text-primary bold"},[e._v(" "+e._s(e.currentItem.title)+" ")])]),i("div",{staticClass:"description",domProps:{innerHTML:e._s(e.currentItem.description)}})])]),null!==e.error?i("div",{staticClass:"bg-red300 text-error bold p-3 mt-4"},[e._v(" "+e._s(e.error)+" ")]):e._e(),i("div",{staticClass:"flex justify-between mt-8"},[i("div",[e.currentItemIndex>0?i("Button",{attrs:{variant:"primary",disabled:e.pending},on:{click:e.previousItem}},[e._v("Précédent")]):e._e()],1),i("div",[e.currentItemIndex<e.changelog.items.length-1?i("Button",{attrs:{variant:"primary"},on:{click:e.nextItem}},[e._v("Suivant")]):i("Button",{attrs:{variant:"primary",loading:e.pending},on:{click:e.markChangelogAsRead}},[e._v("Accéder à la plateforme")])],1)])]},proxy:!0}])})],1)],1)},t$=[],i$={data(){const{changelog:e}=zo();return{pending:!1,error:null,changelog:e,currentItemIndex:0}},computed:{currentItem(){return this.changelog.items[this.currentItemIndex]}},components:{PrivateLayout:kp,PrivateContainer:gp},methods:{previousItem(){0!==this.currentItemIndex&&(this.currentItemIndex-=1)},nextItem(){this.currentItemIndex!==this.changelog.items.length-1&&(this.currentItemIndex+=1)},markChangelogAsRead(){!0!==this.pending&&(this.pending=!0,this.error=null,Uo(this.changelog.app_version).then(()=>{Lo().then(()=>{this.pending=!1,this.$router.push("/")}).catch(e=>{this.pending=!1,this.error=e&&e.user_message||"Une erreur inconnue est survenue"})}).catch(e=>{this.pending=!1,this.error=e&&e.user_message||"Une erreur inconnue est survenue"}))}}},a$=i$,s$=(i("f867"),Object(u["a"])(a$,e$,t$,!1,null,null,null)),n$=s$.exports,o$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v1"},[i("div",{staticClass:"page--withMargin"},[i("NavBar"),i("section",{staticClass:"section section-white"},[i("div",{staticClass:"container"},[e._m(0),i("p",[i("strong",[e._v("Avant d'accéder à la plateforme, merci de lire et de valider la "),i("a",{attrs:{href:e.charte.fichier}},[e._v("charte d'engagement")])]),e._v(". Le respect des règles de confidentialité des informations est primordial vis à vis des habitants et de l'action publique.")]),e._m(1),e._m(2),i("p",[e._v("Le non respect de ces règles peut entraîner des avertissements ou la suppression de votre accès à la plateforme numérique.")]),i("p",[i("label",{attrs:{for:"charte"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"input input--checkbox",attrs:{type:"checkbox",id:"charte",value:"1",disabled:"pending"===e.form.status},domProps:{checked:Array.isArray(e.data)?e._i(e.data,"1")>-1:e.data},on:{change:function(t){var i=e.data,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n="1",o=e._i(i,n);a.checked?o<0&&(e.data=i.concat([n])):o>-1&&(e.data=i.slice(0,o).concat(i.slice(o+1)))}else e.data=s}}}),e._v(" Je m’engage à respecter les règles et obligations de la "),i("a",{attrs:{href:e.charte.fichier}},[e._v("charte d’engagement")]),e._v(" auprès des services de l’État, dans le cadre de l’accès à la plateforme Résorption bidonvilles. ")])]),"error"===e.form.status?i("p",{staticClass:"error"},[i("span",{staticClass:"error"},[e._v("Une erreur est survenue :")]),i("br"),i("span",{staticClass:"error"},[e._v(e._s(e.form.error))])]):e._e(),i("p",[i("button",{staticClass:"button",attrs:{disabled:"pending"===e.form.status||!0!==e.data},on:{click:e.submit}},["pending"!==e.form.status?i("span",[e._v("Accéder à la plateforme")]):i("img",{attrs:{src:"/img/spinner_light.svg",width:"20"}})])])])])],1)])},r$=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",[i("h1",[e._v("Signature de la charte d'engagement")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("strong",[e._v("Selon la charte d'engagement, l'utilisateur s'engage à :")]),i("ul",[i("li",[e._v("utiliser des paramètres de connexion (identifiants et mots de passe) personnels et confidentiels.")]),i("li",[e._v("exploiter les informations présentes sur la plateforme exclusivement à des fins professionnelles, pour les besoins propres et internes de son organisation.")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("strong",[e._v("Ainsi, l'utilisateur s'interdit de :")]),i("ul",[i("li",[e._v("transmettre les identifiants et mots de passe à un tiers.")]),i("li",[e._v("communiquer les informations présentes sur la plateforme sous aucune forme (orale, écrite, copie) à un tiers.")])])])}],l$={components:{NavBar:yr},data(){const{user:{id:e},version_charte_engagement:t}=zo();return{user:e,charte:t,data:!1,form:{status:null,error:null}}},methods:{submit(){"pending"!==this.form.status&&(this.form.status="pending",this.form.error=null,hr(this.user,this.charte.version).then(()=>{Ro("user.charte_engagement_a_jour",!0),this.$router.push("/")}).catch(({user_message:e})=>{this.form.status="error",this.form.error=e}))}}},c$=l$,u$=c$,d$=(i("e451"),Object(u["a"])(u$,o$,r$,!1,null,"62aa3c67",null)),p$=d$.exports;let m$=null;function h$(e,t,i,a){for(let s=0;s<e.length;s+=1){const{checker:n,target:o,saveEntryPoint:r}=e[s];if(!0!==n(t,i))return!1!==r&&(m$=t),void a(o)}a()}function v$(e){const{permissions:t}=e.meta;return!t||t.every(e=>Vo(e))}function f$(){const{user:{position:e}}=zo();return""!==e}function g$(){const{changelog:e}=zo();return null===e}const b$={anonymous:h$.bind(void 0,[{checker:()=>!Jo(),target:"/",saveEntryPoint:!1}]),loggedIn:h$.bind(void 0,[{checker:Jo,target:"/connexion"}]),loaded:h$.bind(void 0,[{checker:Jo,target:"/connexion"},{checker:Mo,target:"/launcher"},{checker:v$,target:"/",saveEntrypoint:!1}]),loadedAndUpgraded:h$.bind(void 0,[{checker:Jo,target:"/connexion"},{checker:Mo,target:"/launcher"},{checker:v$,target:"/",saveEntrypoint:!1},{checker:Ho,target:"/signature-charte-engagement"},{checker:f$,target:"/mise-a-niveau"}]),loadedAndUpToDate:h$.bind(void 0,[{checker:Jo,target:"/connexion"},{checker:Mo,target:"/launcher"},{checker:v$,target:"/",saveEntrypoint:!1},{checker:Ho,target:"/signature-charte-engagement"},{checker:f$,target:"/mise-a-niveau"},{checker:g$,target:"/nouvelle-version"}])};function _$(){return!0!==Jo()?Yo()?"/connexion":"/landing":!0!==Mo()?"/launcher":"/cartographie"}const y$=new n["a"]({scrollBehavior:(e,t,i)=>e.hash?{selector:e.hash}:i||{x:0,y:0},routes:[{path:"/",redirect:_$,meta:{analyticsIgnore:!0}},{path:"/landing",component:bo,beforeEnter:b$.anonymous},{path:"/statistiques-publiques",component:HP,beforeEnter:b$.anonymous},{path:"/connexion",component:su,beforeEnter:b$.anonymous},{path:"/contact",component:Wu,beforeEnter:b$.anonymous},{path:"/launcher",component:up,beforeEnter:b$.loggedIn},{path:"/nouvelle-version",component:n$,beforeEnter:b$.loadedAndUpgraded},{path:"/deconnexion",beforeEnter:(e,t,i)=>{Qo(a["default"].prototype.$piwik),i("/")},meta:{analyticsIgnore:!0}},{meta:{group:"townList"},path:"/cartographie",component:ap,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"townList"},path:"/liste-des-sites",component:Jm,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"townList"},path:"/liste-des-sites",component:Jm,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"townCreation",permissions:["shantytown.create"]},path:"/nouveau-site",component:hw,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"townList"},path:"/site/:id",component:bk,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"townList"},path:"/site/:id/mise-a-jour",component:yw,beforeEnter:b$.loadedAndUpToDate},{path:"/feedback",beforeEnter(e,t,i){window.location.href="mailto:contact@resorption-bidonvilles.beta.gouv.fr",i(!1)}},{path:"/conditions-d-utilisation",beforeEnter(e,t,i){window.open("/doc/CGU_Resorption_Bidonvilles.pdf"),i(!1)}},{path:"/typologie-des-acces",beforeEnter(e,t,i){window.open("/doc/guide_de_l_administrateur.pdf"),i(!1)}},{path:"/charte-d-engagement",beforeEnter(e,t,i){const{version_charte_engagement:{fichier:a}}=zo();window.open(a,"_blank"),i(!1)}},{path:"/mentions-legales",component:VS},{meta:{group:"account"},path:"/mon-compte",component:Sk,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"users",permissions:["user.list"]},path:"/liste-des-utilisateurs",component:zk,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"userCreation",permissions:["user.create"]},path:"/nouvel-utilisateur",component:Jk,beforeEnter:b$.loadedAndUpToDate},{path:"/signature-charte-engagement",component:p$,beforeEnter:h$.bind(void 0,[{checker:Jo,target:"/connexion"},{checker:Mo,target:"/launcher"},{checker:v$,target:"/",saveEntrypoint:!1},{checker(){return!Ho()},target:"/"}])},{meta:{group:"users",permissions:["user.activate"]},path:"/nouvel-utilisateur/:id",component:bx,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"users"},path:"/mise-a-niveau",component:Sx,beforeEnter:b$.loaded},{meta:{group:"users"},path:"/nouveau-mot-de-passe",component:Ex,beforeEnter:b$.anonymous},{meta:{group:"users"},path:"/renouveler-mot-de-passe/:token",component:Fx,beforeEnter:b$.anonymous},{meta:{group:"account"},path:"/activer-mon-compte/:token",component:ix,beforeEnter:b$.anonymous},{meta:{group:"plans",permissions:["plan.list"]},path:"/liste-des-dispositifs",component:Kx,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.create"]},path:"/nouveau-dispositif",component:rS,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.update"]},path:"/modifier-dispositif/:id",component:wS,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.read"]},path:"/dispositif/:id",component:hS,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"plans",permissions:["plan.updateMarks"]},path:"/dispositif/:id/indicateurs",component:TS,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"admin",permissions:["stats.read"]},path:"/statistiques",component:jS,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"admin",permissions:["shantytown_comment.moderate"]},path:"/historique-des-activites",component:$P,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"covid"},path:"/covid-19",component:XP,beforeEnter:b$.loadedAndUpToDate},{meta:{group:"directory"},path:"/annuaire/:id?",component:pP,beforeEnter:b$.loadedAndUpToDate}]});function w$(){if(null===m$)return"/";const e=m$;return m$=null,e}const C$=[{long:"Janvier",short:"jan."},{long:"Février",short:"fév."},{long:"Mars",short:"mars"},{long:"Avril",short:"avr."},{long:"Mai",short:"mai"},{long:"Juin",short:"juin"},{long:"Juillet",short:"juil."},{long:"Août",short:"août"},{long:"Septembre",short:"sep."},{long:"Octobre",short:"oct."},{long:"Novembre",short:"nov."},{long:"Décembre",short:"déc."}];window.App=Object.freeze({escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},dateDiff(e,t){const i=new Date(e),a=new Date(t);let s;if(s=12*(a.getFullYear()-i.getFullYear()),s-=i.getMonth()+1,s+=a.getMonth(),s=s<=0?0:s,0===s){const e=Math.abs(i.getTime()-a.getTime())/864e5;return`${e} jour${e>1?"s":""}`}if(s<12)return s+" mois";if(12===s)return"1 an";const n=Math.floor(s/12),o=s%12;let r=`${n} an${n>1?"s":""}`;return o>0&&(r+=` ${o} mois`),r},formatDate(e,t="d/m/y"){const i=new Date(1e3*e);return t.replace("d",("0"+i.getDate()).slice(-2)).replace("m",("0"+(i.getMonth()+1)).slice(-2)).replace("y",i.getFullYear()).replace("h",("0"+i.getHours()).slice(-2)).replace("i",("0"+i.getMinutes()).slice(-2)).replace("M",C$[i.getMonth()].long).replace("B",C$[i.getMonth()].short)}}),a["default"].component("font-awesome-icon",r["a"]),a["default"].use(o["a"]),a["default"].use(n["a"]),a["default"].use(s["a"]),a["default"].use(Oa,{host:"https://stats.data.gouv.fr",siteId:86,trackerFileName:"piwik",router:y$,enableLinkTracking:!0,requireConsent:!1,trackInitialView:!0,debug:!0}),Pa(a["default"]);const k$=new s["a"]({locale:"fr",messages:N});a["default"].createElement=e=>new a["default"](e),a["default"].createElement({el:"#app",router:y$,store:Um,i18n:k$,render:e=>e(m)})},"7c9e":function(e,t,i){},"7d21":function(e,t,i){},"7e15":function(e,t,i){},"7fa8":function(e,t,i){},8072:function(e,t,i){},"81a2":function(e,t,i){},8251:function(e,t,i){},8324:function(e,t,i){"use strict";var a=i("0514"),s=i.n(a);s.a},"83c6":function(e,t,i){"use strict";var a=i("42da"),s=i.n(a);s.a},8503:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-2.8711730a.jpg"},"85f4":function(e,t,i){},8683:function(e,t,i){},8950:function(e,t,i){"use strict";var a=i("6382"),s=i.n(a);s.a},8973:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-dessin.40bfb99e.png"},8974:function(e,t,i){"use strict";var a=i("e99b"),s=i.n(a);s.a},"8aa6":function(e,t,i){"use strict";var a=i("1a28"),s=i.n(a);s.a},"8b2f":function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-5.e5839f75.jpg"},9355:function(e,t,i){},"93aa":function(e,t,i){"use strict";var a=i("a67f"),s=i.n(a);s.a},"983b":function(e){e.exports=JSON.parse('{"title":"Neighbour, citizen, slum dweller... Any news? A question ? An alert?","contactUs":"Contact us","email":"Your email","firstname":"First name","lastname":"Last name","requestType":"You want to...","help":"receive support","report":"report","requestHelp":"request help","requestInfo":"request info","requestAccess":"request access","isActor":"Are you involved in slum resorption","actorExample":"For example: a State service, an association operator, a local authority, etc.","yes":"Yes","no":"No","whichEstablishment":"Which establishment?","public":"State service, public institution or public organisation","territorialCollectivity":"Territorial collectivity","association":"Association","administration":"Central administration","message":"Your message","legal":"I give my consent to the processing of my personal data.","send":"Send","cancel":"Cancel","error":"Your request contains errors:","share":"Share this page"}')},9934:function(e,t,i){e.exports=i.p+"img/people.9be8d82e.svg"},9985:function(e,t,i){"use strict";var a=i("b3ad"),s=i.n(a);s.a},"9aab":function(e,t,i){e.exports=i.p+"img/after.de372322.png"},"9b19":function(e,t,i){"use strict";var a=i("3c8d"),s=i.n(a);s.a},"9cc2":function(e,t,i){},"9cc9":function(e,t){e.exports={props:{title:{required:!0,type:String},showMandatoryStar:{required:!1,type:Boolean,default:!1}}}},"9cfe":function(e,t,i){},"9d64":function(e,t,i){e.exports=i.p+"img/RO.3c42c422.svg"},"9ddb":function(e){e.exports=JSON.parse('{"title":"Vecin, cetățean, rezident pe un platz... O informaţie? O întrebare? O alertă?","contactUs":"Contactaţi-ne","email":"E-mailul dumneavoastră","firstname":"Prenume","lastname":"Nume","requestType":"Doriţi","help":"Să ajutaţi","report":"Să semnalaţi","requestHelp":"Să cereţi ajutor","requestInfo":"Să cereţi informații","requestAccess":"Sa solicitați accesul la platformă","isActor":"Sunteţi actor în dizolvarea platzurilor ?","actorExample":"De exemplu: un serviciu de stat, un operator de asociaţie, o colectivitate locală..","yes":"Da","no":"Nu","whichEstablishment":"Care este structura dumneavostră ","public":"Serviciu de stat, instituție sau organism public","territorialCollectivity":"Colectivitate teritorială","association":"Asociaţie","administration":"Administraţie centrală","message":"Mesajul dumneavoastră","legal":"Certific faptul că aceste date cu caracter personal au fost introduse cu consimțământul meu.","send":"Trimite","cancel":"Anulează","error":"Solicitarea dvs. conține erori:","share":"Împărtășeste acestă pagină"}')},"9f1c":function(e,t,i){},"9f85":function(e,t,i){},a28d:function(e,t,i){},a39e:function(e,t,i){},a605:function(e,t,i){},a67f:function(e,t,i){},a782:function(e,t,i){"use strict";var a=i("4583"),s=i.n(a);s.a},a863:function(e,t,i){},a897:function(e,t,i){"use strict";var a=i("63fe"),s=i.n(a);s.a},a8ac:function(e,t,i){e.exports=i.p+"img/before.721abeae.png"},aac4:function(e,t,i){},aaf3:function(e,t,i){"use strict";var a=i("7d21"),s=i.n(a);s.a},ac65:function(e,t,i){e.exports=i.p+"img/BG.d7746f61.svg"},ad7a:function(e,t,i){"use strict";var a=i("c0ea"),s=i.n(a);s.a},af0d:function(e,t,i){},af21:function(e){e.exports=JSON.parse('{"contact":"Contactez l\'équipe du projet","statistics":"Statistiques","legal":"Mention légales","userAccessGuide":"Guide des accès et de l\'administrateur","userAgreement":"Charte d\'engagement de l\'utilisateur"}')},af3d:function(e){e.exports=JSON.parse('{"header":{"connect":"Sign in","contact":"Contact us"},"hero":{"title":"Taking action for slum clearance","subtitle":"Ask a question or request an access"},"firstSection":{"features":{"position":"Useful information on slums at a glance","actions":"The projects carried out available at any time","exchange":"Facilitating dialogue between parties involved"},"before":"Before","after":"After","context":{"title":"Résorption-bidonvilles,","subtitle":"A platform to boost the resorption of slums","text":"A tool for information, sharing and steering, the platform offers a high-performance and effective solution for slum clearance. It enables the collaboration of all local stakeholders involved in the slum clearance policy."},"feedback":{"1":{"text":"It\'s great because you have the info online, you\'re not faced with an excel spreadsheet with codes you don\'t understand.","author":"Prefecture Seine-Saint-Denis"},"2":{"text":"The platform made the information more reliable because, before the Excel table was not shared. The more collaborative tools we have, the better it is.","author":"City of Poitiers"},"3":{"text":"I was able to direct the family of a person I was accompanying to a solidarity house from the location of their slum.","author":"Haute-Garonne Association"}}},"firstBanner":{"text":"Involved Stakeholders in slum clearance, please share and highlight your projects","cta":"Request access"},"secondSection":{"title":"Reaching slum clearance,","subtitle":"a national objective","data":{"1":{"line1":"More than","line2":"300 slums","line3":"in mainland France"},"2":{"line1":"More than","line2":"16 000 people","line3":"including 5,000 minors"},"3":{"line1":"Mostly","line2":"Europeans","line3":"Romanian and Bulgarian citizens"}},"firstParagraph":"A slum is an area that usually lacks basic services (water, electricity, waste management) and is illegally occupied by several families.","secondParagraph":{"bold":"The government sets a clear objective of slum resorption by moving away from an evacuation-centred approach to a global approach.","normal":"combining social inclusion, respect for public order and prevention of resettlement. In all the territories concerned, effective, humane and pragmatic multi-partner actions must be implemented.","link":"More about the slum resorption policy"},"video":{"text":"Understanding slum clearance in 2 minutes"}},"secondBanner":{"text":"Neighbour, citizen, slum dweller... Any news? A question ? An alert?","cta":"Contact us"},"thirdSection":{"title":"Actions in figures","firstParagraph":{"bold":"In 2019, more than 30 slum clearance projects have been carried out by 35 NGOs","normal":"They have been financed 75% by the State, 15% by local authorities and 10% by private or European funds. Families living in slums have been supported in order to access to health, housing, employment, education and sanitation."},"bilan":{"1":{"text":"8,600 beneficiaries of the actions"},"3":{"text":"1,000 people re-housed"},"4":{"text":"1,350 children in school"},"5":{"text":"2,040 beneficiaries","info":"of health support"},"6":{"text":"615 employment contracts signed"}},"cta":"Download the latest report","secondParagraph":{"title":"A project led by the interministerial delegation for access to housing (DIHAL)","body":{"text1":"The digital platform Résorption-bidonvilles, launched in 2018 by the","link1":"DIHAL","text2":"plays a role in transforming public action","text3":"The platform continues to be developed in close collaboration with its users.","text4":"To learn more about the beginning of the project, please visit ","link2":"the official website about Start-up d\'Etat"},"items":{"1":{"link":"General interest entrepreneur","text":"of the Future Investment Program in 2019"},"2":{"link":"European Commission\'s \\"rights, citizenship and equality\\" program","text":"in 2020"},"3":{"link":"State Start-up Acceleration Fund 3","text":"of DINUM in April 2020"},"4":{"link":"French policy transformation fund","text":"of DITP in October 2020"},"title":"The project was the winner of several calls for proposals:"}}},"contactForm":{"email":"Your email","cta":"Contact us"}}')},afa5:function(e,t,i){},b371:function(e,t,i){},b3ad:function(e,t,i){},b756:function(e,t,i){"use strict";var a=i("9f85"),s=i.n(a);s.a},b82e:function(e,t,i){"use strict";var a=i("e67e"),s=i.n(a);s.a},b9d6:function(e,t,i){},bafd:function(e,t,i){},bc14:function(e,t,i){"use strict";var a=i("4a62"),s=i.n(a);s.a},be9a:function(e,t,i){},bfb2:function(e,t,i){},c0ea:function(e,t,i){},c35a4:function(e,t,i){"use strict";var a=i("2935"),s=i.n(a);s.a},c368:function(e,t,i){},c789:function(e,t,i){"use strict";var a=i("7b35"),s=i.n(a);s.a},cb23:function(e,t,i){"use strict";var a=i("f925"),s=i.n(a);s.a},cb4e:function(e,t,i){"use strict";var a=i("d815"),s=i.n(a);s.a},cbe6:function(e,t,i){e.exports=i.p+"img/after.bd6456af.jpg"},ccab:function(e,t,i){e.exports=i.p+"img/police_siren.ffa34c81.svg"},cda2:function(e){e.exports=JSON.parse('{"header":{"connect":"Вход","contact":"Свържете се с нас"},"hero":{"title":"Действия за закриване на бидонвили","subtitle":"Задайте въпрос или поискайте достъп"},"firstSection":{"features":{"position":"Полезна информация за обектите само с един поглед","actions":"Достъп по всяко време до най-важните дейности","exchange":"Улеснена връзка между участниците"},"context":{"title":"Закриване на бидонвили","subtitle":"Платформа за ускоряване на закриването на бидонвилите","text":"Инструмент за информация, споделяне и управление, платформата предлага работещо и ефикасно решение за закриване на бидонвили. Тя спомага за създаванетона на истинска динамика на сътрудничество между ангажираните участници по места за изпълнение на поставената цел."},"before":"Преди","after":"След ","feedback":{"1":{"text":"Отлично е, защото имате онлайн достъп до информацията, не сте пред екселска таблица с формули, които не разбирате.","author":"Префектура на департамента Сен-Сан-Дени"},"2":{"text":"Платформата предоставя достоверна информация, а екселската таблицата не беше колаборативна. Колкото повече инструменти за съвместна работа, толкова по-добре.","author":"Град Поатие"},"3":{"text":"Успях да насоча семейството на човек, на когото помагам, към социален център според местонаходжението на техния бидонвил","author":"Сдружение от департамента От-Гарон"}}},"firstBanner":{"text":"Дейци в политиката за закриването на бидонвилите, споделете и разпространете информация за вашата дейност","cta":"Искам достъп"},"secondSection":{"title":"Пълното закриване на бидонвилите","subtitle":"национална цел","data":{"1":{"line1":"Над","line2":"300 бидонвила","line3":"в континентална Франция"},"2":{"line1":"Над","line2":"16 000 души","line3":"от които 5 000 непълнолетни"},"3":{"line1":"Предимно","line2":"български и румънски ","line3":"граждани"}},"firstParagraph":"Бидонвилът е изоставен промишлен терен или постройка, обикновено без комунални услуги (вода, ток, събиране на отпадъци), в който са се настанили незаконно няколко семейства.","secondParagraph":{"bold":"През 2018 правителството определи ясна цел за преодоляване на бидонвилите като премине от подхода, сведен nдо евакуация на жителите, към глобален подход,","normal":"съчетаващ социалната интеграция, спазването на обществения ред и предотвратяване на нови бидонвили. Във всички засегнати теротирии трябва да бъдат въведени ефикасни, хуманни и прагматични действия с много партньори.","link":"Научете повече за политиката на закриване на бидонвилите"},"video":{"text":"Разберете закриването на бидонвилите в 2 минути"}},"secondBanner":{"text":"Съсед, гражданин, обитател на бидонвил...Информация? Въпрос? Сигнал?","cta":"Свържете се с нас"},"thirdSection":{"title":"Дейностите в цифри","firstParagraph":{"bold":"Над 30 дейности са извършени през 2019 година от над 35 оператори.","normal":"Те са финансирани 75% от държавата, 15% от местните власти и 10% от частни или европейски източници. Професионални екипи помагат на семействата в бидонвилите, незаконно обитаваните сгради или жилищата във всяко отношение: здраве, жилище, работа, образование, стабилизиране и обезопасяване на обекта."},"bilan":{"1":{"text":"8 600 бенефициенти от проектни дейности"},"3":{"text":"1 000 души с нов дом "},"4":{"text":"1 350 деца, посещаващи училище"},"5":{"text":"2 040 бенефициенти","info":"на здравна подкрепа"},"6":{"text":"615 сключени трудови договори"}},"cta":"Свалете последния доклад","secondParagraph":{"title":"Един проект на Междуведмствената делегация за настаняване и достъп до жилище","body":{"text1":"Цифровата платформа Закриване-бидонвили, стартирана през 2018 година от","link1":"МДНДЖ","text2":"е част от целта за трансформация на дейността на публичната администрация","text3":"Развитието на платформата продължава в тясно сътрудничество с нейните потребители.","text4":"Искате да научите повече за генезиса на проекта? Отидете на съответната страница на","link2":"официалния уебсайт на държавните стартъпи"},"items":{"1":{"link":"Предприемач в обществен интерес на Програмата за инвестиране ","text":"в бъдещето през 2019 година"},"2":{"link":"Програмата „Права, гражданство и равенство“ на Европейската комисия","text":"през първия триместър на 2020 година"},"3":{"link":"Фонд за ускоряване на държавни стартъпи 3","text":"на Междуведомствената дирекция за цифровизация през април 2020 година"},"4":{"link":"Френски фонд за трансформация на политики","text":"от DITP през октомври 2020"},"title":"Проектът е победител в множество отворени покани за проекти:"}}},"contactForm":{"email":"Вашият имейл","cta":"Свържете се с нас"}}')},cee3:function(e,t,i){"use strict";var a=i("47b0"),s=i.n(a);s.a},cfd5:function(e,t,i){e.exports=i.p+"img/map-ro.2a33bfb7.jpg"},d416:function(e,t,i){"use strict";var a=i("0fea"),s=i.n(a);s.a},d507:function(e,t,i){},d67e:function(e,t,i){e.exports=i.p+"img/map-fr.28fc1fb5.jpg"},d694:function(e,t,i){"use strict";var a=i("a863"),s=i.n(a);s.a},d815:function(e,t,i){},d89d:function(e,t,i){e.exports=i.p+"img/pin.ee8bc509.svg"},da0f:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-3.1ab7f8ed.jpg"},dce0:function(e,t,i){e.exports=i.p+"img/resorption-bidonvilles-1.f2473868.jpg"},dd94:function(e,t,i){e.exports=i.p+"img/before.8322d5b3.jpg"},dd98:function(e,t,i){},e010:function(e,t,i){},e04d:function(e,t,i){"use strict";var a=i("7e15"),s=i.n(a);s.a},e072:function(e,t,i){"use strict";var a=i("e93e"),s=i.n(a);s.a},e119:function(e,t,i){"use strict";var a=i("dd98"),s=i.n(a);s.a},e17b:function(e,t,i){},e1d3:function(e,t,i){"use strict";var a=i("27a3"),s=i.n(a);s.a},e2e4:function(e,t,i){e.exports=i.p+"img/after.9bcbbe3b.png"},e438:function(e,t,i){"use strict";var a=i("01b4"),s=i.n(a);s.a},e451:function(e,t,i){"use strict";var a=i("b9d6"),s=i.n(a);s.a},e517:function(e,t,i){"use strict";var a=i("afa5"),s=i.n(a);s.a},e61f:function(e,t,i){e.exports=i.p+"img/logo-commission-europenne.69cc0d29.png"},e67e:function(e,t,i){},e744:function(e,t,i){"use strict";var a=i("af0d"),s=i.n(a);s.a},e93e:function(e,t,i){},e99b:function(e,t,i){},e9cc:function(e,t,i){},edfe:function(e,t,i){"use strict";var a=i("e010"),s=i.n(a);s.a},efa2:function(e,t,i){"use strict";var a=i("8683"),s=i.n(a);s.a},f090:function(e,t,i){"use strict";var a=i("b371"),s=i.n(a);s.a},f12c:function(e,t,i){"use strict";var a=i("a28d"),s=i.n(a);s.a},f20a:function(e,t,i){e.exports=i.p+"img/before.d5499aad.png"},f276:function(e,t,i){"use strict";var a=i("d507"),s=i.n(a);s.a},f6ce:function(e,t,i){"use strict";var a=i("a39e"),s=i.n(a);s.a},f867:function(e,t,i){"use strict";var a=i("bfb2"),s=i.n(a);s.a},f909:function(e,t,i){"use strict";var a=i("2b2e"),s=i.n(a);s.a},f925:function(e,t,i){},fd3d:function(e){e.exports=JSON.parse('{"header":{"connect":"Pentru a vă conecta","contact":"Contactați-ne"},"hero":{"title":"Acționăm pentru resorbția de bidonville","subtitle":"Puneți o întrebare sau solicitați accesul"},"firstSection":{"features":{"position":"Găsiți informații utile foarterapid pe site","actions":"Esențialul acțiunilor disponibil în orice moment","exchange":"Schimb de informatie rapidă intre participanţi"},"context":{"title":"Resorbția de bidonville,","subtitle":"O platformă pentru a accelera resorbția de bidonville","text":"Un instrument de informare, partajare și ghidare , platforma oferă o soluție puternică și eficientă pentru resorbția de bidonville. Acesta permite crearea unei dinamici reale de colaborare, într-un teritoriu si între actorii dedicați obiectivului de resorbția de bidonville."},"before":"Înainte","after":"După","feedback":{"1":{"text":"Este foarte bine pentru că aveți informațiile online, nu vă confruntați cu un tabel Excel cu coduri pe care nu le înțelegeți.","author":"Prefectura Seine-Saint-Denis"},"2":{"text":"Platforma a făcut informațiile mai accesibile, deoarece tabelul Excelnu era partajat. Cu cât avem mai multeinstrumente de colaborare, cu atât mai bine.","author":"Orașul Poitiers"},"3":{"text":"Am fost în măsură să direcționez familia unei persoane pe care o acomapaniez la o casă de solidaritate de la locația lor situata într-un bidonville.","author":"Asociația din Haute-Garonne"}}},"firstBanner":{"text":"Actori ai resorbției de bidonville, partajați și faceţi cunoscute acțiunile voastre","cta":"Solicitaţi accesul"},"secondSection":{"title":"Dizolvarea platzurilor,","subtitle":"un obiectiv național","data":{"1":{"line1":"Peste","line2":"300 de platzur","line3":"în Franța metropolitană"},"2":{"line1":"Peste","line2":"16 000 de persoane","line3":"inclusiv 5.000 de minori"},"3":{"line1":"Majoritatea","line2":"europeni","line3":"români și bulgari"}},"firstParagraph":"Un bidonville este un teren, un maidan sau o clădire construită care în general e lipsită de servicii de bază (apă, electricitate, gestionarea deșeurilor) și ocupată ilegal de mai multe familii. Un bidonville mai est denumit si „plaț” în limbaj familiar.","secondParagraph":{"bold":"In 2018, Guvernul și-a stabilit un obiectiv clar pentru resorbția de bidonville, depășind abordarea centrată pe evacuare, într-o abordare cuprinzătoare care combină integrarea socială, respectarea ordinii publice și prevenirea reinstralarii.","normal":"În toateteritoriile în cauză, trebuie instituite acțiuni eficiente, umane și pragmatice multi-parteneriale.","link":"Aflați mai multe despre politica de resorbției de bidonville"},"video":{"text":"Înțelegerea resorbției de bidonville în 2 minute"}},"secondBanner":{"text":"Vecin, cetățean, rezident într-un bidonville... O informaţie? O întrebare? O alertă?","cta":"Contactaţi-ne"},"thirdSection":{"title":"Acţiunile desfăşurate in cifre","firstParagraph":{"bold":"Peste 30 de acțiuni desfășurate în 2019 de catre 35 de operatori.","normal":"Acestea sunt 75% finanțate de stat, 15% de autoritățile locale și 10% din fonduri private sau europene. Echipe de profesioniști însoțesc familiile în bidonville, cladirile dezafectate sau în locuință cuprinzând toate aspectele: sănătate, locuința, ocuparea forței de muncă, educație, stabilizare și securitatea locului."},"bilan":{"1":{"text":"8 600 de beneficiari ai acestor actiuni"},"3":{"text":"1 000 de persoane relocate"},"4":{"text":"1 350 elevi"},"5":{"text":"2 040 de beneficiari","info":"de sprijin medical"},"6":{"text":"615 contracte de muncă semnate"}},"cta":"Încarcaţi ultimul bilanţ","secondParagraph":{"title":"Un proiect realizat de Delegația Interministerială privind cazarea și accesul la locuințe","body":{"text1":"Platforma digitală „resorbția de bidonville”, lansată în 2018 de","link1":"Dihal","text2":"face parte dintr-un obiectiv de transformare a acțiunii publice.","text3":"Evoluțiile platformei continuă în strânsă colaborare cu utilizatorii săi.","text4":"Doriți să aflați mai multe despre crearea proiectului? Accesați fişa proiectulu","link2":"pe site-ul oficial:  Start-Up de stat"},"items":{"1":{"link":"Antreprenor de interes general","text":"al Programului de investiții de viitor in2019"},"2":{"link":"rogramul Comisiei Europene \\"drepturi, cetățenie și egalitate\\"","text":"în primul trimestru al anului 2020"},"3":{"link":"Fonduri de Accelerare pentru Start-up de stat 3","text":"de la DINUM în aprilie 2020"},"4":{"link":"Fondul de transformare a politicii franceze","text":"de la DITP în octombrie 2020"},"title":"Proiectul a fost câștigătorul mai multor cereri de proiecte :"}}},"contactForm":{"email":"E-mailul dumneavoastră","cta":"Contactaţi-ne"}}')},fd66:function(e,t,i){"use strict";var a=i("60ec"),s=i.n(a);s.a},ff59:function(e,t,i){}});
//# sourceMappingURL=index.30f8cfef.js.map